2025-06-22 11:33:00,112 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:33:00,114 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:33:00,114 - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 11:33:00,115 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:33:00,116 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:33:00,116 - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 11:33:00,154 - WARNING -  * Debugger is active!
2025-06-22 11:33:00,175 - INFO -  * Debugger PIN: 119-762-361
2025-06-22 11:33:11,670 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:33:11,671 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:33:11,672 - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 11:33:11,672 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:33:11,675 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:33:11,675 - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 11:33:11,737 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.105.45:5000
2025-06-22 11:33:11,738 - INFO - [33mPress CTRL+C to quit[0m
2025-06-22 11:33:11,739 - INFO -  * Restarting with stat
2025-06-22 11:33:12,308 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:33:12,309 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:33:12,310 - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 11:33:12,310 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:33:12,311 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:33:12,312 - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 11:33:12,343 - WARNING -  * Debugger is active!
2025-06-22 11:33:12,363 - INFO -  * Debugger PIN: 119-762-361
2025-06-22 11:33:18,921 - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 11:33:18,936 - INFO - 10.82.105.45 - - [22/Jun/2025 11:33:18] "GET / HTTP/1.1" 200 -
2025-06-22 11:33:18,981 - INFO - 10.82.105.45 - - [22/Jun/2025 11:33:18] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 11:33:19,059 - INFO - 10.82.105.45 - - [22/Jun/2025 11:33:19] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-22 11:33:19,096 - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 11:33:19,096 - INFO - 10.82.105.45 - - [22/Jun/2025 11:33:19] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 11:33:22,146 - INFO - ğŸ“Š Generation started at: 2025-06-22 11:33:22.146599
2025-06-22 11:33:22,147 - INFO - ğŸ“Š Generation started at: 2025-06-22T11:33:22.146599
2025-06-22 11:33:22,147 - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-22 11:33:22,149 - INFO - Successfully loaded template: locker_out.json
2025-06-22 11:33:22,149 - INFO - ğŸ§  Analyzing intent for user 10.82.105.45, input: {'llm_prompt': '', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250622', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-22 11:33:22,246 - INFO - ğŸ§  Fetching user preferences
2025-06-22 11:33:22,248 - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-22 11:33:22,257 - INFO - ğŸ§  Sending prompt to LLM
2025-06-22 11:33:28,032 - INFO - ğŸ§  Intent analysis completed: Generate a detailed operational procedure document for decommissioning locker 17280M (Locker S-OUT) (confidence: 0.98) in 5.88s
2025-06-22 11:33:28,032 - INFO - ğŸ“‹ Creating plan for intent: Generate a detailed operational procedure document for decommissioning locker 17280M (Locker S-OUT)
2025-06-22 11:33:28,032 - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-22 11:33:37,296 - INFO - ğŸ“‹ Created execution plan with 4 steps in 9.26s
2025-06-22 11:33:37,296 - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 11:33:37,296 - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-22 11:33:37,296 - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-22 11:33:37,296 - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-22 11:33:37,296 - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250622_113337_29651', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-22 11:33:37.296859
2025-06-22 11:33:51,727 - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-22 11:33:51,730 - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250622_113337_29651
2025-06-22 11:33:51,730 - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250622_113337_29651_113351_328
2025-06-22 11:33:51,730 - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-22 11:33:51,731 - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250622_113337_29651_113351_328, space: SCG, parent ID: 5880757738 in 14.43s
2025-06-22 11:33:51,732 - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 11:33:51,732 - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250622_113337_29651_113351_328' in space 'SCG'
2025-06-22 11:33:51,732 - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250622_113337_29651_113351_328"
2025-06-22 11:33:54,014 - INFO - âœ… Page created successfully: ID=5907084496, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250622_113337_29651_113351_328
2025-06-22 11:33:54,027 - INFO - ğŸ¤– Request processing completed in 31.88s
2025-06-22 11:33:54,028 - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 11:33:54,028 - INFO - ğŸ¤– Request processing completed in 31.88s
2025-06-22 11:33:54,029 - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 11:33:54,029 - INFO - ğŸ“Š Generation completed in 31.88s
2025-06-22 11:33:54,029 - INFO - 10.82.105.45 - - [22/Jun/2025 11:33:54] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-22 11:34:26,470 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:26] "GET /dashboard HTTP/1.1" 200 -
2025-06-22 11:34:26,500 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:26] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 11:34:26,526 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:26] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-22 11:34:26,547 - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 11:34:26,547 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:26] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 11:34:26,558 - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 11:34:26,558 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:26] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 11:34:50,246 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:50] "GET /dashboard HTTP/1.1" 200 -
2025-06-22 11:34:50,259 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:50] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 11:34:50,288 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:50] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-22 11:34:50,306 - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 11:34:50,306 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:50] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 11:34:50,325 - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 11:34:50,325 - INFO - 10.82.105.45 - - [22/Jun/2025 11:34:50] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 11:50:54,877 - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-22 11:50:57,035 - INFO -  * Restarting with stat
2025-06-22 11:50:57,954 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:50:57,956 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:50:57,956 - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 11:50:57,957 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:50:57,958 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:50:57,959 - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 11:50:58,010 - WARNING -  * Debugger is active!
2025-06-22 11:50:58,028 - INFO -  * Debugger PIN: 119-762-361
2025-06-22 11:56:29,911 - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/ai_agent.py', reloading
2025-06-22 11:56:30,039 - INFO -  * Restarting with stat
2025-06-22 11:56:30,895 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 11:56:30,897 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 11:56:30,897 - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 11:56:30,916 - INFO - ğŸ§  Closed all database connections
2025-06-22 11:56:31,127 - INFO - ğŸ§  Closed all database connections
2025-06-22 11:56:31,127 - INFO - ğŸ§  Closed all database connections
2025-06-22 12:10:54,175 - INFO - Logging initialized for app-llm.py
2025-06-22 12:10:54,176 - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:10:54,180 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:10:54,181 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:10:54,182 - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:10:54,201 - INFO - ğŸ§  Closed all database connections
2025-06-22 12:16:27,938 - INFO - Logging initialized for app-llm.py
2025-06-22 12:16:27,938 - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:16:27,943 - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:16:27,944 - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:16:27,945 - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:16:27,964 - INFO - ğŸ§  Closed all database connections
2025-06-22 12:51:46,853,853 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 12:51:46,853,853 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:51:46,856,856 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:51:46,857,857 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:51:46,858,858 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:51:46,858,858 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:51:46,876,876 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-22 12:52:13,630,630 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 12:52:13,630,630 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:52:13,633,633 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:52:13,635,635 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:52:13,636,636 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:52:13,636,636 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:52:13,636,636 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:52:13,636,636 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:52:13,637,637 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:52:13,638,638 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:52:13,639,639 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:52:13,639,639 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:52:13,639,639 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:52:13,639,639 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:52:13,974,974 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.105.45:5000
2025-06-22 12:52:13,974,974 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-22 12:52:13,975,975 - werkzeug - INFO -  * Restarting with stat
2025-06-22 12:52:14,487,487 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 12:52:14,487,487 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:52:14,488,488 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:52:14,490,490 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:52:14,491,491 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:52:14,491,491 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:52:14,491,491 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:52:14,491,491 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:52:14,492,492 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:52:14,493,493 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:52:14,493,493 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:52:14,493,493 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:52:14,493,493 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:52:14,494,494 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:52:14,521,521 - werkzeug - WARNING -  * Debugger is active!
2025-06-22 12:52:14,541,541 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-22 12:52:18,643,643 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 12:52:18,657,657 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:52:18] "GET / HTTP/1.1" 200 -
2025-06-22 12:52:18,679,679 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:52:18] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 12:52:18,691,691 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:52:18] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-22 12:52:18,737,737 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 12:52:18,737,737 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:52:18] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 12:52:29,486,486 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-22 12:52:29.486504
2025-06-22 12:52:29,487,487 - __main__ - INFO - Request from user: 10.82.105.45
2025-06-22 12:52:29,487,487 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-22T12:52:29.486504
2025-06-22 12:52:29,487,487 - __main__ - INFO - Starting AI agent processing
2025-06-22 12:52:29,488,488 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.105.45, input: {'llm_prompt': 'logger out for today', 'template_file': '', 'operation_type': 's_out', 'operation_date': '20250622', 'template_data': None}
2025-06-22 12:52:29,488,488 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-22 12:52:29,495,495 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-22 12:52:29,505,505 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-22 12:52:33,884,884 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: logout (confidence: 0.98) in 4.40s
2025-06-22 12:52:33,885,885 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: logout
2025-06-22 12:52:33,886,886 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-22 12:52:37,499,499 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 3.61s
2025-06-22 12:52:37,500,500 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:52:37,500,500 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-22 12:52:37,500,500 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-22 12:52:37,501,501 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_OUT page for space SCP...
2025-06-22 12:52:37,501,501 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_out, template_data=None,start_time=2025-06-22 12:52:37.501126
2025-06-22 12:52:41,785,785 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-22 12:52:41,785,785 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Generated fallback title: S_OUT_20250622
2025-06-22 12:52:41,785,785 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: S_OUT_20250622_125241_747
2025-06-22 12:52:41,785,785 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 1173 characters
2025-06-22 12:52:41,785,785 - utils.ai_agent - INFO - ğŸ¯ Generated page title: S_OUT_20250622_125241_747, space: SCP, parent ID: 5890230619 in 4.29s
2025-06-22 12:52:41,787,787 - utils.ai_agent - ERROR - ğŸ¯ Plan execution failed: ConfluenceClient.__init__() got an unexpected keyword argument 'api_token'
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/ai_agent.py", line 466, in _execute_plan
    confluence_client = ConfluenceClient(
        url="https://confluence.rakuten-it.com/confluence",
        username=os.getenv("CONFLUENCE_USERNAME"),
        api_token=os.getenv("CONFLUENCE_API_TOKEN")
    )
TypeError: ConfluenceClient.__init__() got an unexpected keyword argument 'api_token'

2025-06-22 12:52:41,787,787 - utils.ai_agent - ERROR - ğŸ¤– Agent failure: ConfluenceClient.__init__() got an unexpected keyword argument 'api_token'
2025-06-22 12:52:41,789,789 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 12.30s
2025-06-22 12:52:41,791,791 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 12:52:41,791,791 - __main__ - INFO - ğŸ¤– Request processing completed in 12.31s
2025-06-22 12:52:41,791,791 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 12:52:41,791,791 - __main__ - INFO - ğŸ“Š Generation completed in 12.31s
2025-06-22 12:52:41,791,791 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:52:41] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-22 12:53:18,549,549 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/ai_agent.py', reloading
2025-06-22 12:53:20,647,647 - werkzeug - INFO -  * Restarting with stat
2025-06-22 12:53:21,757,757 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 12:53:21,757,757 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:53:21,758,758 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:53:21,760,760 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:53:21,760,760 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:53:21,760,760 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:21,760,760 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:21,760,760 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:53:21,761,761 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:53:21,764,764 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:53:21,764,764 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:53:21,765,765 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:21,765,765 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:21,765,765 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:53:21,801,801 - werkzeug - WARNING -  * Debugger is active!
2025-06-22 12:53:21,821,821 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-22 12:53:22,797,797 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 12:53:22,810,810 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:53:22] "GET / HTTP/1.1" 200 -
2025-06-22 12:53:22,835,835 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:53:22] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-22 12:53:22,876,876 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:53:22] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 12:53:22,945,945 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 12:53:22,947,947 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:53:22] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 12:53:35,545,545 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-22 12:53:35,545,545 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-22 12:53:37,531,531 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 12:53:37,531,531 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:53:37,532,532 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:53:37,533,533 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:53:37,533,533 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:53:37,533,533 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:37,534,534 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:37,534,534 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:53:37,534,534 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:53:37,536,536 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:53:37,537,537 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:53:37,537,537 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:37,537,537 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:37,537,537 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:53:37,588,588 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.105.45:5000
2025-06-22 12:53:37,588,588 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-22 12:53:37,589,589 - werkzeug - INFO -  * Restarting with stat
2025-06-22 12:53:38,156,156 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 12:53:38,156,156 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:53:38,157,157 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:53:38,158,158 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:53:38,159,159 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:53:38,159,159 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:38,159,159 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:38,159,159 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:53:38,160,160 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:53:38,163,163 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:53:38,164,164 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:53:38,164,164 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:38,164,164 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:53:38,164,164 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:53:38,197,197 - werkzeug - WARNING -  * Debugger is active!
2025-06-22 12:53:38,220,220 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-22 12:53:41,054,054 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 12:53:41,066,066 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:53:41] "GET / HTTP/1.1" 200 -
2025-06-22 12:53:41,096,096 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:53:41] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 12:53:41,129,129 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:53:41] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-22 12:53:41,180,180 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 12:53:41,180,180 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:53:41] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 12:53:48,940,940 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-22 12:53:48.940547
2025-06-22 12:53:48,941,941 - __main__ - INFO - Request from user: 10.82.105.45
2025-06-22 12:53:48,941,941 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-22T12:53:48.940547
2025-06-22 12:53:48,941,941 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:53:48,941,941 - utils.template_processor - INFO - Attempting to load template: page_templates/s_in.json
2025-06-22 12:53:48,942,942 - utils.template_processor - INFO - Successfully loaded template: s_in.json
2025-06-22 12:53:48,943,943 - __main__ - INFO - Successfully loaded template: s_in.json
2025-06-22 12:53:48,944,944 - __main__ - INFO - Starting AI agent processing
2025-06-22 12:53:48,944,944 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.105.45, input: {'llm_prompt': 's in for today', 'template_file': 's_in.json', 'operation_type': 's_in', 'operation_date': '20250622', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-22 12:53:49,115,115 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-22 12:53:49,129,129 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-22 12:53:49,134,134 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-22 12:53:54,992,992 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate S-IN document for June 22nd, 2025 (confidence: 0.98) in 6.05s
2025-06-22 12:53:54,993,993 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate S-IN document for June 22nd, 2025
2025-06-22 12:53:54,993,993 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-22 12:54:02,424,424 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 7.43s
2025-06-22 12:54:02,424,424 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:54:02,425,425 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_in'
2025-06-22 12:54:02,425,425 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_in: SCP
2025-06-22 12:54:02,425,425 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_IN page for space SCP...
2025-06-22 12:54:02,425,425 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_in, template_data={'title': 'SCP vShop_ingestion_20250622_125402_42483', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-22 12:54:02.425561
2025-06-22 12:54:25,613,613 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-22 12:54:25,618,618 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250622_125402_42483
2025-06-22 12:54:25,618,618 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250622_125402_42483_125425_807
2025-06-22 12:54:25,619,619 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 21404 characters
2025-06-22 12:54:25,620,620 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250622_125402_42483_125425_807, space: SCP, parent ID: 5890230619 in 23.20s
2025-06-22 12:54:25,620,620 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:54:25,620,620 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:54:25,621,621 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250622_125402_42483_125425_807' in space 'SCP'
2025-06-22 12:54:27,775,775 - utils.confluence_client - ERROR - âŒ Page creation failed: 'Response' object is not subscriptable
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/confluence_client.py", line 93, in create_page
    page_url = f"{self.url}{response['_links']['webui']}"
                            ~~~~~~~~^^^^^^^^^^
TypeError: 'Response' object is not subscriptable

2025-06-22 12:54:27,776,776 - utils.ai_agent - ERROR - ğŸ¯ Failed to create Confluence page: 'Response' object is not subscriptable
2025-06-22 12:54:27,777,777 - utils.ai_agent - ERROR - ğŸ¤– Agent failure: Page creation failed: 'Response' object is not subscriptable
2025-06-22 12:54:27,778,778 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 38.83s
2025-06-22 12:54:27,779,779 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 12:54:27,779,779 - __main__ - INFO - ğŸ¤– Request processing completed in 38.84s
2025-06-22 12:54:27,780,780 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 12:54:27,780,780 - __main__ - INFO - ğŸ“Š Generation completed in 38.84s
2025-06-22 12:54:27,780,780 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:54:27] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-22 12:55:15,954,954 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/confluence_client.py', reloading
2025-06-22 12:55:18,047,047 - werkzeug - INFO -  * Restarting with stat
2025-06-22 12:55:18,800,800 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 12:55:18,800,800 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:55:18,801,801 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:55:18,803,803 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:55:18,804,804 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:55:18,804,804 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:55:18,804,804 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:55:18,804,804 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:55:18,805,805 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 12:55:18,806,806 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 12:55:18,807,807 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:55:18,807,807 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:55:18,807,807 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:55:18,807,807 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 12:55:18,847,847 - werkzeug - WARNING -  * Debugger is active!
2025-06-22 12:55:18,866,866 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-22 12:55:22,501,501 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 12:55:22,512,512 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:55:22] "GET / HTTP/1.1" 200 -
2025-06-22 12:55:22,529,529 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:55:22] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 12:55:22,568,568 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:55:22] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-22 12:55:22,587,587 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 12:55:22,590,590 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:55:22] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 12:55:28,834,834 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-22 12:55:28.834516
2025-06-22 12:55:28,834,834 - __main__ - INFO - Request from user: 10.82.105.45
2025-06-22 12:55:28,834,834 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-22T12:55:28.834516
2025-06-22 12:55:28,834,834 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 12:55:28,835,835 - utils.template_processor - INFO - Attempting to load template: page_templates/s_in.json
2025-06-22 12:55:28,836,836 - utils.template_processor - INFO - Successfully loaded template: s_in.json
2025-06-22 12:55:28,836,836 - __main__ - INFO - Successfully loaded template: s_in.json
2025-06-22 12:55:28,837,837 - __main__ - INFO - Starting AI agent processing
2025-06-22 12:55:28,837,837 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.105.45, input: {'llm_prompt': 's in for today', 'template_file': 's_in.json', 'operation_type': 's_in', 'operation_date': '20250622', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-22 12:55:28,924,924 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-22 12:55:28,929,929 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-22 12:55:28,933,933 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-22 12:55:35,079,079 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: {'operation_type': 's_in', 'urgency': 'moderate', 'complexity': 'complex'} (confidence: 0.98) in 6.24s
2025-06-22 12:55:35,079,079 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: {'operation_type': 's_in', 'urgency': 'moderate', 'complexity': 'complex'}
2025-06-22 12:55:35,080,080 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-22 12:55:43,596,596 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 8.52s
2025-06-22 12:55:43,597,597 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 12:55:43,598,598 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_in'
2025-06-22 12:55:43,598,598 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_in: SCP
2025-06-22 12:55:43,598,598 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_IN page for space SCP...
2025-06-22 12:55:43,599,599 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_in, template_data={'title': 'SCP vShop_ingestion_20250622_125543_59787', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-22 12:55:43.598827
2025-06-22 12:56:06,632,632 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-22 12:56:06,633,633 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250622_125543_59787
2025-06-22 12:56:06,633,633 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250622_125543_59787_125606_323
2025-06-22 12:56:06,633,633 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 21084 characters
2025-06-22 12:56:06,634,634 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250622_125543_59787_125606_323, space: SCP, parent ID: 5890230619 in 23.04s
2025-06-22 12:56:06,634,634 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 12:56:06,634,634 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 12:56:06,634,634 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250622_125543_59787_125606_323' in space 'SCP'
2025-06-22 12:56:06,634,634 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250622_125543_59787_125606_323"
2025-06-22 12:56:08,885,885 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5908227018, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250622_125543_59787_125606_323
2025-06-22 12:56:08,888,888 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 40.05s
2025-06-22 12:56:08,889,889 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 12:56:08,889,889 - __main__ - INFO - ğŸ¤– Request processing completed in 40.06s
2025-06-22 12:56:08,889,889 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 12:56:08,890,890 - __main__ - INFO - ğŸ“Š Generation completed in 40.06s
2025-06-22 12:56:08,890,890 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:56:08] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-22 12:57:45,183,183 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 12:57:45] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 13:16:12,462,462 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-22 13:16:14,586,586 - werkzeug - INFO -  * Restarting with stat
2025-06-22 13:16:15,610,610 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 13:16:15,610,610 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 13:16:15,611,611 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:15,622,622 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:15,623,623 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:15,623,623 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:15,623,623 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:15,623,623 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:15,626,626 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:15,629,629 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:15,630,630 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:15,630,630 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:15,630,630 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:15,630,630 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:15,666,666 - werkzeug - WARNING -  * Debugger is active!
2025-06-22 13:16:15,683,683 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-22 13:16:42,845,845 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-22 13:16:42,939,939 - werkzeug - INFO -  * Restarting with stat
2025-06-22 13:16:43,733,733 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 13:16:43,734,734 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 13:16:43,735,735 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:43,736,736 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:43,737,737 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:43,737,737 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:43,737,737 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:43,737,737 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:43,738,738 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:43,739,739 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:43,740,740 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:43,740,740 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:43,740,740 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:43,740,740 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:43,774,774 - werkzeug - WARNING -  * Debugger is active!
2025-06-22 13:16:43,791,791 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-22 13:16:46,148,148 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-22 13:16:46,245,245 - werkzeug - INFO -  * Restarting with stat
2025-06-22 13:16:46,986,986 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 13:16:46,987,987 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 13:16:46,988,988 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:46,989,989 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:46,990,990 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:46,990,990 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:46,990,990 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:46,990,990 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:46,991,991 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:46,992,992 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:46,993,993 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:46,993,993 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:46,993,993 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:46,994,994 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:47,023,023 - werkzeug - WARNING -  * Debugger is active!
2025-06-22 13:16:47,038,038 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-22 13:16:56,187,187 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-22 13:16:56,187,187 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-22 13:16:58,376,376 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 13:16:58,376,376 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 13:16:58,377,377 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:58,379,379 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:58,379,379 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:58,379,379 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:58,379,379 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:58,379,379 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:58,380,380 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:58,381,381 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:58,382,382 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:58,382,382 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:58,382,382 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:58,382,382 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:58,432,432 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.105.45:5000
2025-06-22 13:16:58,432,432 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-22 13:16:58,433,433 - werkzeug - INFO -  * Restarting with stat
2025-06-22 13:16:58,987,987 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-22 13:16:58,987,987 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 13:16:58,989,989 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:58,990,990 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:58,991,991 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:58,991,991 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:58,991,991 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:58,991,991 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:58,992,992 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-22 13:16:58,993,993 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-22 13:16:58,994,994 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:16:58,994,994 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:58,994,994 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:16:58,994,994 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-22 13:16:59,024,024 - werkzeug - WARNING -  * Debugger is active!
2025-06-22 13:16:59,045,045 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-22 13:17:03,000,000 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 13:17:03,014,014 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 13:17:03] "GET / HTTP/1.1" 200 -
2025-06-22 13:17:03,046,046 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 13:17:03] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-22 13:17:03,061,061 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 13:17:03] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-22 13:17:03,127,127 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-22 13:17:03,127,127 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 13:17:03] "GET /agent_status HTTP/1.1" 200 -
2025-06-22 13:17:10,607,607 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-22 13:17:10.607449
2025-06-22 13:17:10,610,610 - __main__ - INFO - Request from user: 10.82.105.45
2025-06-22 13:17:10,611,611 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-22T13:17:10.607449
2025-06-22 13:17:10,611,611 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-22 13:17:10,611,611 - utils.template_processor - INFO - Attempting to load template: page_templates/s_in.json
2025-06-22 13:17:10,613,613 - utils.template_processor - INFO - Successfully loaded template: s_in.json
2025-06-22 13:17:10,613,613 - __main__ - INFO - Successfully loaded template: s_in.json
2025-06-22 13:17:10,614,614 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-22 13:17:10,614,614 - __main__ - INFO -    operation_type: s_in
2025-06-22 13:17:10,614,614 - __main__ - INFO -    template_file: s_in.json
2025-06-22 13:17:10,614,614 - __main__ - INFO -    operation_date: 20250622
2025-06-22 13:17:10,614,614 - __main__ - INFO -    display_date: 22 June 2025
2025-06-22 13:17:10,614,614 - __main__ - INFO -    source: api_request
2025-06-22 13:17:10,614,614 - __main__ - INFO -    template_data present: True
2025-06-22 13:17:10,614,614 - __main__ - INFO - Starting AI agent processing
2025-06-22 13:17:10,615,615 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.105.45, input: {'llm_prompt': 's in for today', 'template_file': 's_in.json', 'operation_type': 's_in', 'operation_date': '20250622', 'display_date': '22 June 2025', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-22 13:17:10,756,756 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-22 13:17:10,764,764 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-22 13:17:10,770,770 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-22 13:17:17,897,897 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate S-IN document for June 22, 2025 (confidence: 0.98) in 7.28s
2025-06-22 13:17:17,897,897 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate S-IN document for June 22, 2025
2025-06-22 13:17:17,897,897 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-22 13:17:25,524,524 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 6 steps in 7.63s
2025-06-22 13:17:25,524,524 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-22 13:17:25,525,525 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_in'
2025-06-22 13:17:25,525,525 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_in: SCP
2025-06-22 13:17:25,525,525 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_IN page for space SCP...
2025-06-22 13:17:25,525,525 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_in, template_data={'title': 'SCP vShop_ingestion_20250622_131725_52501', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-22 13:17:25.525379
2025-06-22 13:17:48,259,259 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-22 13:17:48,261,261 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250622_131725_52501
2025-06-22 13:17:48,262,262 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250622_131725_52501_131748_278
2025-06-22 13:17:48,262,262 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 21404 characters
2025-06-22 13:17:48,262,262 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250622_131725_52501_131748_278, space: SCP, parent ID: 5890230619 in 22.74s
2025-06-22 13:17:48,262,262 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-22 13:17:48,262,262 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-22 13:17:48,263,263 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250622_131725_52501_131748_278' in space 'SCP'
2025-06-22 13:17:48,263,263 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250622_131725_52501_131748_278"
2025-06-22 13:17:50,665,665 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5908347475, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250622_131725_52501_131748_278
2025-06-22 13:17:50,669,669 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 40.05s
2025-06-22 13:17:50,670,670 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 13:17:50,670,670 - __main__ - ERROR - ğŸ“Š Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-22 13:17:50,670,670 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 40.06s
2025-06-22 13:17:50,671,671 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-22 13:17:50,671,671 - __main__ - INFO - ğŸ“Š Generation completed in 40.06s
2025-06-22 13:17:50,671,671 - werkzeug - INFO - 10.82.105.45 - - [22/Jun/2025 13:17:50] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-23 11:50:01,230,230 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 11:50:03,652,652 - werkzeug - INFO -  * Restarting with stat
2025-06-23 11:50:04,714,714 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 11:50:04,714,714 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 11:50:04,720,720 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:50:04,723,723 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:50:04,724,724 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:50:04,724,724 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:04,724,724 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:04,724,724 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:50:04,725,725 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:50:04,728,728 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:50:04,728,728 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:50:04,729,729 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:04,729,729 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:04,729,729 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:50:04,782,782 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 11:50:04,806,806 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 11:50:14,244,244 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 11:50:14,517,517 - werkzeug - INFO -  * Restarting with stat
2025-06-23 11:50:16,647,647 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 11:50:16,647,647 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 11:50:16,649,649 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:50:16,651,651 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:50:16,651,651 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:50:16,651,651 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:16,651,651 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:16,651,651 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:50:16,653,653 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:50:16,655,655 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:50:16,655,655 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:50:16,656,656 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:16,656,656 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:16,656,656 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:50:16,702,702 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 11:50:16,731,731 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 11:50:55,836,836 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 11:50:56,073,073 - werkzeug - INFO -  * Restarting with stat
2025-06-23 11:50:57,512,512 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 11:50:57,513,513 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 11:50:57,516,516 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:50:57,518,518 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:50:57,519,519 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:50:57,519,519 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:57,519,519 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:57,519,519 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:50:57,521,521 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:50:57,524,524 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:50:57,525,525 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:50:57,525,525 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:57,525,525 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:50:57,525,525 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:50:57,593,593 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 11:50:57,622,622 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 11:51:19,299,299 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 11:51:19,662,662 - werkzeug - INFO -  * Restarting with stat
2025-06-23 11:51:22,689,689 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 11:51:22,689,689 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 11:51:22,692,692 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:51:22,699,699 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:51:22,700,700 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:51:22,701,701 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:51:22,701,701 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:51:22,701,701 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:51:22,703,703 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:51:22,705,705 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:51:22,706,706 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:51:22,706,706 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:51:22,707,707 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:51:22,707,707 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:51:22,783,783 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 11:51:22,812,812 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 11:51:30,261,261 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 11:51:30,433,433 - werkzeug - INFO -  * Restarting with stat
2025-06-23 11:51:31,912,912 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 11:51:31,912,912 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 11:51:31,913,913 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:51:31,915,915 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:51:31,916,916 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:51:31,916,916 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:51:31,916,916 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:51:31,916,916 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:51:31,918,918 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 11:51:31,921,921 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 11:51:31,922,922 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 11:51:31,922,922 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 11:51:31,922,922 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 11:51:31,922,922 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 11:51:32,002,002 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 11:51:32,063,063 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 11:51:45,963,963 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 11:51:46,089,089 - werkzeug - INFO -  * Restarting with stat
2025-06-23 11:51:46,756,756 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 11:51:46,757,757 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 12:08:17,465,465 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 12:08:17,470,470 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:08:17,482,482 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:08:17,484,484 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:08:17,484,484 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:08:17,484,484 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:08:17,485,485 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:08:17,485,485 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:08:17,486,486 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:08:17,488,488 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:08:17,489,489 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:08:17,489,489 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:08:17,489,489 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:08:17,489,489 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:08:18,222,222 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.74.49:5000
2025-06-23 12:08:18,222,222 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 12:08:18,223,223 - werkzeug - INFO -  * Restarting with stat
2025-06-23 12:08:18,929,929 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 12:08:18,929,929 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:08:18,931,931 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:08:18,932,932 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:08:18,933,933 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:08:18,933,933 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:08:18,933,933 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:08:18,933,933 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:08:18,934,934 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:08:18,935,935 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:08:18,936,936 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:08:18,936,936 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:08:18,936,936 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:08:18,936,936 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:08:19,011,011 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 12:08:19,053,053 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 12:08:27,556,556 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:08:27,583,583 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:08:27] "GET / HTTP/1.1" 200 -
2025-06-23 12:08:27,743,743 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:08:27] "GET /static/css/style.css HTTP/1.1" 200 -
2025-06-23 12:08:27,757,757 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:08:27] "GET /static/js/app.js HTTP/1.1" 200 -
2025-06-23 12:08:31,448,448 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:08:31,449,449 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:08:31] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:08:31,822,822 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:08:31] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-23 12:08:39,380,380 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23 12:08:39.380388
2025-06-23 12:08:39,381,381 - __main__ - INFO - Request from user: 10.80.74.49
2025-06-23 12:08:39,381,381 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23T12:08:39.380388
2025-06-23 12:08:39,381,381 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:08:39,381,381 - utils.template_processor - INFO - Attempting to load template: page_templates/s_in.json
2025-06-23 12:08:39,382,382 - utils.template_processor - INFO - Successfully loaded template: s_in.json
2025-06-23 12:08:39,383,383 - __main__ - INFO - Successfully loaded template: s_in.json
2025-06-23 12:08:39,383,383 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-23 12:08:39,383,383 - __main__ - INFO -    operation_type: s_in
2025-06-23 12:08:39,383,383 - __main__ - INFO -    template_file: s_in.json
2025-06-23 12:08:39,383,383 - __main__ - INFO -    operation_date: 20250623
2025-06-23 12:08:39,383,383 - __main__ - INFO -    display_date: 23 June 2025
2025-06-23 12:08:39,383,383 - __main__ - INFO -    source: api_request
2025-06-23 12:08:39,396,396 - __main__ - INFO -    template_data present: True
2025-06-23 12:08:39,396,396 - __main__ - INFO - Starting AI agent processing
2025-06-23 12:08:39,397,397 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.80.74.49, input: {'llm_prompt': 's in for today', 'template_file': 's_in.json', 'operation_type': 's_in', 'operation_date': '20250623', 'display_date': '23 June 2025', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-23 12:08:39,600,600 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-23 12:08:39,647,647 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-23 12:08:39,651,651 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-23 12:08:45,677,677 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Schedule and document an S-IN operation for June 23, 2025 (confidence: 0.98) in 6.28s
2025-06-23 12:08:45,678,678 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Schedule and document an S-IN operation for June 23, 2025
2025-06-23 12:08:45,679,679 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-23 12:08:54,864,864 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 9 steps in 9.19s
2025-06-23 12:08:54,871,871 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:08:54,875,875 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_in'
2025-06-23 12:08:54,880,880 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_in: SCP
2025-06-23 12:08:54,880,880 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_IN page for space SCP...
2025-06-23 12:08:54,881,881 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_in, template_data={'title': 'SCP vShop_ingestion_20250623_120854_87165', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-23 12:08:54.880744
2025-06-23 12:09:17,849,849 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-23 12:09:17,865,865 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250623_120854_87165
2025-06-23 12:09:17,879,879 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250623_120854_87165_120917_448
2025-06-23 12:09:17,881,881 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 21084 characters
2025-06-23 12:09:17,883,883 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250623_120854_87165_120917_448, space: SCP, parent ID: 5890230619 in 23.02s
2025-06-23 12:09:17,896,896 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:09:17,897,897 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:09:17,898,898 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250623_120854_87165_120917_448' in space 'SCP'
2025-06-23 12:09:17,969,969 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250623_120854_87165_120917_448"
2025-06-23 12:09:19,832,832 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5910290601, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250623_120854_87165_120917_448
2025-06-23 12:09:19,856,856 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 40.46s
2025-06-23 12:09:19,859,859 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 12:09:19,860,860 - __main__ - INFO - ğŸ“Š Dashboard will be updated on next refresh cycle
2025-06-23 12:09:19,860,860 - __main__ - ERROR - ğŸ“Š Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-23 12:09:19,861,861 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 40.48s
2025-06-23 12:09:19,863,863 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 12:09:19,863,863 - __main__ - INFO - ğŸ“Š Generation completed in 40.48s
2025-06-23 12:09:19,870,870 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:09:19] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-23 12:09:42,929,929 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:09:42] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 12:09:43,076,076 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:09:43] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:09:43,219,219 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:09:43] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:09:43,639,639 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:09:43,639,639 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:09:43] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:09:43,726,726 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:09:43,727,727 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:09:43] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:10:33,720,720 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:33] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 12:10:33,852,852 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:33] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:10:33,853,853 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:33] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:10:33,995,995 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:10:33,996,996 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:33] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:10:34,031,031 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:10:34,031,031 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:34] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:10:42,686,686 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:42] "GET /feedback HTTP/1.1" 200 -
2025-06-23 12:10:42,740,740 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:42] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:10:42,789,789 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:42] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:10:42,944,944 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:10:42,945,945 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:42] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:10:42,965,965 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:42] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-23 12:10:42,986,986 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:42] "GET /api/feedback/recent?limit=5 HTTP/1.1" 200 -
2025-06-23 12:10:48,504,504 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:10:48,515,515 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:48] "GET / HTTP/1.1" 200 -
2025-06-23 12:10:48,540,540 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:48] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:10:48,570,570 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:48] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:10:48,601,601 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:10:48,601,601 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:10:48] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:17:30,935,935 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 12:17:34,493,493 - werkzeug - INFO -  * Restarting with stat
2025-06-23 12:17:36,752,752 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 12:17:36,754,754 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:17:36,769,769 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:17:36,771,771 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:17:36,772,772 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:17:36,772,772 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:17:36,772,772 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:17:36,773,773 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:17:36,887,887 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:17:36,889,889 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:17:36,890,890 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:17:36,891,891 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:17:36,891,891 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:17:36,891,891 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:17:37,427,427 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 12:17:37,460,460 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 12:18:07,555,555 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 12:18:08,014,014 - werkzeug - INFO -  * Restarting with stat
2025-06-23 12:18:10,177,177 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 12:18:10,177,177 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:18:10,193,193 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:18:10,195,195 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:18:10,196,196 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:18:10,196,196 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:18:10,196,196 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:18:10,196,196 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:18:10,197,197 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:18:10,200,200 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:18:10,200,200 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:18:10,201,201 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:18:10,201,201 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:18:10,201,201 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:18:10,422,422 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 12:18:10,449,449 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 12:19:31,533,533 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 12:19:32,539,539 - werkzeug - INFO -  * Restarting with stat
2025-06-23 12:19:34,483,483 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 12:19:34,483,483 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:19:34,492,492 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:19:34,494,494 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:19:34,495,495 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:19:34,496,496 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:19:34,496,496 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:19:34,496,496 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:19:34,497,497 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:19:34,501,501 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:19:34,502,502 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:19:34,502,502 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:19:34,502,502 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:19:34,502,502 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:19:34,587,587 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 12:19:34,608,608 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 12:24:13,281,281 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 12:24:14,723,723 - werkzeug - INFO -  * Restarting with stat
2025-06-23 12:24:22,190,190 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 12:24:22,191,191 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:24:22,261,261 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:24:22,264,264 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:24:22,264,264 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:24:22,265,265 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:24:22,265,265 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:24:22,265,265 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:24:22,267,267 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:24:22,281,281 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:24:22,282,282 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:24:22,282,282 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:24:22,282,282 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:24:22,282,282 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:24:22,449,449 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 12:24:22,534,534 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 12:29:29,067,067 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 12:29:29,072,072 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 12:40:19,545,545 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 12:40:19,546,546 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:40:19,549,549 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:40:19,551,551 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:40:19,552,552 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:40:19,552,552 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:40:19,553,553 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:40:19,553,553 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:40:19,554,554 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:40:19,556,556 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:40:19,557,557 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:40:19,557,557 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:40:19,557,557 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:40:19,557,557 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:40:20,363,363 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.74.49:5000
2025-06-23 12:40:20,363,363 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 12:40:20,364,364 - werkzeug - INFO -  * Restarting with stat
2025-06-23 12:40:21,023,023 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 12:40:21,023,023 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:40:21,025,025 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:40:21,026,026 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:40:21,027,027 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:40:21,027,027 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:40:21,027,027 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:40:21,027,027 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:40:21,030,030 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 12:40:21,031,031 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 12:40:21,032,032 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:40:21,032,032 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:40:21,033,033 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:40:21,033,033 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 12:40:21,068,068 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 12:40:21,084,084 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 12:40:26,917,917 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:40:26,938,938 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:26] "GET / HTTP/1.1" 200 -
2025-06-23 12:40:27,074,074 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:27] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:40:27,105,105 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:27] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:40:27,293,293 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:40:27,293,293 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:40:27,294,294 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:27] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:40:29,315,315 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:29] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 12:40:29,344,344 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:29] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:40:29,390,390 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:29] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:40:29,426,426 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:40:29,428,428 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:40:29,429,429 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:29] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:40:29,461,461 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:40:29,462,462 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:40:29,462,462 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:29] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:40:44,697,697 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:40:44,707,707 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:44] "GET / HTTP/1.1" 200 -
2025-06-23 12:40:44,764,764 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:44] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:40:44,790,790 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:44] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:40:44,824,824 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:40:44,825,825 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:40:44,825,825 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:40:44] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:40:51,542,542 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23 12:40:51.540307
2025-06-23 12:40:51,650,650 - __main__ - INFO - Request from user: 10.80.74.49
2025-06-23 12:40:51,651,651 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23T12:40:51.540307
2025-06-23 12:40:51,651,651 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 12:40:51,652,652 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_in.json
2025-06-23 12:40:51,661,661 - utils.template_processor - INFO - Successfully loaded template: locker_in.json
2025-06-23 12:40:51,661,661 - __main__ - INFO - Successfully loaded template: locker_in.json
2025-06-23 12:40:51,661,661 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-23 12:40:51,661,661 - __main__ - INFO -    operation_type: locker_in
2025-06-23 12:40:51,661,661 - __main__ - INFO -    template_file: locker_in.json
2025-06-23 12:40:51,661,661 - __main__ - INFO -    operation_date: 20250623
2025-06-23 12:40:51,661,661 - __main__ - INFO -    display_date: 23 June 2025
2025-06-23 12:40:51,661,661 - __main__ - INFO -    source: api_request
2025-06-23 12:40:51,661,661 - __main__ - INFO -    template_data present: True
2025-06-23 12:40:51,661,661 - __main__ - INFO - Starting AI agent processing
2025-06-23 12:40:51,665,665 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.80.74.49, input: {'llm_prompt': 'locker in for today', 'template_file': 'locker_in.json', 'operation_type': 'locker_in', 'operation_date': '20250623', 'display_date': '23 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'RID with id 17280M exists. We will perform S-OUT via Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-23 12:40:51,708,708 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-23 12:40:51,726,726 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-23 12:40:51,738,738 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-23 12:40:57,182,182 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Execute Locker S-OUT operation on 2025-06-23 (confidence: 0.98) in 5.52s
2025-06-23 12:40:57,183,183 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Execute Locker S-OUT operation on 2025-06-23
2025-06-23 12:40:57,185,185 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-23 12:41:05,848,848 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 5 steps in 8.66s
2025-06-23 12:41:05,855,855 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 12:41:05,858,858 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_in'
2025-06-23 12:41:05,858,858 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_in: SCG
2025-06-23 12:41:05,858,858 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_IN page for space SCG...
2025-06-23 12:41:05,859,859 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_in, template_data={'title': 'Locker_AITest_S-OUT_20250623_124105_85562', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'RID with id 17280M exists. We will perform S-OUT via Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-23 12:41:05.858694
2025-06-23 12:41:21,054,054 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-23 12:41:21,059,059 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250623_124105_85562
2025-06-23 12:41:21,060,060 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250623_124105_85562_124121_964
2025-06-23 12:41:21,060,060 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20989 characters
2025-06-23 12:41:21,060,060 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250623_124105_85562_124121_964, space: SCG, parent ID: 5880757738 in 15.21s
2025-06-23 12:41:21,061,061 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 12:41:21,062,062 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 12:41:21,062,062 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250623_124105_85562_124121_964' in space 'SCG'
2025-06-23 12:41:21,062,062 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250623_124105_85562_124121_964"
2025-06-23 12:41:23,269,269 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5914463349, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250623_124105_85562_124121_964
2025-06-23 12:41:23,316,316 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 31.65s
2025-06-23 12:41:23,322,322 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 12:41:23,323,323 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-23 12:41:23,343,343 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 270, in generate_confluence
    ai_agent.memory.store_page_creation(**page_creation_data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-23 12:41:23,343,343 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 31.78s
2025-06-23 12:41:23,361,361 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 12:41:23,361,361 - __main__ - INFO - ğŸ“Š Generation completed in 31.82s
2025-06-23 12:41:23,369,369 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:41:23] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-23 12:42:57,416,416 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:42:57] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 12:42:57,644,644 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:42:57] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:42:57,644,644 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:42:57] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:42:57,840,840 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:42:57,841,841 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:42:57,845,845 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:42:57] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:42:57,891,891 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:42:57,891,891 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:42:57,894,894 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:42:57] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:43:44,646,646 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:43:44,699,699 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:43:44] "GET / HTTP/1.1" 200 -
2025-06-23 12:43:44,935,935 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:43:44] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:43:44,970,970 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:43:44] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:43:45,061,061 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:43:45,063,063 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:43:45,065,065 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:43:45] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:43:53,072,072 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:43:53,077,077 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:43:53,082,082 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:43:53] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:44:23,953,953 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:44:23] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 12:44:24,078,078 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:44:24] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 12:44:24,078,078 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:44:24] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 12:44:24,267,267 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:44:24,269,269 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:44:24,269,269 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:44:24] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:44:24,308,308 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:44:24,309,309 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:44:24,309,309 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:44:24] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 12:44:39,127,127 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 12:44:39,129,129 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 12:44:39,131,131 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 12:44:39] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:24:42,729,729 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 13:24:42,729,729 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 13:24:42,733,733 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:24:42,735,735 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:24:42,736,736 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:24:42,736,736 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:24:42,736,736 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:24:42,736,736 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:24:42,738,738 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:24:42,740,740 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:24:42,741,741 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:24:42,741,741 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:24:42,747,747 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:24:42,747,747 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:24:43,099,099 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.74.49:5000
2025-06-23 13:24:43,099,099 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 13:24:43,100,100 - werkzeug - INFO -  * Restarting with stat
2025-06-23 13:24:43,760,760 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 13:24:43,760,760 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 13:24:43,761,761 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:24:43,763,763 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:24:43,763,763 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:24:43,763,763 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:24:43,763,763 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:24:43,763,763 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:24:43,764,764 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:24:43,765,765 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:24:43,766,766 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:24:43,766,766 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:24:43,766,766 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:24:43,766,766 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:24:43,796,796 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 13:24:43,817,817 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 13:24:46,722,722 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:24:46,748,748 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:46] "GET / HTTP/1.1" 200 -
2025-06-23 13:24:46,813,813 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:46] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 13:24:46,881,881 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:46] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 13:24:47,031,031 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 13:24:47,032,032 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:24:47,033,033 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:47] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:24:50,355,355 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:50] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 13:24:50,390,390 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:50] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 13:24:50,426,426 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:50] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 13:24:50,458,458 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 13:24:50,459,459 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:24:50,459,459 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:50] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:24:50,503,503 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 13:24:50,505,505 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:24:50,508,508 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:24:50] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:25:40,432,432 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:40] "GET /feedback HTTP/1.1" 200 -
2025-06-23 13:25:40,464,464 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:40] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 13:25:40,544,544 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:40] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 13:25:40,594,594 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 13:25:40,597,597 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:25:40,598,598 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:40] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:25:40,622,622 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:40] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-23 13:25:40,648,648 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:40] "GET /api/feedback/recent?limit=5 HTTP/1.1" 200 -
2025-06-23 13:25:46,073,073 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:25:46,074,074 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_in'
2025-06-23 13:25:46,074,074 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_in: SCP
2025-06-23 13:25:46,074,074 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-23 13:25:46,074,074 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-23 13:25:46,074,074 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_in'
2025-06-23 13:25:46,074,074 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_in: SCG
2025-06-23 13:25:46,074,074 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-23 13:25:46,074,074 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-23 13:25:46,075,075 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'unknown'
2025-06-23 13:25:46,075,075 - utils.universal_llm_generator - WARNING - ğŸ  âš ï¸ Using default space for unknown operation unknown: GENERAL
2025-06-23 13:25:46,076,076 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:46] "GET /debug/space_mapping HTTP/1.1" 200 -
2025-06-23 13:25:51,227,227 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:51] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 13:25:51,258,258 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:51] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 13:25:51,294,294 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:51] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 13:25:51,358,358 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 13:25:51,359,359 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:25:51,360,360 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:51] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:25:51,405,405 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 13:25:51,406,406 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:25:51,406,406 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:25:51] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:37:43,574,574 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 13:37:44,149,149 - werkzeug - INFO -  * Restarting with stat
2025-06-23 13:37:45,289,289 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 13:37:45,289,289 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 13:37:45,293,293 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:37:45,296,296 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:37:45,297,297 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:37:45,297,297 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:37:45,297,297 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:37:45,297,297 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:37:45,298,298 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:37:45,299,299 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:37:45,300,300 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:37:45,300,300 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:37:45,300,300 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:37:45,300,300 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:37:45,343,343 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 13:37:45,367,367 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 13:38:49,151,151 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 13:38:49,284,284 - werkzeug - INFO -  * Restarting with stat
2025-06-23 13:38:50,595,595 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 13:38:50,595,595 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 13:38:50,597,597 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:38:50,598,598 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:38:50,599,599 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:38:50,599,599 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:38:50,599,599 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:38:50,599,599 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:38:50,601,601 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:38:50,602,602 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:38:50,603,603 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:38:50,603,603 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:38:50,603,603 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:38:50,603,603 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:38:50,659,659 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 13:38:50,693,693 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 13:42:21,420,420 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 13:42:21,422,422 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 13:42:29,685,685 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 13:42:29,685,685 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 13:42:29,688,688 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:42:29,690,690 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:42:29,692,692 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:42:29,692,692 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:42:29,692,692 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:42:29,692,692 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:42:29,693,693 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:42:29,694,694 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:42:29,695,695 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:42:29,695,695 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:42:29,695,695 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:42:29,695,695 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:42:29,754,754 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.74.49:5000
2025-06-23 13:42:29,754,754 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 13:42:29,755,755 - werkzeug - INFO -  * Restarting with stat
2025-06-23 13:42:30,329,329 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 13:42:30,329,329 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 13:42:30,331,331 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:42:30,332,332 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:42:30,333,333 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:42:30,333,333 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:42:30,333,333 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:42:30,333,333 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:42:30,334,334 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 13:42:30,335,335 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 13:42:30,335,335 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 13:42:30,335,335 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 13:42:30,335,335 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 13:42:30,335,335 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 13:42:30,365,365 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 13:42:30,494,494 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 13:42:33,014,014 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:42:33,027,027 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:33] "GET / HTTP/1.1" 200 -
2025-06-23 13:42:33,053,053 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:33] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 13:42:33,144,144 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:33] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 13:42:33,232,232 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 13:42:33,233,233 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:42:33,233,233 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:33] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:42:36,563,563 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:36] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 13:42:36,628,628 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:36] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 13:42:36,644,644 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:36] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 13:42:36,772,772 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 13:42:36,775,775 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 13:42:36,776,776 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:36] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 13:42:36,814,814 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:36] "GET /api/dashboard/stats?_t=1750666356647 HTTP/1.1" 200 -
2025-06-23 13:42:36,828,828 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:36] "GET /api/dashboard/activity?limit=15&_t=1750666356647 HTTP/1.1" 200 -
2025-06-23 13:42:41,701,701 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:41] "GET /api/dashboard/stats?_t=1750666361649 HTTP/1.1" 200 -
2025-06-23 13:42:41,745,745 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:41] "GET /api/dashboard/activity?limit=15&_t=1750666361650 HTTP/1.1" 200 -
2025-06-23 13:42:46,866,866 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:46] "GET /api/dashboard/stats?_t=1750666366649 HTTP/1.1" 200 -
2025-06-23 13:42:46,907,907 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:46] "GET /api/dashboard/activity?limit=15&_t=1750666366650 HTTP/1.1" 200 -
2025-06-23 13:42:51,693,693 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:51] "GET /api/dashboard/stats?_t=1750666371649 HTTP/1.1" 200 -
2025-06-23 13:42:51,757,757 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:51] "GET /api/dashboard/activity?limit=15&_t=1750666371649 HTTP/1.1" 200 -
2025-06-23 13:42:56,863,863 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:56] "GET /api/dashboard/stats?_t=1750666376649 HTTP/1.1" 200 -
2025-06-23 13:42:56,900,900 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:42:56] "GET /api/dashboard/activity?limit=15&_t=1750666376650 HTTP/1.1" 200 -
2025-06-23 13:43:01,672,672 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:01] "GET /api/dashboard/stats?_t=1750666381649 HTTP/1.1" 200 -
2025-06-23 13:43:01,703,703 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:01] "GET /api/dashboard/activity?limit=15&_t=1750666381649 HTTP/1.1" 200 -
2025-06-23 13:43:06,859,859 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:06] "GET /api/dashboard/stats?_t=1750666386650 HTTP/1.1" 200 -
2025-06-23 13:43:06,908,908 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:06] "GET /api/dashboard/activity?limit=15&_t=1750666386650 HTTP/1.1" 200 -
2025-06-23 13:43:11,673,673 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:11] "GET /api/dashboard/stats?_t=1750666391648 HTTP/1.1" 200 -
2025-06-23 13:43:11,718,718 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:11] "GET /api/dashboard/activity?limit=15&_t=1750666391648 HTTP/1.1" 200 -
2025-06-23 13:43:16,694,694 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:16] "GET /api/dashboard/stats?_t=1750666396649 HTTP/1.1" 200 -
2025-06-23 13:43:16,732,732 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:16] "GET /api/dashboard/activity?limit=15&_t=1750666396649 HTTP/1.1" 200 -
2025-06-23 13:43:21,899,899 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:21] "GET /api/dashboard/stats?_t=1750666401648 HTTP/1.1" 200 -
2025-06-23 13:43:21,922,922 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:21] "GET /api/dashboard/activity?limit=15&_t=1750666401648 HTTP/1.1" 200 -
2025-06-23 13:43:26,894,894 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:26] "GET /api/dashboard/stats?_t=1750666406649 HTTP/1.1" 200 -
2025-06-23 13:43:26,940,940 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:26] "GET /api/dashboard/activity?limit=15&_t=1750666406649 HTTP/1.1" 200 -
2025-06-23 13:43:27,043,043 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:27] "GET /api/dashboard/activity?limit=15&_t=1750666406974 HTTP/1.1" 200 -
2025-06-23 13:43:31,674,674 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:31] "GET /api/dashboard/stats?_t=1750666411648 HTTP/1.1" 200 -
2025-06-23 13:43:31,711,711 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:31] "GET /api/dashboard/activity?limit=15&_t=1750666411649 HTTP/1.1" 200 -
2025-06-23 13:43:36,786,786 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:36] "GET /api/dashboard/stats?_t=1750666416648 HTTP/1.1" 200 -
2025-06-23 13:43:36,831,831 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:36] "GET /api/dashboard/activity?limit=15&_t=1750666416649 HTTP/1.1" 200 -
2025-06-23 13:43:41,673,673 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:41] "GET /api/dashboard/stats?_t=1750666421648 HTTP/1.1" 200 -
2025-06-23 13:43:41,705,705 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:41] "GET /api/dashboard/activity?limit=15&_t=1750666421648 HTTP/1.1" 200 -
2025-06-23 13:43:47,187,187 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:47] "GET /api/dashboard/stats?_t=1750666427159 HTTP/1.1" 200 -
2025-06-23 13:43:47,235,235 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:47] "GET /api/dashboard/activity?limit=15&_t=1750666427159 HTTP/1.1" 200 -
2025-06-23 13:43:52,302,302 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:52] "GET /api/dashboard/stats?_t=1750666432161 HTTP/1.1" 200 -
2025-06-23 13:43:52,332,332 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:52] "GET /api/dashboard/activity?limit=15&_t=1750666432168 HTTP/1.1" 200 -
2025-06-23 13:43:57,194,194 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:57] "GET /api/dashboard/stats?_t=1750666437163 HTTP/1.1" 200 -
2025-06-23 13:43:57,235,235 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:43:57] "GET /api/dashboard/activity?limit=15&_t=1750666437164 HTTP/1.1" 200 -
2025-06-23 13:44:02,291,291 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:02] "GET /api/dashboard/stats?_t=1750666442159 HTTP/1.1" 200 -
2025-06-23 13:44:02,327,327 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:02] "GET /api/dashboard/activity?limit=15&_t=1750666442159 HTTP/1.1" 200 -
2025-06-23 13:44:07,184,184 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:07] "GET /api/dashboard/stats?_t=1750666447165 HTTP/1.1" 200 -
2025-06-23 13:44:07,214,214 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:07] "GET /api/dashboard/activity?limit=15&_t=1750666447165 HTTP/1.1" 200 -
2025-06-23 13:44:12,356,356 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:12] "GET /api/dashboard/stats?_t=1750666452161 HTTP/1.1" 200 -
2025-06-23 13:44:12,382,382 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:12] "GET /api/dashboard/activity?limit=15&_t=1750666452162 HTTP/1.1" 200 -
2025-06-23 13:44:17,202,202 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:17] "GET /api/dashboard/stats?_t=1750666457160 HTTP/1.1" 200 -
2025-06-23 13:44:17,246,246 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:17] "GET /api/dashboard/activity?limit=15&_t=1750666457161 HTTP/1.1" 200 -
2025-06-23 13:44:22,353,353 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:22] "GET /api/dashboard/stats?_t=1750666462161 HTTP/1.1" 200 -
2025-06-23 13:44:22,379,379 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:22] "GET /api/dashboard/activity?limit=15&_t=1750666462161 HTTP/1.1" 200 -
2025-06-23 13:44:27,463,463 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:27] "GET /api/dashboard/stats?_t=1750666467160 HTTP/1.1" 200 -
2025-06-23 13:44:27,504,504 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:27] "GET /api/dashboard/activity?limit=15&_t=1750666467160 HTTP/1.1" 200 -
2025-06-23 13:44:32,192,192 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:32] "GET /api/dashboard/stats?_t=1750666472159 HTTP/1.1" 200 -
2025-06-23 13:44:32,215,215 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:32] "GET /api/dashboard/activity?limit=15&_t=1750666472160 HTTP/1.1" 200 -
2025-06-23 13:44:37,366,366 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:37] "GET /api/dashboard/stats?_t=1750666477161 HTTP/1.1" 200 -
2025-06-23 13:44:37,415,415 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:37] "GET /api/dashboard/activity?limit=15&_t=1750666477161 HTTP/1.1" 200 -
2025-06-23 13:44:42,198,198 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:42] "GET /api/dashboard/stats?_t=1750666482160 HTTP/1.1" 200 -
2025-06-23 13:44:42,247,247 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:44:42] "GET /api/dashboard/activity?limit=15&_t=1750666482160 HTTP/1.1" 200 -
2025-06-23 13:45:23,447,447 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:45:23] "GET /api/dashboard/stats?_t=1750666523205 HTTP/1.1" 200 -
2025-06-23 13:45:23,477,477 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:45:23] "GET /api/dashboard/activity?limit=15&_t=1750666523208 HTTP/1.1" 200 -
2025-06-23 13:46:23,283,283 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:46:23] "GET /api/dashboard/stats?_t=1750666583204 HTTP/1.1" 200 -
2025-06-23 13:46:23,307,307 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:46:23] "GET /api/dashboard/activity?limit=15&_t=1750666583206 HTTP/1.1" 200 -
2025-06-23 13:47:23,440,440 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:47:23] "GET /api/dashboard/stats?_t=1750666643195 HTTP/1.1" 200 -
2025-06-23 13:47:23,504,504 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:47:23] "GET /api/dashboard/activity?limit=15&_t=1750666643196 HTTP/1.1" 200 -
2025-06-23 13:48:23,108,108 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:48:23] "GET /api/dashboard/stats?_t=1750666703070 HTTP/1.1" 200 -
2025-06-23 13:48:23,114,114 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:48:23] "GET /api/dashboard/activity?limit=15&_t=1750666703076 HTTP/1.1" 200 -
2025-06-23 13:49:23,338,338 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:49:23] "GET /api/dashboard/activity?limit=15&_t=1750666763092 HTTP/1.1" 200 -
2025-06-23 13:49:23,340,340 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:49:23] "GET /api/dashboard/stats?_t=1750666763090 HTTP/1.1" 200 -
2025-06-23 13:50:23,196,196 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:50:23] "GET /api/dashboard/stats?_t=1750666823088 HTTP/1.1" 200 -
2025-06-23 13:50:23,200,200 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:50:23] "GET /api/dashboard/activity?limit=15&_t=1750666823096 HTTP/1.1" 200 -
2025-06-23 13:51:23,389,389 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:51:23] "GET /api/dashboard/stats?_t=1750666883091 HTTP/1.1" 200 -
2025-06-23 13:51:23,432,432 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:51:23] "GET /api/dashboard/activity?limit=15&_t=1750666883094 HTTP/1.1" 200 -
2025-06-23 13:52:23,300,300 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:52:23] "GET /api/dashboard/stats?_t=1750666943105 HTTP/1.1" 200 -
2025-06-23 13:52:23,358,358 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:52:23] "GET /api/dashboard/activity?limit=15&_t=1750666943106 HTTP/1.1" 200 -
2025-06-23 13:53:23,346,346 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:53:23] "GET /api/dashboard/stats?_t=1750667003118 HTTP/1.1" 200 -
2025-06-23 13:53:23,374,374 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:53:23] "GET /api/dashboard/activity?limit=15&_t=1750667003122 HTTP/1.1" 200 -
2025-06-23 13:54:23,172,172 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:54:23] "GET /api/dashboard/stats?_t=1750667063084 HTTP/1.1" 200 -
2025-06-23 13:54:23,195,195 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:54:23] "GET /api/dashboard/activity?limit=15&_t=1750667063087 HTTP/1.1" 200 -
2025-06-23 13:55:23,335,335 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:55:23] "GET /api/dashboard/stats?_t=1750667123104 HTTP/1.1" 200 -
2025-06-23 13:55:23,374,374 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:55:23] "GET /api/dashboard/activity?limit=15&_t=1750667123117 HTTP/1.1" 200 -
2025-06-23 13:56:23,336,336 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:56:23] "GET /api/dashboard/stats?_t=1750667183086 HTTP/1.1" 200 -
2025-06-23 13:56:23,379,379 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:56:23] "GET /api/dashboard/activity?limit=15&_t=1750667183088 HTTP/1.1" 200 -
2025-06-23 13:57:23,488,488 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:57:23] "GET /api/dashboard/stats?_t=1750667243180 HTTP/1.1" 200 -
2025-06-23 13:57:23,629,629 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:57:23] "GET /api/dashboard/activity?limit=15&_t=1750667243185 HTTP/1.1" 200 -
2025-06-23 13:58:23,222,222 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:58:23] "GET /api/dashboard/stats?_t=1750667303076 HTTP/1.1" 200 -
2025-06-23 13:58:23,255,255 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:58:23] "GET /api/dashboard/activity?limit=15&_t=1750667303080 HTTP/1.1" 200 -
2025-06-23 13:59:23,361,361 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:59:23] "GET /api/dashboard/stats?_t=1750667363080 HTTP/1.1" 200 -
2025-06-23 13:59:23,386,386 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 13:59:23] "GET /api/dashboard/activity?limit=15&_t=1750667363081 HTTP/1.1" 200 -
2025-06-23 14:00:23,333,333 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:00:23] "GET /api/dashboard/stats?_t=1750667423075 HTTP/1.1" 200 -
2025-06-23 14:00:23,385,385 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:00:23] "GET /api/dashboard/activity?limit=15&_t=1750667423076 HTTP/1.1" 200 -
2025-06-23 14:01:23,516,516 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:01:23] "GET /api/dashboard/stats?_t=1750667483095 HTTP/1.1" 200 -
2025-06-23 14:01:23,567,567 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:01:23] "GET /api/dashboard/activity?limit=15&_t=1750667483099 HTTP/1.1" 200 -
2025-06-23 14:02:14,908,908 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:14] "GET /api/dashboard/stats?_t=1750667534543 HTTP/1.1" 200 -
2025-06-23 14:02:14,952,952 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:14] "GET /api/dashboard/activity?limit=15&_t=1750667534543 HTTP/1.1" 200 -
2025-06-23 14:02:16,567,567 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:16] "GET /api/dashboard/stats?_t=1750667536530 HTTP/1.1" 200 -
2025-06-23 14:02:16,618,618 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:16] "GET /api/dashboard/activity?limit=15&_t=1750667536531 HTTP/1.1" 200 -
2025-06-23 14:02:17,346,346 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:17] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 14:02:17,379,379 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:17] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 14:02:17,453,453 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:17] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 14:02:17,482,482 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 14:02:17,483,483 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 14:02:17,483,483 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:17] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 14:02:17,510,510 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:17] "GET /api/dashboard/stats?_t=1750667537457 HTTP/1.1" 200 -
2025-06-23 14:02:17,515,515 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:17] "GET /api/dashboard/activity?limit=15&_t=1750667537457 HTTP/1.1" 200 -
2025-06-23 14:02:22,595,595 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:22] "GET /api/dashboard/stats?_t=1750667542460 HTTP/1.1" 200 -
2025-06-23 14:02:22,621,621 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:22] "GET /api/dashboard/activity?limit=15&_t=1750667542461 HTTP/1.1" 200 -
2025-06-23 14:02:25,484,484 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:25] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 14:02:25,527,527 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:25] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 14:02:25,565,565 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:25] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 14:02:25,613,613 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 14:02:25,614,614 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 14:02:25,614,614 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:25] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 14:02:25,634,634 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:25] "GET /api/dashboard/stats?_t=1750667545593 HTTP/1.1" 200 -
2025-06-23 14:02:25,662,662 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:25] "GET /api/dashboard/activity?limit=15&_t=1750667545593 HTTP/1.1" 200 -
2025-06-23 14:02:30,738,738 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:30] "GET /api/dashboard/stats?_t=1750667550595 HTTP/1.1" 200 -
2025-06-23 14:02:30,745,745 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:30] "GET /api/dashboard/activity?limit=15&_t=1750667550596 HTTP/1.1" 200 -
2025-06-23 14:02:35,742,742 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:35] "GET /api/dashboard/stats?_t=1750667555594 HTTP/1.1" 200 -
2025-06-23 14:02:35,781,781 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:35] "GET /api/dashboard/activity?limit=15&_t=1750667555594 HTTP/1.1" 200 -
2025-06-23 14:02:40,730,730 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:40] "GET /api/dashboard/stats?_t=1750667560594 HTTP/1.1" 200 -
2025-06-23 14:02:40,757,757 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:40] "GET /api/dashboard/activity?limit=15&_t=1750667560595 HTTP/1.1" 200 -
2025-06-23 14:02:45,738,738 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:45] "GET /api/dashboard/stats?_t=1750667565594 HTTP/1.1" 200 -
2025-06-23 14:02:45,770,770 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:45] "GET /api/dashboard/activity?limit=15&_t=1750667565595 HTTP/1.1" 200 -
2025-06-23 14:02:50,722,722 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:50] "GET /api/dashboard/stats?_t=1750667570593 HTTP/1.1" 200 -
2025-06-23 14:02:50,757,757 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:50] "GET /api/dashboard/activity?limit=15&_t=1750667570593 HTTP/1.1" 200 -
2025-06-23 14:02:55,737,737 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:55] "GET /api/dashboard/stats?_t=1750667575593 HTTP/1.1" 200 -
2025-06-23 14:02:55,770,770 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:02:55] "GET /api/dashboard/activity?limit=15&_t=1750667575594 HTTP/1.1" 200 -
2025-06-23 14:03:00,748,748 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:00] "GET /api/dashboard/stats?_t=1750667580593 HTTP/1.1" 200 -
2025-06-23 14:03:00,778,778 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:00] "GET /api/dashboard/activity?limit=15&_t=1750667580593 HTTP/1.1" 200 -
2025-06-23 14:03:05,719,719 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:05] "GET /api/dashboard/stats?_t=1750667585593 HTTP/1.1" 200 -
2025-06-23 14:03:05,738,738 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:05] "GET /api/dashboard/activity?limit=15&_t=1750667585593 HTTP/1.1" 200 -
2025-06-23 14:03:10,742,742 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:10] "GET /api/dashboard/stats?_t=1750667590594 HTTP/1.1" 200 -
2025-06-23 14:03:10,789,789 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:10] "GET /api/dashboard/activity?limit=15&_t=1750667590595 HTTP/1.1" 200 -
2025-06-23 14:03:15,732,732 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:15] "GET /api/dashboard/stats?_t=1750667595593 HTTP/1.1" 200 -
2025-06-23 14:03:15,777,777 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:15] "GET /api/dashboard/activity?limit=15&_t=1750667595594 HTTP/1.1" 200 -
2025-06-23 14:03:20,744,744 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:20] "GET /api/dashboard/stats?_t=1750667600594 HTTP/1.1" 200 -
2025-06-23 14:03:20,760,760 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:20] "GET /api/dashboard/activity?limit=15&_t=1750667600595 HTTP/1.1" 200 -
2025-06-23 14:03:25,728,728 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:25] "GET /api/dashboard/stats?_t=1750667605593 HTTP/1.1" 200 -
2025-06-23 14:03:25,751,751 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:25] "GET /api/dashboard/activity?limit=15&_t=1750667605594 HTTP/1.1" 200 -
2025-06-23 14:03:30,317,317 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:30] "GET /api/dashboard/stats?_t=1750667610127 HTTP/1.1" 200 -
2025-06-23 14:03:30,370,370 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:30] "GET /api/dashboard/activity?limit=15&_t=1750667610127 HTTP/1.1" 200 -
2025-06-23 14:03:30,647,647 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:30] "GET /api/dashboard/stats?_t=1750667610592 HTTP/1.1" 200 -
2025-06-23 14:03:30,678,678 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:30] "GET /api/dashboard/activity?limit=15&_t=1750667610592 HTTP/1.1" 200 -
2025-06-23 14:03:40,285,285 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:40] "GET /api/dashboard/stats?_t=1750667620172 HTTP/1.1" 200 -
2025-06-23 14:03:40,350,350 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:40] "GET /api/dashboard/activity?limit=15&_t=1750667620172 HTTP/1.1" 200 -
2025-06-23 14:03:48,522,522 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:48] "GET /api/dashboard/stats?_t=1750667628484 HTTP/1.1" 200 -
2025-06-23 14:03:48,566,566 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:48] "GET /api/dashboard/activity?limit=15&_t=1750667628484 HTTP/1.1" 200 -
2025-06-23 14:03:50,936,936 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:03:50] "GET /debug/database_state HTTP/1.1" 200 -
2025-06-23 14:05:29,823,823 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 14:05:29,826,826 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:05:29] "GET / HTTP/1.1" 200 -
2025-06-23 14:05:29,872,872 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:05:29] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 14:05:29,977,977 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:05:29] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 14:05:30,039,039 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 14:05:30,040,040 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 14:05:30,040,040 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:05:30] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 14:05:36,937,937 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23 14:05:36.937031
2025-06-23 14:05:36,937,937 - __main__ - INFO - Request from user: 10.80.74.49
2025-06-23 14:05:36,938,938 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23T14:05:36.937031
2025-06-23 14:05:36,938,938 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 14:05:36,938,938 - utils.template_processor - INFO - Attempting to load template: page_templates/s_out.json
2025-06-23 14:05:36,939,939 - utils.template_processor - INFO - Successfully loaded template: s_out.json
2025-06-23 14:05:36,939,939 - __main__ - INFO - Successfully loaded template: s_out.json
2025-06-23 14:05:36,939,939 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-23 14:05:36,939,939 - __main__ - INFO -    operation_type: s_out
2025-06-23 14:05:36,939,939 - __main__ - INFO -    template_file: s_out.json
2025-06-23 14:05:36,939,939 - __main__ - INFO -    operation_date: 20250623
2025-06-23 14:05:36,940,940 - __main__ - INFO -    display_date: 23 June 2025
2025-06-23 14:05:36,940,940 - __main__ - INFO -    source: api_request
2025-06-23 14:05:36,940,940 - __main__ - INFO -    template_data present: True
2025-06-23 14:05:36,940,940 - __main__ - INFO - Starting AI agent processing
2025-06-23 14:05:36,940,940 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.80.74.49, input: {'llm_prompt': 's out for today', 'template_file': 's_out.json', 'operation_type': 's_out', 'operation_date': '20250623', 'display_date': '23 June 2025', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-23 14:05:37,033,033 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-23 14:05:37,036,036 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-23 14:05:37,039,039 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-23 14:05:45,127,127 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate S-OUT operation document (confidence: 0.98) in 8.19s
2025-06-23 14:05:45,128,128 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate S-OUT operation document
2025-06-23 14:05:45,129,129 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-23 14:05:52,836,836 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 7.71s
2025-06-23 14:05:52,837,837 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 14:05:52,839,839 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-23 14:05:52,840,840 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-23 14:05:52,840,840 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_OUT page for space SCP...
2025-06-23 14:05:52,840,840 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_out, template_data={'title': 'SCP vShop_ingestion_20250623_140552_83782', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-23 14:05:52.840699
2025-06-23 14:06:06,560,560 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-23 14:06:06,570,570 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250623_140552_83782
2025-06-23 14:06:06,574,574 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250623_140552_83782_140606_503
2025-06-23 14:06:06,574,574 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 14292 characters
2025-06-23 14:06:06,575,575 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250623_140552_83782_140606_503, space: SCP, parent ID: 5890230619 in 13.74s
2025-06-23 14:06:06,577,577 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 14:06:06,577,577 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 14:06:06,577,577 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250623_140552_83782_140606_503' in space 'SCP'
2025-06-23 14:06:06,577,577 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250623_140552_83782_140606_503"
2025-06-23 14:06:08,357,357 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5914049876, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250623_140552_83782_140606_503
2025-06-23 14:06:08,375,375 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 31.44s
2025-06-23 14:06:08,378,378 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 14:06:08,378,378 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-23 14:06:08,384,384 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 270, in generate_confluence
    ai_agent.memory.store_page_creation(**page_creation_data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-23 14:06:08,384,384 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 31.44s
2025-06-23 14:06:08,384,384 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 14:06:08,385,385 - __main__ - INFO - ğŸ“Š Generation completed in 31.45s
2025-06-23 14:06:08,385,385 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:06:08] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-23 14:07:14,052,052 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:14] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 14:07:14,086,086 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:14] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 14:07:14,219,219 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:14] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 14:07:14,271,271 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 14:07:14,292,292 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 14:07:14,293,293 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:14] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 14:07:14,313,313 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:14] "GET /api/dashboard/stats?_t=1750667834223 HTTP/1.1" 200 -
2025-06-23 14:07:14,331,331 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:14] "GET /api/dashboard/activity?limit=15&_t=1750667834223 HTTP/1.1" 200 -
2025-06-23 14:07:19,327,327 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:19] "GET /api/dashboard/stats?_t=1750667839224 HTTP/1.1" 200 -
2025-06-23 14:07:19,351,351 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:19] "GET /api/dashboard/activity?limit=15&_t=1750667839225 HTTP/1.1" 200 -
2025-06-23 14:07:24,315,315 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:24] "GET /api/dashboard/stats?_t=1750667844224 HTTP/1.1" 200 -
2025-06-23 14:07:24,342,342 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:24] "GET /api/dashboard/activity?limit=15&_t=1750667844224 HTTP/1.1" 200 -
2025-06-23 14:07:29,357,357 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:29] "GET /api/dashboard/stats?_t=1750667849225 HTTP/1.1" 200 -
2025-06-23 14:07:29,385,385 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:29] "GET /api/dashboard/activity?limit=15&_t=1750667849225 HTTP/1.1" 200 -
2025-06-23 14:07:34,316,316 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:34] "GET /api/dashboard/stats?_t=1750667854226 HTTP/1.1" 200 -
2025-06-23 14:07:34,317,317 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:34] "GET /api/dashboard/activity?limit=15&_t=1750667854230 HTTP/1.1" 200 -
2025-06-23 14:07:39,295,295 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:39] "GET /api/dashboard/stats?_t=1750667859224 HTTP/1.1" 200 -
2025-06-23 14:07:39,331,331 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:39] "GET /api/dashboard/activity?limit=15&_t=1750667859225 HTTP/1.1" 200 -
2025-06-23 14:07:44,322,322 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:44] "GET /api/dashboard/stats?_t=1750667864225 HTTP/1.1" 200 -
2025-06-23 14:07:44,329,329 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:44] "GET /api/dashboard/activity?limit=15&_t=1750667864225 HTTP/1.1" 200 -
2025-06-23 14:07:49,317,317 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:49] "GET /api/dashboard/stats?_t=1750667869225 HTTP/1.1" 200 -
2025-06-23 14:07:49,323,323 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:49] "GET /api/dashboard/activity?limit=15&_t=1750667869225 HTTP/1.1" 200 -
2025-06-23 14:07:54,317,317 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:54] "GET /api/dashboard/stats?_t=1750667874224 HTTP/1.1" 200 -
2025-06-23 14:07:54,347,347 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:54] "GET /api/dashboard/activity?limit=15&_t=1750667874224 HTTP/1.1" 200 -
2025-06-23 14:07:59,333,333 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:59] "GET /api/dashboard/stats?_t=1750667879223 HTTP/1.1" 200 -
2025-06-23 14:07:59,369,369 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:07:59] "GET /api/dashboard/activity?limit=15&_t=1750667879223 HTTP/1.1" 200 -
2025-06-23 14:08:04,322,322 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:04] "GET /api/dashboard/stats?_t=1750667884224 HTTP/1.1" 200 -
2025-06-23 14:08:04,357,357 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:04] "GET /api/dashboard/activity?limit=15&_t=1750667884225 HTTP/1.1" 200 -
2025-06-23 14:08:09,316,316 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:09] "GET /api/dashboard/stats?_t=1750667889224 HTTP/1.1" 200 -
2025-06-23 14:08:09,334,334 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:09] "GET /api/dashboard/activity?limit=15&_t=1750667889224 HTTP/1.1" 200 -
2025-06-23 14:08:15,160,160 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:15] "GET /api/dashboard/stats?_t=1750667895037 HTTP/1.1" 200 -
2025-06-23 14:08:15,195,195 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:15] "GET /api/dashboard/activity?limit=15&_t=1750667895038 HTTP/1.1" 200 -
2025-06-23 14:08:20,137,137 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:20] "GET /api/dashboard/stats?_t=1750667900039 HTTP/1.1" 200 -
2025-06-23 14:08:20,178,178 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:20] "GET /api/dashboard/activity?limit=15&_t=1750667900040 HTTP/1.1" 200 -
2025-06-23 14:08:25,302,302 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:25] "GET /api/dashboard/stats?_t=1750667905037 HTTP/1.1" 200 -
2025-06-23 14:08:25,346,346 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:25] "GET /api/dashboard/activity?limit=15&_t=1750667905039 HTTP/1.1" 200 -
2025-06-23 14:08:30,121,121 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:30] "GET /api/dashboard/stats?_t=1750667910043 HTTP/1.1" 200 -
2025-06-23 14:08:30,143,143 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:30] "GET /api/dashboard/activity?limit=15&_t=1750667910044 HTTP/1.1" 200 -
2025-06-23 14:08:35,077,077 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:35] "GET /api/dashboard/stats?_t=1750667915034 HTTP/1.1" 200 -
2025-06-23 14:08:35,097,097 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:35] "GET /api/dashboard/activity?limit=15&_t=1750667915034 HTTP/1.1" 200 -
2025-06-23 14:08:40,097,097 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:40] "GET /api/dashboard/stats?_t=1750667920037 HTTP/1.1" 200 -
2025-06-23 14:08:40,134,134 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:40] "GET /api/dashboard/activity?limit=15&_t=1750667920039 HTTP/1.1" 200 -
2025-06-23 14:08:45,058,058 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:45] "GET /api/dashboard/stats?_t=1750667925036 HTTP/1.1" 200 -
2025-06-23 14:08:45,083,083 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:45] "GET /api/dashboard/activity?limit=15&_t=1750667925037 HTTP/1.1" 200 -
2025-06-23 14:08:50,221,221 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:50] "GET /api/dashboard/stats?_t=1750667930035 HTTP/1.1" 200 -
2025-06-23 14:08:50,252,252 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:50] "GET /api/dashboard/activity?limit=15&_t=1750667930037 HTTP/1.1" 200 -
2025-06-23 14:08:55,130,130 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:55] "GET /api/dashboard/stats?_t=1750667935035 HTTP/1.1" 200 -
2025-06-23 14:08:55,172,172 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:08:55] "GET /api/dashboard/activity?limit=15&_t=1750667935036 HTTP/1.1" 200 -
2025-06-23 14:09:00,134,134 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:09:00] "GET /api/dashboard/stats?_t=1750667940035 HTTP/1.1" 200 -
2025-06-23 14:09:00,161,161 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:09:00] "GET /api/dashboard/activity?limit=15&_t=1750667940036 HTTP/1.1" 200 -
2025-06-23 14:09:05,108,108 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:09:05] "GET /api/dashboard/stats?_t=1750667945035 HTTP/1.1" 200 -
2025-06-23 14:09:05,125,125 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:09:05] "GET /api/dashboard/activity?limit=15&_t=1750667945035 HTTP/1.1" 200 -
2025-06-23 14:09:10,243,243 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:09:10] "GET /api/dashboard/stats?_t=1750667950034 HTTP/1.1" 200 -
2025-06-23 14:09:10,272,272 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:09:10] "GET /api/dashboard/activity?limit=15&_t=1750667950035 HTTP/1.1" 200 -
2025-06-23 14:09:23,147,147 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:09:23] "GET /api/dashboard/stats?_t=1750667963040 HTTP/1.1" 200 -
2025-06-23 14:09:23,190,190 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:09:23] "GET /api/dashboard/activity?limit=15&_t=1750667963040 HTTP/1.1" 200 -
2025-06-23 14:10:23,364,364 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:10:23] "GET /api/dashboard/stats?_t=1750668023073 HTTP/1.1" 200 -
2025-06-23 14:10:23,422,422 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:10:23] "GET /api/dashboard/activity?limit=15&_t=1750668023073 HTTP/1.1" 200 -
2025-06-23 14:11:23,213,213 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:11:23] "GET /api/dashboard/stats?_t=1750668083077 HTTP/1.1" 200 -
2025-06-23 14:11:23,238,238 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:11:23] "GET /api/dashboard/activity?limit=15&_t=1750668083079 HTTP/1.1" 200 -
2025-06-23 14:12:23,387,387 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:12:23] "GET /api/dashboard/stats?_t=1750668143219 HTTP/1.1" 200 -
2025-06-23 14:12:23,389,389 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:12:23] "GET /api/dashboard/activity?limit=15&_t=1750668143241 HTTP/1.1" 200 -
2025-06-23 14:13:23,253,253 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:13:23] "GET /api/dashboard/stats?_t=1750668203232 HTTP/1.1" 200 -
2025-06-23 14:13:23,299,299 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:13:23] "GET /api/dashboard/activity?limit=15&_t=1750668203234 HTTP/1.1" 200 -
2025-06-23 14:14:23,166,166 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:14:23] "GET /api/dashboard/stats?_t=1750668263127 HTTP/1.1" 200 -
2025-06-23 14:14:23,213,213 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:14:23] "GET /api/dashboard/activity?limit=15&_t=1750668263130 HTTP/1.1" 200 -
2025-06-23 14:15:23,268,268 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:15:23] "GET /api/dashboard/stats?_t=1750668323094 HTTP/1.1" 200 -
2025-06-23 14:15:23,292,292 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:15:23] "GET /api/dashboard/activity?limit=15&_t=1750668323096 HTTP/1.1" 200 -
2025-06-23 14:16:23,251,251 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:16:23] "GET /api/dashboard/stats?_t=1750668383060 HTTP/1.1" 200 -
2025-06-23 14:16:23,300,300 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:16:23] "GET /api/dashboard/activity?limit=15&_t=1750668383061 HTTP/1.1" 200 -
2025-06-23 14:16:35,023,023 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 14:16:37,178,178 - werkzeug - INFO -  * Restarting with stat
2025-06-23 14:16:37,979,979 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 14:16:37,979,979 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 14:16:37,980,980 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 14:16:37,982,982 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 14:16:37,983,983 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 14:16:37,983,983 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 14:16:37,983,983 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 14:16:37,983,983 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 14:16:37,984,984 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 14:16:37,990,990 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 14:16:37,991,991 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 14:16:37,991,991 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 14:16:37,991,991 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 14:16:37,991,991 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 14:16:38,033,033 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 14:16:38,051,051 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 14:17:23,209,209 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:17:23] "GET /api/dashboard/stats?_t=1750668443117 HTTP/1.1" 200 -
2025-06-23 14:17:23,238,238 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:17:23] "GET /api/dashboard/activity?limit=15&_t=1750668443120 HTTP/1.1" 200 -
2025-06-23 14:18:23,347,347 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:18:23] "GET /api/dashboard/stats?_t=1750668503186 HTTP/1.1" 200 -
2025-06-23 14:18:23,350,350 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:18:23] "GET /api/dashboard/activity?limit=15&_t=1750668503189 HTTP/1.1" 200 -
2025-06-23 14:19:23,338,338 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:19:23] "GET /api/dashboard/stats?_t=1750668563162 HTTP/1.1" 200 -
2025-06-23 14:19:23,368,368 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:19:23] "GET /api/dashboard/activity?limit=15&_t=1750668563163 HTTP/1.1" 200 -
2025-06-23 14:20:23,271,271 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:20:23] "GET /api/dashboard/stats?_t=1750668623133 HTTP/1.1" 200 -
2025-06-23 14:20:23,297,297 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 14:20:23] "GET /api/dashboard/activity?limit=15&_t=1750668623134 HTTP/1.1" 200 -
2025-06-23 14:20:53,778,778 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-23 14:20:54,144,144 - werkzeug - INFO -  * Restarting with stat
2025-06-23 14:20:54,309,309 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 14:20:54,310,310 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 15:22:54,515,515 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 15:22:54,516,516 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 15:22:54,521,521 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 15:22:54,522,522 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 15:22:54,522,522 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 15:22:54,523,523 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 15:22:54,523,523 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 15:22:54,523,523 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 15:22:54,523,523 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 15:22:54,524,524 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 15:22:54,525,525 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 15:22:54,525,525 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 15:22:54,525,525 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 15:22:54,525,525 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 15:22:55,225,225 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.74.49:5000
2025-06-23 15:22:55,225,225 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 15:22:55,227,227 - werkzeug - INFO -  * Restarting with stat
2025-06-23 15:22:55,751,751 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 15:22:55,751,751 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 15:22:55,752,752 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 15:22:55,754,754 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 15:22:55,754,754 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 15:22:55,755,755 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 15:22:55,755,755 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 15:22:55,755,755 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 15:22:55,755,755 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 15:22:55,756,756 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 15:22:55,757,757 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 15:22:55,757,757 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 15:22:55,757,757 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 15:22:55,757,757 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 15:22:55,788,788 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 15:22:55,809,809 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 15:22:58,173,173 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:22:58,183,183 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:22:58] "GET / HTTP/1.1" 200 -
2025-06-23 15:22:58,184,184 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:22:58] "GET /api/dashboard/activity?limit=15&_t=1750672343120 HTTP/1.1" 200 -
2025-06-23 15:22:58,185,185 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:22:58] "GET /api/dashboard/stats?_t=1750672343116 HTTP/1.1" 200 -
2025-06-23 15:22:58,308,308 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:22:58] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 15:22:58,346,346 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:22:58] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 15:22:58,399,399 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:22:58,400,400 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:22:58,401,401 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:22:58] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:23:01,224,224 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:01] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 15:23:01,245,245 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:01] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 15:23:01,281,281 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:01] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 15:23:01,328,328 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:23:01,329,329 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:23:01,329,329 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:01] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:23:01,334,334 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:01] "GET /api/dashboard/stats?_t=1750672381297 HTTP/1.1" 200 -
2025-06-23 15:23:01,423,423 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:01] "GET /api/dashboard/activity?limit=15&_t=1750672381297 HTTP/1.1" 200 -
2025-06-23 15:23:06,340,340 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:06] "GET /api/dashboard/stats?_t=1750672386299 HTTP/1.1" 200 -
2025-06-23 15:23:06,368,368 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:06] "GET /api/dashboard/activity?limit=15&_t=1750672386300 HTTP/1.1" 200 -
2025-06-23 15:23:11,317,317 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:11] "GET /api/dashboard/stats?_t=1750672391298 HTTP/1.1" 200 -
2025-06-23 15:23:11,348,348 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:11] "GET /api/dashboard/activity?limit=15&_t=1750672391299 HTTP/1.1" 200 -
2025-06-23 15:23:20,959,959 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:20] "GET /debug/clear_old_data HTTP/1.1" 200 -
2025-06-23 15:23:22,374,374 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:22] "GET /api/dashboard/stats?_t=1750672402345 HTTP/1.1" 200 -
2025-06-23 15:23:22,401,401 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:22] "GET /api/dashboard/activity?limit=15&_t=1750672402346 HTTP/1.1" 200 -
2025-06-23 15:23:23,220,220 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:23] "GET /api/dashboard/stats?_t=1750672403110 HTTP/1.1" 200 -
2025-06-23 15:23:23,241,241 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:23] "GET /api/dashboard/activity?limit=15&_t=1750672403186 HTTP/1.1" 200 -
2025-06-23 15:23:26,326,326 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:26] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 15:23:26,343,343 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:26] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 15:23:26,383,383 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:26] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 15:23:26,428,428 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:23:26,429,429 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:23:26,429,429 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:26] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:23:26,443,443 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:26] "GET /api/dashboard/stats?_t=1750672406385 HTTP/1.1" 200 -
2025-06-23 15:23:26,466,466 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:26] "GET /api/dashboard/activity?limit=15&_t=1750672406385 HTTP/1.1" 200 -
2025-06-23 15:23:31,410,410 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:31] "GET /api/dashboard/stats?_t=1750672411386 HTTP/1.1" 200 -
2025-06-23 15:23:31,446,446 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:31] "GET /api/dashboard/activity?limit=15&_t=1750672411386 HTTP/1.1" 200 -
2025-06-23 15:23:34,194,194 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:34] "GET /debug/reset_dashboard_completely HTTP/1.1" 200 -
2025-06-23 15:23:35,116,116 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:35] "GET /api/dashboard/stats?_t=1750672415082 HTTP/1.1" 200 -
2025-06-23 15:23:35,140,140 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:35] "GET /api/dashboard/activity?limit=15&_t=1750672415082 HTTP/1.1" 200 -
2025-06-23 15:23:36,437,437 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:36] "GET /api/dashboard/stats?_t=1750672416385 HTTP/1.1" 200 -
2025-06-23 15:23:36,474,474 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:36] "GET /api/dashboard/activity?limit=15&_t=1750672416385 HTTP/1.1" 200 -
2025-06-23 15:23:38,779,779 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:38] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 15:23:38,803,803 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:38] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 15:23:38,836,836 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:38] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 15:23:38,862,862 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:23:38,864,864 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:23:38,865,865 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:38] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:23:38,886,886 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:38] "GET /api/dashboard/stats?_t=1750672418838 HTTP/1.1" 200 -
2025-06-23 15:23:38,913,913 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:38] "GET /api/dashboard/activity?limit=15&_t=1750672418838 HTTP/1.1" 200 -
2025-06-23 15:23:43,853,853 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:43] "GET /api/dashboard/stats?_t=1750672423839 HTTP/1.1" 200 -
2025-06-23 15:23:43,856,856 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:43] "GET /api/dashboard/activity?limit=15&_t=1750672423839 HTTP/1.1" 200 -
2025-06-23 15:23:45,124,124 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:23:45,125,125 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:45] "GET / HTTP/1.1" 200 -
2025-06-23 15:23:45,141,141 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:45] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 15:23:45,176,176 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:45] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 15:23:45,214,214 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:23:45,214,214 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:23:45,214,214 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:23:45] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:23:51,197,197 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23 15:23:51.197209
2025-06-23 15:23:51,198,198 - __main__ - INFO - Request from user: 10.80.74.49
2025-06-23 15:23:51,198,198 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23T15:23:51.197209
2025-06-23 15:23:51,198,198 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 15:23:51,199,199 - utils.template_processor - INFO - Attempting to load template: page_templates/s_out.json
2025-06-23 15:23:51,200,200 - utils.template_processor - INFO - Successfully loaded template: s_out.json
2025-06-23 15:23:51,201,201 - __main__ - INFO - Successfully loaded template: s_out.json
2025-06-23 15:23:51,201,201 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-23 15:23:51,201,201 - __main__ - INFO -    operation_type: s_out
2025-06-23 15:23:51,202,202 - __main__ - INFO -    template_file: s_out.json
2025-06-23 15:23:51,202,202 - __main__ - INFO -    operation_date: 20250623
2025-06-23 15:23:51,202,202 - __main__ - INFO -    display_date: 23 June 2025
2025-06-23 15:23:51,202,202 - __main__ - INFO -    source: api_request
2025-06-23 15:23:51,202,202 - __main__ - INFO -    template_data present: True
2025-06-23 15:23:51,203,203 - __main__ - INFO - Starting AI agent processing
2025-06-23 15:23:51,203,203 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.80.74.49, input: {'llm_prompt': 's out for today', 'template_file': 's_out.json', 'operation_type': 's_out', 'operation_date': '20250623', 'display_date': '23 June 2025', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-23 15:23:51,265,265 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-23 15:23:51,270,270 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-23 15:23:51,271,271 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-23 15:23:57,702,702 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate S-OUT operation document (confidence: 0.98) in 6.50s
2025-06-23 15:23:57,703,703 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate S-OUT operation document
2025-06-23 15:23:57,705,705 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-23 15:24:05,926,926 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 8.22s
2025-06-23 15:24:05,927,927 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 15:24:05,930,930 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-23 15:24:05,930,930 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-23 15:24:05,931,931 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_OUT page for space SCP...
2025-06-23 15:24:05,931,931 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_out, template_data={'title': 'SCP vShop_ingestion_20250623_152405_92932', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-23 15:24:05.931217
2025-06-23 15:24:19,822,822 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-23 15:24:19,830,830 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250623_152405_92932
2025-06-23 15:24:19,831,831 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250623_152405_92932_152419_186
2025-06-23 15:24:19,831,831 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 14132 characters
2025-06-23 15:24:19,833,833 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250623_152405_92932_152419_186, space: SCP, parent ID: 5890230619 in 13.91s
2025-06-23 15:24:19,833,833 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 15:24:19,834,834 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 15:24:19,834,834 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250623_152405_92932_152419_186' in space 'SCP'
2025-06-23 15:24:19,834,834 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250623_152405_92932_152419_186"
2025-06-23 15:24:21,723,723 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5914052805, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250623_152405_92932_152419_186
2025-06-23 15:24:21,728,728 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 30.53s
2025-06-23 15:24:21,730,730 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 15:24:21,730,730 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-23 15:24:21,732,732 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 250, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-23 15:24:21,732,732 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 30.53s
2025-06-23 15:24:21,732,732 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 15:24:21,732,732 - __main__ - INFO - ğŸ“Š Generation completed in 30.54s
2025-06-23 15:24:21,733,733 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:24:21] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-23 15:24:23,163,163 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:24:23] "GET /api/dashboard/stats?_t=1750672463129 HTTP/1.1" 200 -
2025-06-23 15:24:23,183,183 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:24:23] "GET /api/dashboard/activity?limit=15&_t=1750672463137 HTTP/1.1" 200 -
2025-06-23 15:25:23,143,143 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:25:23] "GET /api/dashboard/stats?_t=1750672523108 HTTP/1.1" 200 -
2025-06-23 15:25:23,175,175 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:25:23] "GET /api/dashboard/activity?limit=15&_t=1750672523109 HTTP/1.1" 200 -
2025-06-23 15:26:23,182,182 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:26:23] "GET /api/dashboard/stats?_t=1750672583118 HTTP/1.1" 200 -
2025-06-23 15:26:23,223,223 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:26:23] "GET /api/dashboard/activity?limit=15&_t=1750672583126 HTTP/1.1" 200 -
2025-06-23 15:27:23,144,144 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:27:23] "GET /api/dashboard/stats?_t=1750672643098 HTTP/1.1" 200 -
2025-06-23 15:27:23,165,165 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:27:23] "GET /api/dashboard/activity?limit=15&_t=1750672643099 HTTP/1.1" 200 -
2025-06-23 15:28:23,121,121 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:28:23] "GET /api/dashboard/stats?_t=1750672703100 HTTP/1.1" 200 -
2025-06-23 15:28:23,155,155 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:28:23] "GET /api/dashboard/activity?limit=15&_t=1750672703101 HTTP/1.1" 200 -
2025-06-23 15:29:23,153,153 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:29:23] "GET /api/dashboard/stats?_t=1750672763098 HTTP/1.1" 200 -
2025-06-23 15:29:23,160,160 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:29:23] "GET /api/dashboard/activity?limit=15&_t=1750672763100 HTTP/1.1" 200 -
2025-06-23 15:30:23,121,121 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:30:23] "GET /api/dashboard/stats?_t=1750672823088 HTTP/1.1" 200 -
2025-06-23 15:30:23,132,132 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:30:23] "GET /api/dashboard/activity?limit=15&_t=1750672823088 HTTP/1.1" 200 -
2025-06-23 15:46:24,498,498 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:46:24] "GET /api/dashboard/stats?_t=1750673784302 HTTP/1.1" 200 -
2025-06-23 15:46:24,541,541 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:46:24] "GET /api/dashboard/activity?limit=15&_t=1750673784349 HTTP/1.1" 200 -
2025-06-23 15:47:23,384,384 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:23] "GET /api/dashboard/stats?_t=1750673843208 HTTP/1.1" 200 -
2025-06-23 15:47:23,392,392 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:23] "GET /api/dashboard/activity?limit=15&_t=1750673843211 HTTP/1.1" 200 -
2025-06-23 15:47:26,357,357 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:26] "GET /feedback HTTP/1.1" 200 -
2025-06-23 15:47:26,415,415 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:26] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 15:47:26,657,657 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:26] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 15:47:27,190,190 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:47:27,191,191 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:47:27,191,191 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:27] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:47:27,328,328 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:27] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-23 15:47:27,371,371 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:27] "GET /api/feedback/recent?limit=5 HTTP/1.1" 200 -
2025-06-23 15:47:32,584,584 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:47:32,585,585 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:47:32,586,586 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:32] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:47:48,093,093 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:48] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 15:47:48,148,148 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:48] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 15:47:48,236,236 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:48] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 15:47:48,276,276 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:47:48,277,277 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:47:48,278,278 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:48] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:47:48,316,316 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:48] "GET /api/dashboard/stats?_t=1750673868240 HTTP/1.1" 200 -
2025-06-23 15:47:48,368,368 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:48] "GET /api/dashboard/activity?limit=15&_t=1750673868240 HTTP/1.1" 200 -
2025-06-23 15:47:53,303,303 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:53] "GET /api/dashboard/stats?_t=1750673873242 HTTP/1.1" 200 -
2025-06-23 15:47:53,340,340 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:53] "GET /api/dashboard/activity?limit=15&_t=1750673873243 HTTP/1.1" 200 -
2025-06-23 15:47:58,344,344 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:58] "GET /api/dashboard/stats?_t=1750673878243 HTTP/1.1" 200 -
2025-06-23 15:47:58,386,386 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:47:58] "GET /api/dashboard/activity?limit=15&_t=1750673878243 HTTP/1.1" 200 -
2025-06-23 15:48:03,357,357 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:03] "GET /api/dashboard/stats?_t=1750673883241 HTTP/1.1" 200 -
2025-06-23 15:48:03,406,406 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:03] "GET /api/dashboard/activity?limit=15&_t=1750673883242 HTTP/1.1" 200 -
2025-06-23 15:48:08,126,126 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:08] "GET /api/dashboard/stats?_t=1750673888097 HTTP/1.1" 200 -
2025-06-23 15:48:08,156,156 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:08] "GET /api/dashboard/activity?limit=15&_t=1750673888098 HTTP/1.1" 200 -
2025-06-23 15:48:08,307,307 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:08] "GET /api/dashboard/stats?_t=1750673888242 HTTP/1.1" 200 -
2025-06-23 15:48:08,341,341 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:08] "GET /api/dashboard/activity?limit=15&_t=1750673888242 HTTP/1.1" 200 -
2025-06-23 15:48:13,269,269 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:13] "GET /api/dashboard/stats?_t=1750673893242 HTTP/1.1" 200 -
2025-06-23 15:48:13,293,293 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:13] "GET /api/dashboard/activity?limit=15&_t=1750673893242 HTTP/1.1" 200 -
2025-06-23 15:48:19,138,138 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:19] "GET /api/dashboard/stats?_t=1750673899112 HTTP/1.1" 200 -
2025-06-23 15:48:19,170,170 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:19] "GET /api/dashboard/activity?limit=15&_t=1750673899113 HTTP/1.1" 200 -
2025-06-23 15:48:23,171,171 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:23] "GET /api/dashboard/stats?_t=1750673903137 HTTP/1.1" 200 -
2025-06-23 15:48:23,186,186 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:23] "GET /api/dashboard/activity?limit=15&_t=1750673903143 HTTP/1.1" 200 -
2025-06-23 15:48:24,169,169 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:24] "GET /api/dashboard/stats?_t=1750673904116 HTTP/1.1" 200 -
2025-06-23 15:48:24,207,207 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:24] "GET /api/dashboard/activity?limit=15&_t=1750673904117 HTTP/1.1" 200 -
2025-06-23 15:48:29,277,277 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:29] "GET /api/dashboard/stats?_t=1750673909112 HTTP/1.1" 200 -
2025-06-23 15:48:29,308,308 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:29] "GET /api/dashboard/activity?limit=15&_t=1750673909114 HTTP/1.1" 200 -
2025-06-23 15:48:34,185,185 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:34] "GET /api/dashboard/stats?_t=1750673914111 HTTP/1.1" 200 -
2025-06-23 15:48:34,216,216 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:34] "GET /api/dashboard/activity?limit=15&_t=1750673914111 HTTP/1.1" 200 -
2025-06-23 15:48:39,211,211 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:39] "GET /api/dashboard/stats?_t=1750673919112 HTTP/1.1" 200 -
2025-06-23 15:48:39,257,257 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:39] "GET /api/dashboard/activity?limit=15&_t=1750673919113 HTTP/1.1" 200 -
2025-06-23 15:48:44,213,213 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:44] "GET /api/dashboard/stats?_t=1750673924112 HTTP/1.1" 200 -
2025-06-23 15:48:44,232,232 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:44] "GET /api/dashboard/activity?limit=15&_t=1750673924113 HTTP/1.1" 200 -
2025-06-23 15:48:49,197,197 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:49] "GET /api/dashboard/stats?_t=1750673929112 HTTP/1.1" 200 -
2025-06-23 15:48:49,232,232 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:49] "GET /api/dashboard/activity?limit=15&_t=1750673929113 HTTP/1.1" 200 -
2025-06-23 15:48:54,171,171 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:54] "GET /api/dashboard/stats?_t=1750673934112 HTTP/1.1" 200 -
2025-06-23 15:48:54,185,185 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:54] "GET /api/dashboard/activity?limit=15&_t=1750673934113 HTTP/1.1" 200 -
2025-06-23 15:48:59,253,253 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:59] "GET /api/dashboard/stats?_t=1750673939113 HTTP/1.1" 200 -
2025-06-23 15:48:59,312,312 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:48:59] "GET /api/dashboard/activity?limit=15&_t=1750673939114 HTTP/1.1" 200 -
2025-06-23 15:49:04,268,268 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:04] "GET /api/dashboard/stats?_t=1750673944113 HTTP/1.1" 200 -
2025-06-23 15:49:04,310,310 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:04] "GET /api/dashboard/activity?limit=15&_t=1750673944114 HTTP/1.1" 200 -
2025-06-23 15:49:09,244,244 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:09] "GET /api/dashboard/stats?_t=1750673949126 HTTP/1.1" 200 -
2025-06-23 15:49:09,281,281 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:09] "GET /api/dashboard/activity?limit=15&_t=1750673949128 HTTP/1.1" 200 -
2025-06-23 15:49:14,286,286 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:14] "GET /api/dashboard/stats?_t=1750673954111 HTTP/1.1" 200 -
2025-06-23 15:49:14,329,329 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:14] "GET /api/dashboard/activity?limit=15&_t=1750673954113 HTTP/1.1" 200 -
2025-06-23 15:49:23,269,269 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:23] "GET /api/dashboard/stats?_t=1750673963114 HTTP/1.1" 200 -
2025-06-23 15:49:23,299,299 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:23] "GET /api/dashboard/activity?limit=15&_t=1750673963116 HTTP/1.1" 200 -
2025-06-23 15:49:23,313,313 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:23] "GET /api/dashboard/stats?_t=1750673963186 HTTP/1.1" 200 -
2025-06-23 15:49:23,322,322 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:49:23] "GET /api/dashboard/activity?limit=15&_t=1750673963196 HTTP/1.1" 200 -
2025-06-23 15:50:23,293,293 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:50:23] "GET /api/dashboard/stats?_t=1750674023153 HTTP/1.1" 200 -
2025-06-23 15:50:23,306,306 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:50:23] "GET /api/dashboard/activity?limit=15&_t=1750674023155 HTTP/1.1" 200 -
2025-06-23 15:50:23,318,318 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:50:23] "GET /api/dashboard/stats?_t=1750674023177 HTTP/1.1" 200 -
2025-06-23 15:50:23,357,357 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:50:23] "GET /api/dashboard/activity?limit=15&_t=1750674023179 HTTP/1.1" 200 -
2025-06-23 15:51:23,576,576 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:51:23] "GET /api/dashboard/stats?_t=1750674083252 HTTP/1.1" 200 -
2025-06-23 15:51:23,585,585 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:51:23] "GET /api/dashboard/activity?limit=15&_t=1750674083263 HTTP/1.1" 200 -
2025-06-23 15:51:23,616,616 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:51:23] "GET /api/dashboard/stats?_t=1750674083332 HTTP/1.1" 200 -
2025-06-23 15:51:23,625,625 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:51:23] "GET /api/dashboard/activity?limit=15&_t=1750674083335 HTTP/1.1" 200 -
2025-06-23 15:52:23,851,851 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:23] "GET /api/dashboard/stats?_t=1750674143381 HTTP/1.1" 200 -
2025-06-23 15:52:23,882,882 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:23] "GET /api/dashboard/activity?limit=15&_t=1750674143551 HTTP/1.1" 200 -
2025-06-23 15:52:23,930,930 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:23] "GET /api/dashboard/stats?_t=1750674143381 HTTP/1.1" 200 -
2025-06-23 15:52:23,956,956 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:23] "GET /api/dashboard/activity?limit=15&_t=1750674143551 HTTP/1.1" 200 -
2025-06-23 15:52:27,440,440 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:27] "GET /api/dashboard/stats?_t=1750674147405 HTTP/1.1" 200 -
2025-06-23 15:52:27,466,466 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:27] "GET /api/dashboard/activity?limit=15&_t=1750674147405 HTTP/1.1" 200 -
2025-06-23 15:52:29,145,145 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:29] "GET /api/dashboard/stats?_t=1750674149114 HTTP/1.1" 200 -
2025-06-23 15:52:29,161,161 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:29] "GET /api/dashboard/activity?limit=15&_t=1750674149117 HTTP/1.1" 200 -
2025-06-23 15:52:33,291,291 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:33] "GET /api/dashboard/stats?_t=1750674153241 HTTP/1.1" 200 -
2025-06-23 15:52:33,322,322 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:52:33] "GET /api/dashboard/activity?limit=15&_t=1750674153241 HTTP/1.1" 200 -
2025-06-23 15:52:42,916,916 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23 15:52:42.916170
2025-06-23 15:52:42,919,919 - __main__ - INFO - Request from user: 10.80.74.49
2025-06-23 15:52:42,921,921 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23T15:52:42.916170
2025-06-23 15:52:42,923,923 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 15:52:42,930,930 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-23 15:52:42,931,931 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-23 15:52:42,932,932 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-23 15:52:42,933,933 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-23 15:52:42,933,933 - __main__ - INFO -    operation_type: s_out
2025-06-23 15:52:42,933,933 - __main__ - INFO -    template_file: locker_out.json
2025-06-23 15:52:42,933,933 - __main__ - INFO -    operation_date: 20250623
2025-06-23 15:52:42,933,933 - __main__ - INFO -    display_date: 23 June 2025
2025-06-23 15:52:42,933,933 - __main__ - INFO -    source: api_request
2025-06-23 15:52:42,933,933 - __main__ - INFO -    template_data present: True
2025-06-23 15:52:42,933,933 - __main__ - INFO - Starting AI agent processing
2025-06-23 15:52:42,934,934 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.80.74.49, input: {'llm_prompt': 's out for today', 'template_file': 'locker_out.json', 'operation_type': 's_out', 'operation_date': '20250623', 'display_date': '23 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-23 15:52:42,972,972 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-23 15:52:42,976,976 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-23 15:52:42,983,983 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-23 15:52:47,332,332 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: execute s_out operation for locker 17280M on 2025-06-23 (confidence: 0.98) in 4.40s
2025-06-23 15:52:47,334,334 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: execute s_out operation for locker 17280M on 2025-06-23
2025-06-23 15:52:47,335,335 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-23 15:52:56,689,689 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 9.35s
2025-06-23 15:52:56,692,692 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 15:52:56,694,694 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-23 15:52:56,698,698 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-23 15:52:56,698,698 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_OUT page for space SCP...
2025-06-23 15:52:56,702,702 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_out, template_data={'title': 'Locker_AITest_S-OUT_20250623_155256_69258', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-23 15:52:56.698822
2025-06-23 15:53:11,276,276 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-23 15:53:11,287,287 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250623_155256_69258
2025-06-23 15:53:11,290,290 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250623_155256_69258_155311_857
2025-06-23 15:53:11,291,291 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 20953 characters
2025-06-23 15:53:11,291,291 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250623_155256_69258_155311_857, space: SCP, parent ID: 5890230619 in 14.60s
2025-06-23 15:53:11,291,291 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 15:53:11,292,292 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 15:53:11,292,292 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250623_155256_69258_155311_857' in space 'SCP'
2025-06-23 15:53:11,292,292 - atlassian.confluence - INFO - Creating page "SCP" -> "Locker_AITest_S-OUT_20250623_155256_69258_155311_857"
2025-06-23 15:53:13,992,992 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5914887951, URL=https://confluence.rakuten-it.com/confluence/display/SCP/Locker_AITest_S-OUT_20250623_155256_69258_155311_857
2025-06-23 15:53:13,996,996 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 31.06s
2025-06-23 15:53:13,998,998 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 15:53:13,998,998 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-23 15:53:13,999,999 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 250, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-23 15:53:13,999,999 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 31.08s
2025-06-23 15:53:13,999,999 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 15:53:14,000,000 - __main__ - INFO - ğŸ“Š Generation completed in 31.08s
2025-06-23 15:53:14,000,000 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:14] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-23 15:53:49,672,672 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:49] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 15:53:49,710,710 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:49] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 15:53:49,742,742 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:49] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 15:53:49,791,791 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 15:53:49,792,792 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 15:53:49,792,792 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:49] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 15:53:49,813,813 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:49] "GET /api/dashboard/stats?_t=1750674229745 HTTP/1.1" 200 -
2025-06-23 15:53:49,861,861 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:49] "GET /api/dashboard/activity?limit=15&_t=1750674229745 HTTP/1.1" 200 -
2025-06-23 15:53:54,839,839 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:54] "GET /api/dashboard/stats?_t=1750674234747 HTTP/1.1" 200 -
2025-06-23 15:53:54,878,878 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:54] "GET /api/dashboard/activity?limit=15&_t=1750674234747 HTTP/1.1" 200 -
2025-06-23 15:53:59,819,819 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:59] "GET /api/dashboard/stats?_t=1750674239747 HTTP/1.1" 200 -
2025-06-23 15:53:59,858,858 - werkzeug - INFO - 10.80.74.49 - - [23/Jun/2025 15:53:59] "GET /api/dashboard/activity?limit=15&_t=1750674239748 HTTP/1.1" 200 -
2025-06-23 18:12:27,894,894 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 18:12:27,895,895 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-23 18:12:30,692,692 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 18:12:30,692,692 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 18:12:30,699,699 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 18:12:30,701,701 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 18:12:30,701,701 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 18:12:30,701,701 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 18:12:30,701,701 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 18:12:30,701,701 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 18:12:30,702,702 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 18:12:30,703,703 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 18:12:30,704,704 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 18:12:30,704,704 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 18:12:30,704,704 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 18:12:30,704,704 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 18:12:31,353,353 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.70.29:5000
2025-06-23 18:12:31,353,353 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-23 18:12:31,355,355 - werkzeug - INFO -  * Restarting with stat
2025-06-23 18:12:31,949,949 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-23 18:12:31,949,949 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 18:12:31,950,950 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 18:12:31,951,951 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 18:12:31,951,951 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 18:12:31,951,951 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 18:12:31,951,951 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 18:12:31,951,951 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 18:12:31,952,952 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-23 18:12:31,953,953 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-23 18:12:31,954,954 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 18:12:31,954,954 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 18:12:31,954,954 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 18:12:31,954,954 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-23 18:12:31,982,982 - werkzeug - WARNING -  * Debugger is active!
2025-06-23 18:12:31,998,998 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-23 18:12:34,381,381 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:12:34,391,391 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:12:34] "GET / HTTP/1.1" 200 -
2025-06-23 18:12:34,419,419 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:12:34] "GET /static/css/style.css HTTP/1.1" 200 -
2025-06-23 18:12:34,485,485 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:12:34] "GET /static/js/app.js HTTP/1.1" 200 -
2025-06-23 18:12:35,841,841 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:12:35,842,842 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:12:35,845,845 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:12:35] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:12:36,713,713 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:12:36] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-23 18:13:45,878,878 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:13:45,881,881 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:13:45,881,881 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:13:45] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:13:50,528,528 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:13:50] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 18:13:50,556,556 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:13:50] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:13:50,575,575 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:13:50] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 18:13:50,610,610 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:13:50,611,611 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:13:50,611,611 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:13:50] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:13:50,619,619 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:13:50] "GET /api/dashboard/stats?_t=1750682630581 HTTP/1.1" 200 -
2025-06-23 18:13:50,629,629 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:13:50] "GET /api/dashboard/activity?limit=15&_t=1750682630581 HTTP/1.1" 200 -
2025-06-23 18:14:26,158,158 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:14:26,161,161 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:14:26] "GET / HTTP/1.1" 200 -
2025-06-23 18:14:26,189,189 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:14:26] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:14:26,211,211 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:14:26] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 18:14:26,235,235 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:14:26,235,235 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:14:26,236,236 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:14:26] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:14:40,482,482 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23 18:14:40.482579
2025-06-23 18:14:40,483,483 - __main__ - INFO - Request from user: 10.80.70.29
2025-06-23 18:14:40,483,483 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-23T18:14:40.482579
2025-06-23 18:14:40,484,484 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-23 18:14:40,484,484 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-23 18:14:40,491,491 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-23 18:14:40,503,503 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-23 18:14:40,503,503 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-23 18:14:40,504,504 - __main__ - INFO -    operation_type: locker_out
2025-06-23 18:14:40,504,504 - __main__ - INFO -    template_file: locker_out.json
2025-06-23 18:14:40,504,504 - __main__ - INFO -    operation_date: 20250624
2025-06-23 18:14:40,504,504 - __main__ - INFO -    display_date: 23 June 2025
2025-06-23 18:14:40,504,504 - __main__ - INFO -    source: api_request
2025-06-23 18:14:40,504,504 - __main__ - INFO -    template_data present: True
2025-06-23 18:14:40,504,504 - __main__ - INFO - Starting AI agent processing
2025-06-23 18:14:40,505,505 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.80.70.29, input: {'llm_prompt': 'locker out for tomorrow', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '23 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-23 18:14:40,593,593 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-23 18:14:40,595,595 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-23 18:14:40,603,603 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-23 18:14:45,734,734 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: create_locker_out_document (confidence: 0.98) in 5.23s
2025-06-23 18:14:45,735,735 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: create_locker_out_document
2025-06-23 18:14:45,736,736 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-23 18:14:56,935,935 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 11.20s
2025-06-23 18:14:56,938,938 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-23 18:14:56,939,939 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-23 18:14:56,940,940 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-23 18:14:56,940,940 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-23 18:14:56,941,941 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_181456_93899', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-23 18:14:56.940918
2025-06-23 18:15:12,119,119 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-23 18:15:12,131,131 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_181456_93899
2025-06-23 18:15:12,131,131 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_181456_93899_181512_246
2025-06-23 18:15:12,132,132 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-23 18:15:12,137,137 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_181456_93899_181512_246, space: SCG, parent ID: 5880757738 in 15.20s
2025-06-23 18:15:12,138,138 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-23 18:15:12,139,139 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-23 18:15:12,139,139 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_181456_93899_181512_246' in space 'SCG'
2025-06-23 18:15:12,139,139 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_181456_93899_181512_246"
2025-06-23 18:15:14,174,174 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5914473924, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250624_181456_93899_181512_246
2025-06-23 18:15:14,180,180 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 33.68s
2025-06-23 18:15:14,183,183 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 18:15:14,184,184 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-23 18:15:14,187,187 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 250, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-23 18:15:14,187,187 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 33.70s
2025-06-23 18:15:14,188,188 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-23 18:15:14,188,188 - __main__ - INFO - ğŸ“Š Generation completed in 33.71s
2025-06-23 18:15:14,190,190 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:15:14] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-23 18:18:18,706,706 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:18:18] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 18:18:18,733,733 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:18:18] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:18:18,761,761 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:18:18] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 18:18:18,798,798 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:18:18,799,799 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:18:18,800,800 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:18:18] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:18:18,814,814 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:18:18] "GET /api/dashboard/stats?_t=1750682898765 HTTP/1.1" 200 -
2025-06-23 18:18:18,821,821 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:18:18] "GET /api/dashboard/activity?limit=15&_t=1750682898765 HTTP/1.1" 200 -
2025-06-23 18:19:01,048,048 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:19:01] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:20:49,754,754 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:49] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 18:20:49,801,801 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:49] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:20:49,872,872 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:49] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 18:20:49,921,921 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:20:49,922,922 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:20:49,926,926 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:49] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:20:49,964,964 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:49] "GET /api/dashboard/stats?_t=1750683049875 HTTP/1.1" 200 -
2025-06-23 18:20:49,973,973 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:49] "GET /api/dashboard/activity?limit=15&_t=1750683049875 HTTP/1.1" 200 -
2025-06-23 18:20:54,933,933 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:54] "GET /api/dashboard/stats?_t=1750683054878 HTTP/1.1" 200 -
2025-06-23 18:20:54,957,957 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:54] "GET /api/dashboard/activity?limit=15&_t=1750683054878 HTTP/1.1" 200 -
2025-06-23 18:20:56,907,907 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:56] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 18:20:56,921,921 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:56] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:20:56,952,952 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:56] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 18:20:57,000,000 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:20:57,001,001 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:20:57,001,001 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:57] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:20:57,018,018 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:57] "GET /api/dashboard/stats?_t=1750683056958 HTTP/1.1" 200 -
2025-06-23 18:20:57,048,048 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:20:57] "GET /api/dashboard/activity?limit=15&_t=1750683056958 HTTP/1.1" 200 -
2025-06-23 18:21:01,999,999 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:01] "GET /api/dashboard/stats?_t=1750683061960 HTTP/1.1" 200 -
2025-06-23 18:21:02,004,004 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:02] "GET /api/dashboard/activity?limit=15&_t=1750683061961 HTTP/1.1" 200 -
2025-06-23 18:21:06,990,990 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:06] "GET /api/dashboard/stats?_t=1750683066960 HTTP/1.1" 200 -
2025-06-23 18:21:07,014,014 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:07] "GET /api/dashboard/activity?limit=15&_t=1750683066961 HTTP/1.1" 200 -
2025-06-23 18:21:11,992,992 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:11] "GET /api/dashboard/stats?_t=1750683071959 HTTP/1.1" 200 -
2025-06-23 18:21:12,004,004 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:12] "GET /api/dashboard/activity?limit=15&_t=1750683071960 HTTP/1.1" 200 -
2025-06-23 18:21:16,988,988 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:16] "GET /api/dashboard/stats?_t=1750683076960 HTTP/1.1" 200 -
2025-06-23 18:21:17,017,017 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:17] "GET /api/dashboard/activity?limit=15&_t=1750683076962 HTTP/1.1" 200 -
2025-06-23 18:21:22,015,015 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:22] "GET /api/dashboard/stats?_t=1750683081960 HTTP/1.1" 200 -
2025-06-23 18:21:22,039,039 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:22] "GET /api/dashboard/activity?limit=15&_t=1750683081961 HTTP/1.1" 200 -
2025-06-23 18:21:26,977,977 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:26] "GET /api/dashboard/stats?_t=1750683086959 HTTP/1.1" 200 -
2025-06-23 18:21:26,994,994 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:26] "GET /api/dashboard/activity?limit=15&_t=1750683086960 HTTP/1.1" 200 -
2025-06-23 18:21:28,534,534 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:28] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 18:21:28,570,570 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:28] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:21:28,584,584 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:28] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 18:21:28,624,624 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:21:28,625,625 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:21:28,626,626 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:28] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:21:28,647,647 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:28] "GET /api/dashboard/stats?_t=1750683088597 HTTP/1.1" 200 -
2025-06-23 18:21:28,677,677 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:28] "GET /api/dashboard/activity?limit=15&_t=1750683088597 HTTP/1.1" 200 -
2025-06-23 18:21:33,629,629 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:33] "GET /api/dashboard/stats?_t=1750683093599 HTTP/1.1" 200 -
2025-06-23 18:21:33,648,648 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:33] "GET /api/dashboard/activity?limit=15&_t=1750683093600 HTTP/1.1" 200 -
2025-06-23 18:21:38,649,649 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:38] "GET /api/dashboard/stats?_t=1750683098599 HTTP/1.1" 200 -
2025-06-23 18:21:38,677,677 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:38] "GET /api/dashboard/activity?limit=15&_t=1750683098600 HTTP/1.1" 200 -
2025-06-23 18:21:43,629,629 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:43] "GET /api/dashboard/stats?_t=1750683103598 HTTP/1.1" 200 -
2025-06-23 18:21:43,647,647 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:43] "GET /api/dashboard/activity?limit=15&_t=1750683103599 HTTP/1.1" 200 -
2025-06-23 18:21:48,629,629 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:48] "GET /api/dashboard/stats?_t=1750683108598 HTTP/1.1" 200 -
2025-06-23 18:21:48,644,644 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:48] "GET /api/dashboard/activity?limit=15&_t=1750683108599 HTTP/1.1" 200 -
2025-06-23 18:21:54,480,480 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:54] "GET /api/dashboard/stats?_t=1750683114439 HTTP/1.1" 200 -
2025-06-23 18:21:54,520,520 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:54] "GET /api/dashboard/activity?limit=15&_t=1750683114441 HTTP/1.1" 200 -
2025-06-23 18:21:59,481,481 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:59] "GET /api/dashboard/stats?_t=1750683119439 HTTP/1.1" 200 -
2025-06-23 18:21:59,521,521 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:21:59] "GET /api/dashboard/activity?limit=15&_t=1750683119441 HTTP/1.1" 200 -
2025-06-23 18:22:04,486,486 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:04] "GET /api/dashboard/stats?_t=1750683124441 HTTP/1.1" 200 -
2025-06-23 18:22:04,516,516 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:04] "GET /api/dashboard/activity?limit=15&_t=1750683124447 HTTP/1.1" 200 -
2025-06-23 18:22:09,473,473 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:09] "GET /api/dashboard/stats?_t=1750683129440 HTTP/1.1" 200 -
2025-06-23 18:22:09,495,495 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:09] "GET /api/dashboard/activity?limit=15&_t=1750683129441 HTTP/1.1" 200 -
2025-06-23 18:22:14,490,490 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:14] "GET /api/dashboard/stats?_t=1750683134447 HTTP/1.1" 200 -
2025-06-23 18:22:14,537,537 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:14] "GET /api/dashboard/activity?limit=15&_t=1750683134464 HTTP/1.1" 200 -
2025-06-23 18:22:19,484,484 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:19] "GET /api/dashboard/stats?_t=1750683139441 HTTP/1.1" 200 -
2025-06-23 18:22:19,520,520 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:19] "GET /api/dashboard/activity?limit=15&_t=1750683139442 HTTP/1.1" 200 -
2025-06-23 18:22:24,466,466 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:24] "GET /api/dashboard/stats?_t=1750683144441 HTTP/1.1" 200 -
2025-06-23 18:22:24,485,485 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:24] "GET /api/dashboard/activity?limit=15&_t=1750683144444 HTTP/1.1" 200 -
2025-06-23 18:22:29,471,471 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:29] "GET /api/dashboard/stats?_t=1750683149438 HTTP/1.1" 200 -
2025-06-23 18:22:29,491,491 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:29] "GET /api/dashboard/activity?limit=15&_t=1750683149439 HTTP/1.1" 200 -
2025-06-23 18:22:34,508,508 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:34] "GET /api/dashboard/stats?_t=1750683154465 HTTP/1.1" 200 -
2025-06-23 18:22:34,531,531 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:34] "GET /api/dashboard/activity?limit=15&_t=1750683154471 HTTP/1.1" 200 -
2025-06-23 18:22:39,481,481 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:39] "GET /api/dashboard/stats?_t=1750683159438 HTTP/1.1" 200 -
2025-06-23 18:22:39,540,540 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:39] "GET /api/dashboard/activity?limit=15&_t=1750683159440 HTTP/1.1" 200 -
2025-06-23 18:22:44,477,477 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:44] "GET /api/dashboard/stats?_t=1750683164438 HTTP/1.1" 200 -
2025-06-23 18:22:44,506,506 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:44] "GET /api/dashboard/activity?limit=15&_t=1750683164439 HTTP/1.1" 200 -
2025-06-23 18:22:49,490,490 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:49] "GET /api/dashboard/stats?_t=1750683169441 HTTP/1.1" 200 -
2025-06-23 18:22:49,533,533 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:22:49] "GET /api/dashboard/activity?limit=15&_t=1750683169442 HTTP/1.1" 200 -
2025-06-23 18:23:23,572,572 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:23] "GET /api/dashboard/activity?limit=15&_t=1750683203538 HTTP/1.1" 200 -
2025-06-23 18:23:23,573,573 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:23] "GET /api/dashboard/stats?_t=1750683203536 HTTP/1.1" 200 -
2025-06-23 18:23:35,466,466 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:35] "GET /api/dashboard/stats?_t=1750683215415 HTTP/1.1" 200 -
2025-06-23 18:23:35,486,486 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:35] "GET /api/dashboard/activity?limit=15&_t=1750683215415 HTTP/1.1" 200 -
2025-06-23 18:23:38,637,637 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:38] "GET /api/dashboard/stats?_t=1750683218598 HTTP/1.1" 200 -
2025-06-23 18:23:38,664,664 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:38] "GET /api/dashboard/activity?limit=15&_t=1750683218598 HTTP/1.1" 200 -
2025-06-23 18:23:43,638,638 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:43] "GET /api/dashboard/stats?_t=1750683223599 HTTP/1.1" 200 -
2025-06-23 18:23:43,663,663 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:43] "GET /api/dashboard/activity?limit=15&_t=1750683223599 HTTP/1.1" 200 -
2025-06-23 18:23:48,633,633 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:48] "GET /api/dashboard/stats?_t=1750683228599 HTTP/1.1" 200 -
2025-06-23 18:23:48,674,674 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:48] "GET /api/dashboard/activity?limit=15&_t=1750683228599 HTTP/1.1" 200 -
2025-06-23 18:23:53,635,635 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:53] "GET /api/dashboard/stats?_t=1750683233598 HTTP/1.1" 200 -
2025-06-23 18:23:53,657,657 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:53] "GET /api/dashboard/activity?limit=15&_t=1750683233599 HTTP/1.1" 200 -
2025-06-23 18:23:58,623,623 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:58] "GET /api/dashboard/stats?_t=1750683238598 HTTP/1.1" 200 -
2025-06-23 18:23:58,646,646 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:23:58] "GET /api/dashboard/activity?limit=15&_t=1750683238598 HTTP/1.1" 200 -
2025-06-23 18:24:03,645,645 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:03] "GET /api/dashboard/stats?_t=1750683243597 HTTP/1.1" 200 -
2025-06-23 18:24:03,667,667 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:03] "GET /api/dashboard/activity?limit=15&_t=1750683243598 HTTP/1.1" 200 -
2025-06-23 18:24:08,622,622 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:08] "GET /api/dashboard/stats?_t=1750683248597 HTTP/1.1" 200 -
2025-06-23 18:24:08,625,625 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:08] "GET /api/dashboard/activity?limit=15&_t=1750683248597 HTTP/1.1" 200 -
2025-06-23 18:24:13,627,627 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:13] "GET /api/dashboard/stats?_t=1750683253598 HTTP/1.1" 200 -
2025-06-23 18:24:13,652,652 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:13] "GET /api/dashboard/activity?limit=15&_t=1750683253598 HTTP/1.1" 200 -
2025-06-23 18:24:18,697,697 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:18] "GET /api/dashboard/stats?_t=1750683258598 HTTP/1.1" 200 -
2025-06-23 18:24:18,701,701 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:18] "GET /api/dashboard/activity?limit=15&_t=1750683258598 HTTP/1.1" 200 -
2025-06-23 18:24:23,633,633 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:23] "GET /api/dashboard/stats?_t=1750683263598 HTTP/1.1" 200 -
2025-06-23 18:24:23,648,648 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:23] "GET /api/dashboard/activity?limit=15&_t=1750683263598 HTTP/1.1" 200 -
2025-06-23 18:24:28,629,629 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:28] "GET /api/dashboard/stats?_t=1750683268598 HTTP/1.1" 200 -
2025-06-23 18:24:28,655,655 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:28] "GET /api/dashboard/activity?limit=15&_t=1750683268598 HTTP/1.1" 200 -
2025-06-23 18:24:33,641,641 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:33] "GET /api/dashboard/stats?_t=1750683273598 HTTP/1.1" 200 -
2025-06-23 18:24:33,686,686 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:33] "GET /api/dashboard/activity?limit=15&_t=1750683273599 HTTP/1.1" 200 -
2025-06-23 18:24:38,625,625 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:38] "GET /api/dashboard/stats?_t=1750683278598 HTTP/1.1" 200 -
2025-06-23 18:24:38,648,648 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:38] "GET /api/dashboard/activity?limit=15&_t=1750683278599 HTTP/1.1" 200 -
2025-06-23 18:24:43,619,619 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:43] "GET /api/dashboard/stats?_t=1750683283597 HTTP/1.1" 200 -
2025-06-23 18:24:43,641,641 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:43] "GET /api/dashboard/activity?limit=15&_t=1750683283597 HTTP/1.1" 200 -
2025-06-23 18:24:48,613,613 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:48] "GET /api/dashboard/stats?_t=1750683288598 HTTP/1.1" 200 -
2025-06-23 18:24:48,632,632 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:48] "GET /api/dashboard/activity?limit=15&_t=1750683288598 HTTP/1.1" 200 -
2025-06-23 18:24:53,623,623 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:53] "GET /api/dashboard/stats?_t=1750683293598 HTTP/1.1" 200 -
2025-06-23 18:24:53,657,657 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:53] "GET /api/dashboard/activity?limit=15&_t=1750683293598 HTTP/1.1" 200 -
2025-06-23 18:24:58,620,620 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:58] "GET /api/dashboard/stats?_t=1750683298597 HTTP/1.1" 200 -
2025-06-23 18:24:58,643,643 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:24:58] "GET /api/dashboard/activity?limit=15&_t=1750683298597 HTTP/1.1" 200 -
2025-06-23 18:25:03,636,636 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:03] "GET /api/dashboard/stats?_t=1750683303598 HTTP/1.1" 200 -
2025-06-23 18:25:03,665,665 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:03] "GET /api/dashboard/activity?limit=15&_t=1750683303598 HTTP/1.1" 200 -
2025-06-23 18:25:08,658,658 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:08] "GET /api/dashboard/stats?_t=1750683308597 HTTP/1.1" 200 -
2025-06-23 18:25:08,688,688 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:08] "GET /api/dashboard/activity?limit=15&_t=1750683308598 HTTP/1.1" 200 -
2025-06-23 18:25:13,621,621 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:13] "GET /api/dashboard/stats?_t=1750683313597 HTTP/1.1" 200 -
2025-06-23 18:25:13,651,651 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:13] "GET /api/dashboard/activity?limit=15&_t=1750683313597 HTTP/1.1" 200 -
2025-06-23 18:25:18,625,625 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:18] "GET /api/dashboard/stats?_t=1750683318598 HTTP/1.1" 200 -
2025-06-23 18:25:18,656,656 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:18] "GET /api/dashboard/activity?limit=15&_t=1750683318598 HTTP/1.1" 200 -
2025-06-23 18:25:23,627,627 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:23] "GET /api/dashboard/stats?_t=1750683323597 HTTP/1.1" 200 -
2025-06-23 18:25:23,666,666 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:23] "GET /api/dashboard/activity?limit=15&_t=1750683323597 HTTP/1.1" 200 -
2025-06-23 18:25:28,639,639 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:28] "GET /api/dashboard/stats?_t=1750683328598 HTTP/1.1" 200 -
2025-06-23 18:25:28,655,655 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:28] "GET /api/dashboard/activity?limit=15&_t=1750683328598 HTTP/1.1" 200 -
2025-06-23 18:25:33,620,620 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:33] "GET /api/dashboard/stats?_t=1750683333598 HTTP/1.1" 200 -
2025-06-23 18:25:33,640,640 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:33] "GET /api/dashboard/activity?limit=15&_t=1750683333598 HTTP/1.1" 200 -
2025-06-23 18:25:38,627,627 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:38] "GET /api/dashboard/stats?_t=1750683338597 HTTP/1.1" 200 -
2025-06-23 18:25:38,652,652 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:38] "GET /api/dashboard/activity?limit=15&_t=1750683338598 HTTP/1.1" 200 -
2025-06-23 18:25:43,615,615 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:43] "GET /api/dashboard/stats?_t=1750683343598 HTTP/1.1" 200 -
2025-06-23 18:25:43,644,644 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:43] "GET /api/dashboard/activity?limit=15&_t=1750683343598 HTTP/1.1" 200 -
2025-06-23 18:25:48,620,620 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:48] "GET /api/dashboard/stats?_t=1750683348598 HTTP/1.1" 200 -
2025-06-23 18:25:48,645,645 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:48] "GET /api/dashboard/activity?limit=15&_t=1750683348598 HTTP/1.1" 200 -
2025-06-23 18:25:53,621,621 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:53] "GET /api/dashboard/stats?_t=1750683353597 HTTP/1.1" 200 -
2025-06-23 18:25:53,694,694 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:53] "GET /api/dashboard/activity?limit=15&_t=1750683353598 HTTP/1.1" 200 -
2025-06-23 18:25:53,697,697 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:53] "GET /dashboard HTTP/1.1" 200 -
2025-06-23 18:25:53,757,757 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:53] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:25:53,773,773 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:53] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 18:25:53,860,860 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:25:53,861,861 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:25:53,862,862 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:53] "GET /agent_status HTTP/1.1" 200 -
2025-06-23 18:25:53,886,886 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:53] "GET /api/dashboard/stats?_t=1750683353777 HTTP/1.1" 200 -
2025-06-23 18:25:53,905,905 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:25:53] "GET /api/dashboard/activity?limit=15&_t=1750683353777 HTTP/1.1" 200 -
2025-06-23 18:34:30,134,134 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:34:30,136,136 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:34:30] "GET / HTTP/1.1" 200 -
2025-06-23 18:34:30,161,161 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:34:30] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-23 18:34:30,209,209 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:34:30] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-23 18:34:30,241,241 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-23 18:34:30,241,241 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-23 18:34:30,242,242 - werkzeug - INFO - 10.80.70.29 - - [23/Jun/2025 18:34:30] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 09:57:29,038,038 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 09:57:29,039,039 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 09:57:31,717,717 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 09:57:31,717,717 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 09:57:31,721,721 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 09:57:31,722,722 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 09:57:31,722,722 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 09:57:31,723,723 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 09:57:31,723,723 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 09:57:31,723,723 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 09:57:31,724,724 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 09:57:31,725,725 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 09:57:31,726,726 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 09:57:31,726,726 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 09:57:31,726,726 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 09:57:31,726,726 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 09:57:31,997,997 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.245.79:5000
2025-06-24 09:57:31,997,997 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 09:57:31,998,998 - werkzeug - INFO -  * Restarting with stat
2025-06-24 09:57:32,656,656 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 09:57:32,656,656 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 09:57:32,658,658 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 09:57:32,659,659 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 09:57:32,660,660 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 09:57:32,660,660 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 09:57:32,660,660 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 09:57:32,660,660 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 09:57:32,661,661 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 09:57:32,662,662 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 09:57:32,664,664 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 09:57:32,664,664 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 09:57:32,665,665 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 09:57:32,665,665 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 09:57:32,695,695 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 09:57:32,715,715 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 09:57:36,487,487 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 09:57:36,514,514 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:36] "GET / HTTP/1.1" 200 -
2025-06-24 09:57:36,580,580 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:36] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 09:57:36,591,591 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:36] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 09:57:36,659,659 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 09:57:36,660,660 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 09:57:36,661,661 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:36] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 09:57:39,177,177 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:39] "GET /dashboard HTTP/1.1" 200 -
2025-06-24 09:57:39,196,196 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:39] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 09:57:39,198,198 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:39] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 09:57:39,217,217 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 09:57:39,218,218 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 09:57:39,218,218 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:39] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 09:57:39,223,223 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:39] "GET /api/dashboard/stats?_t=1750739259213 HTTP/1.1" 200 -
2025-06-24 09:57:39,229,229 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 09:57:39] "GET /api/dashboard/activity?limit=15&_t=1750739259213 HTTP/1.1" 200 -
2025-06-24 11:30:00,333,333 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 11:30:00,341,341 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:30:00] "GET / HTTP/1.1" 200 -
2025-06-24 11:30:00,369,369 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:30:00] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 11:30:00,370,370 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:30:00] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 11:30:00,384,384 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 11:30:00,385,385 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 11:30:00,385,385 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:30:00] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 11:30:03,089,089 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 11:30:03,092,092 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 11:30:03,093,093 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:30:03] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 11:30:15,340,340 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 11:30:15.340294
2025-06-24 11:30:15,342,342 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-24 11:30:15,342,342 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T11:30:15.340294
2025-06-24 11:30:15,343,343 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 11:30:15,343,343 - utils.template_processor - INFO - Attempting to load template: page_templates/s_in.json
2025-06-24 11:30:15,347,347 - utils.template_processor - INFO - Successfully loaded template: s_in.json
2025-06-24 11:30:15,348,348 - __main__ - INFO - Successfully loaded template: s_in.json
2025-06-24 11:30:15,349,349 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 11:30:15,349,349 - __main__ - INFO -    operation_type: s_in
2025-06-24 11:30:15,349,349 - __main__ - INFO -    template_file: s_in.json
2025-06-24 11:30:15,350,350 - __main__ - INFO -    operation_date: 20250624
2025-06-24 11:30:15,350,350 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 11:30:15,350,350 - __main__ - INFO -    source: api_request
2025-06-24 11:30:15,350,350 - __main__ - INFO -    template_data present: True
2025-06-24 11:30:15,350,350 - __main__ - INFO - Starting AI agent processing
2025-06-24 11:30:15,354,354 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 's in for today', 'template_file': 's_in.json', 'operation_type': 's_in', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-24 11:30:15,518,518 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 11:30:15,524,524 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 11:30:15,525,525 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 11:30:21,612,612 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate S-IN operation document for June 24, 2025 (confidence: 0.98) in 6.26s
2025-06-24 11:30:21,612,612 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate S-IN operation document for June 24, 2025
2025-06-24 11:30:21,613,613 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 11:30:29,235,235 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 7.62s
2025-06-24 11:30:29,237,237 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 11:30:29,239,239 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_in'
2025-06-24 11:30:29,239,239 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_in: SCP
2025-06-24 11:30:29,240,240 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_IN page for space SCP...
2025-06-24 11:30:29,240,240 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_in, template_data={'title': 'SCP vShop_ingestion_20250624_113029_23750', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-IN: TICKET_NUMBER - SCP Shop S-IN', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250602\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250602\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/35/overview'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-IN Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Screenshots', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT * FROM scp_shops WHERE SHOP_URL IN ('mogumogu','tennis.com','hsrp','spider','joker','santai','store','jewelry.com','handmade','kaneko','toyshop','blackmarket','muf-bo','h2o','art','calm')\n{code}", 'check_main_warehouse_center_cd': "{expand:title=center id}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT SELLER_CD, CENTER_CD, MAIN_CENTER_FLG FROM RM_SELLER_CENTER WHERE MAIN_CENTER_FLG = 1 AND NOT DEL_FLG = 1 AND SELLER_CD IN ('42126','42270','42357','42315','42384','42393','42400','42229','42416','42455','42388','42444','42430','41186','36949','40027')\n{code}", 'check_id_with_center_name': '{expand:title=center name}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nSELECT NAME_JP, ID FROM SCP_WAREHOUSES\n{code}', 'center_codes_data': [{'code': '01', 'name': 'RFCå¸‚å·I', 'alias': 'rfcichikawa1'}, {'code': '03', 'name': 'RFCå¸‚å·II', 'alias': 'rfcichikawa2'}, {'code': '04', 'name': 'RFCå¸‚å·III', 'alias': 'rfcichikawa3'}, {'code': '05', 'name': 'RFCå·è¥¿', 'alias': ''}, {'code': '06', 'name': 'RFCæšæ–¹', 'alias': 'rfchirakata'}, {'code': '07', 'name': 'RFCæµå±±', 'alias': 'rfcnagareyama'}, {'code': '08', 'name': 'RFCç¿’å¿—é‡', 'alias': 'rfcnarashino'}, {'code': '09', 'name': 'RFCä¸­å¤®æ—é–“', 'alias': 'rfcchuorinkan'}, {'code': '11', 'name': 'RFCç¦å²¡', 'alias': 'rfcfukuoka'}, {'code': '12', 'name': 'RFCå…«å°¾', 'alias': 'rfcyao'}, {'code': '13', 'name': 'RFCèŒ¨æœ¨', 'alias': 'rfcIbaraki'}, {'code': '14', 'name': 'RFCæ¾æˆ¸', 'alias': 'rfcmatsudo'}]}, 'rows': [{'label': "Verify Shop's exists or not in DB", 'id': 'verify_shop_exists'}, {'label': "Check main warehouse's center_cd for each seller @å·è¥¿DB - RSL_STUSER", 'id': 'check_main_warehouse_center_cd'}, {'label': 'Check ID with the center name @å¸‚å·DB - SCG_PROD', 'id': 'check_id_with_center_name'}, {'label': 'Check center name for detected center code from the table', 'id': 'check_center_name_for_code'}]}]}, {'heading': 'S-IN Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'import_shop_warehouse_location_data': "Checkout 'release/vShop_ingestion_{operation_date}' the RC Branch\n\nGo to https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data and follow [Shop warehouse location reference data] section", 'verify_shop_warehouse_location_data': 'select * from scp_shop_warehouse_location where shop_url in (select SHOP_URL from scp_shops where CREATE_TIMESTAMP > trunc(sysdate))', 'update_shop_data': 'Operation steps to do "Shop Reference Data" from https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Shop warehouse location reference data /n, Import SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'import_shop_warehouse_location_data'}, {'label': 'Verification of SCP_SHOP_WAREHOUSE_LOCATION data', 'id': 'verify_shop_warehouse_location_data'}, {'label': 'Update shop data', 'id': 'update_shop_data'}]}]}, {'heading': 'S-IN Verification', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'verification_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'verification_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'verification_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'verify_seller_code_warehouse_shop_url': "select e1.SHOP_ID , e1.SHOP_URL , e3.WAREHOUSE_ID , e7.SELLER_CD from SCP_SHOPS e1 INNER JOIN( select DISTINCT e2.SHOP_URL , e2.WAREHOUSE_ID from SCP_SHOP_WAREHOUSE_LOCATION e2 where SHOP_URL IN ('belkin-shop') GROUP BY SHOP_URL, WAREHOUSE_ID ) e3 ON e1.SHOP_URL= e3.SHOP_URL AND e1.RSL_SHOP_FLAG = '1' LEFT JOIN ( select DISTINCT e5.SHOP_URL, e5.SELLER_CD from SCP_SKU_DETAILS e5 INNER JOIN( select max(CHANGE_TIMESTAMP) LAST_CHANGE_TIMESTAMP, SHOP_URL from SCP_SKU_DETAILS where SHOP_URL IN ('belkin-shop') group by SHOP_URL ) e6 on e5.SHOP_URL = e6.SHOP_URL and e5.CHANGE_TIMESTAMP = e6.LAST_CHANGE_TIMESTAMP ) e7 ON e1.SHOP_URL=e7.SHOP_URL", 'verify_items_published': "Check if Items belongs to shops are published\n\nCount of published items:\n\nselect e1.ITEM_STOCK_ID, e1.SHOP_URL, e1.RMS_ITEM_MANAGEMENT_NUMBER, e1.SHOP_ID, e1.ITEM_ID, e1.HCHOICE_NAME, e1.VCHOICE_NAME, e1.EVENT_TYPE, e1.EVENT_TIMESTAMP, e1.WAREHOUSE_ID, e1.SCP_SYNC_STATUS_V2 from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP >  trunc(sysdate) order by CHANGE_TIMESTAMP desc", 'verify_sample_items_scp_calculation': 'How to identify if SCP dates is showing?\n\nCheck for the "RSL_V1_CALCULATION" tag\n\nRight click > Inspect > Network\nClick the "trashcan" icon or "no entry" icon to clear the logs\nselect an SKU from the webpage then click "shippingCalculation?apikey..."\n\nIf "shippingCalculation?apikey..."  if found, skip this step and proceed to next step\n\nIf "shippingCalculation?apikey..." is not found, try...\n\nDisable cache or refresh the page\nNote: If "shippingCalculation?apikey..." does not appear it might mean that the webpage has been cached.\nGo to "Response" and check for "RSL_V1_CALCULATION" tag\n\nJust for reference:\nTAGS meaning\nRSL_V1_CALCULATION = SCP calculation\nRMS_V1_CALCULATION = RMS calculation (fallback logic)', 'query_after_sin_zero_quantity': "select item_stock_id from scp_warehouse_inventories where item_stock_id in ( select e1.ITEM_STOCK_ID from scp_sku_detail_events e1 inner join( select max(EVENT_TIMESTAMP) LAST_EVENT_TIMESTAMP, ITEM_STOCK_ID from scp_sku_detail_events group by ITEM_STOCK_ID ) e2 on e1.ITEM_STOCK_ID = e2.ITEM_STOCK_ID and e1.EVENT_TIMESTAMP = e2.LAST_EVENT_TIMESTAMP where e1.SCP_SYNC_STATUS_V2 = '1' and e1.SHOP_URL in ('belkin-shop') and e1.EVENT_TYPE = 'PUT' and EVENT_TIMESTAMP > SYSDATE-1 and create_user='reference-data' ) and quantity=0 and center_code is not null group by item_stock_id having count(*)=2"}, 'rows': [{'label': 'Verify the Seller Code, Warehouse, Shop URL and Shop Id', 'id': 'verify_seller_code_warehouse_shop_url'}, {'label': 'Verify items are published', 'id': 'verify_items_published'}, {'label': 'Verify sample items show SCP calculation', 'id': 'verify_sample_items_scp_calculation'}, {'label': "Query after S-IN to find if any item with 0 quantity in RSL was published. It should be 'NO Matching Records'", 'id': 'query_after_sin_zero_quantity'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': 'Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-IN\nClick here to expand...\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1', 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-24 11:30:29.240133
2025-06-24 11:30:52,641,641 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 11:30:52,646,646 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250624_113029_23750
2025-06-24 11:30:52,647,647 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250624_113029_23750_113052_811
2025-06-24 11:30:52,647,647 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 21404 characters
2025-06-24 11:30:52,647,647 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250624_113029_23750_113052_811, space: SCP, parent ID: 5890230619 in 23.41s
2025-06-24 11:30:52,648,648 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 11:30:52,648,648 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 11:30:52,649,649 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250624_113029_23750_113052_811' in space 'SCP'
2025-06-24 11:30:52,649,649 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250624_113029_23750_113052_811"
2025-06-24 11:30:54,794,794 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5916215397, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250624_113029_23750_113052_811
2025-06-24 11:30:54,804,804 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 39.45s
2025-06-24 11:30:54,810,810 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 11:30:54,811,811 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 11:30:54,821,821 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 250, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-24 11:30:54,821,821 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 39.47s
2025-06-24 11:30:54,822,822 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 11:30:54,822,822 - __main__ - INFO - ğŸ“Š Generation completed in 39.48s
2025-06-24 11:30:54,822,822 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:30:54] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-24 11:31:30,294,294 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:31:30] "GET /feedback HTTP/1.1" 200 -
2025-06-24 11:31:30,316,316 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:31:30] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 11:31:30,316,316 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:31:30] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 11:31:30,322,322 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 11:31:30,325,325 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:31:30] "GET /api/feedback/recent?limit=5 HTTP/1.1" 200 -
2025-06-24 11:31:30,325,325 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 11:31:30,326,326 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:31:30] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 11:31:30,329,329 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:31:30] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:32:01,213,213 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:32:01] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:32:31,217,217 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:32:31] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:33:01,221,221 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:33:01] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:33:31,196,196 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:33:31] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:34:01,231,231 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:34:01] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:34:31,211,211 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:34:31] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:35:01,212,212 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:35:01] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:35:34,546,546 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:35:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:36:34,245,245 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:36:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:37:34,232,232 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:37:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:38:34,234,234 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:38:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:39:34,246,246 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:39:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:40:34,248,248 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:40:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:41:34,321,321 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:41:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:42:34,248,248 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:42:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:43:34,240,240 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:43:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:44:34,302,302 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:44:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:45:34,217,217 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:45:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:46:34,231,231 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:46:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:47:34,219,219 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:47:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:48:34,193,193 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:48:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:49:34,229,229 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:49:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:50:34,219,219 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:50:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:51:17,275,275 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:51:17] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:51:31,179,179 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:51:31] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:52:01,211,211 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:52:01] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:52:34,197,197 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:52:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:53:34,203,203 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:53:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:54:34,205,205 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:54:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:55:34,240,240 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:55:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:56:34,225,225 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:56:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:57:34,165,165 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:57:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:58:34,199,199 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:58:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 11:59:34,205,205 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 11:59:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:00:34,237,237 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:00:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:01:34,197,197 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:01:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:02:34,196,196 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:02:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:03:34,197,197 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:03:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:04:34,161,161 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:04:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:05:34,211,211 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:05:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:06:34,177,177 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:06:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:07:34,123,123 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:07:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:08:34,088,088 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:08:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:09:16,546,546 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:09:16] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:09:30,179,179 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:09:30] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:10:00,175,175 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:10:00] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:10:30,174,174 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:10:30] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:11:01,068,068 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:11:01] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:11:31,046,046 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:11:31] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:12:32,073,073 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:12:32] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:13:33,080,080 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:13:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:14:34,062,062 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:14:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:15:34,059,059 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:15:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:16:34,034,034 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:16:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:17:34,050,050 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:17:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:18:34,044,044 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:18:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:19:34,037,037 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:19:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:20:34,038,038 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:20:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:21:34,046,046 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:21:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:22:34,031,031 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:22:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:23:34,031,031 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:23:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:24:34,064,064 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:24:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:25:34,046,046 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:25:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:26:34,018,018 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:26:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:27:34,013,013 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:27:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:28:34,023,023 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:28:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:29:34,033,033 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:29:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:30:34,002,002 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:30:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:31:34,007,007 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:31:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:32:34,040,040 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:32:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:33:12,859,859 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/universal_llm_generator.py', reloading
2025-06-24 12:33:15,039,039 - werkzeug - INFO -  * Restarting with stat
2025-06-24 12:33:16,368,368 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 12:33:16,368,368 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 12:33:16,370,370 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:33:16,372,372 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:33:16,373,373 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:33:16,373,373 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:33:16,373,373 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:33:16,373,373 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:33:16,379,379 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:33:16,381,381 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:33:16,381,381 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:33:16,382,382 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:33:16,382,382 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:33:16,382,382 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:33:16,433,433 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 12:33:16,457,457 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 12:33:34,022,022 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:33:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:34:20,803,803 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/universal_llm_generator.py', reloading
2025-06-24 12:34:20,926,926 - werkzeug - INFO -  * Restarting with stat
2025-06-24 12:34:22,897,897 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 12:34:22,898,898 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 12:34:22,899,899 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:34:22,902,902 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:34:22,904,904 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:34:22,906,906 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:34:22,906,906 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:34:22,906,906 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:34:22,908,908 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:34:22,910,910 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:34:22,911,911 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:34:22,912,912 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:34:22,912,912 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:34:22,912,912 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:34:22,953,953 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 12:34:22,973,973 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 12:34:34,028,028 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:34:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:35:34,004,004 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:35:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:36:34,029,029 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:36:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:37:33,954,954 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:37:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:38:33,947,947 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:38:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:39:33,954,954 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:39:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:40:33,952,952 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:40:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:41:33,994,994 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:41:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:42:33,921,921 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:42:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:43:33,940,940 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:43:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:44:33,945,945 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:44:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:45:33,960,960 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:45:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:46:33,940,940 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:46:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:47:17,576,576 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 12:47:17,697,697 - werkzeug - INFO -  * Restarting with stat
2025-06-24 12:47:18,796,796 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 12:47:18,796,796 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 12:47:18,799,799 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:47:18,801,801 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:47:18,802,802 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:47:18,802,802 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:47:18,802,802 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:47:18,802,802 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:47:18,803,803 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:47:18,805,805 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:47:18,806,806 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:47:18,806,806 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:47:18,806,806 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:47:18,806,806 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:47:18,843,843 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 12:47:18,857,857 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 12:47:33,964,964 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:47:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:48:33,921,921 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:48:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:49:34,160,160 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:49:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:49:58,677,677 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 12:49:58,806,806 - werkzeug - INFO -  * Restarting with stat
2025-06-24 12:49:59,968,968 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 12:49:59,969,969 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 12:49:59,973,973 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:49:59,975,975 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:49:59,976,976 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:49:59,976,976 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:49:59,976,976 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:49:59,976,976 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:49:59,977,977 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:49:59,979,979 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:49:59,980,980 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:49:59,980,980 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:49:59,980,980 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:49:59,980,980 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:50:00,050,050 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 12:50:00,092,092 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 12:50:33,915,915 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:50:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:51:33,965,965 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:51:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:52:33,993,993 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:52:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:53:34,019,019 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:53:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:54:33,957,957 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:54:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:55:33,936,936 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:55:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:56:33,997,997 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:56:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:57:33,929,929 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:57:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:58:33,947,947 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:58:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 12:58:39,346,346 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/gitOperations.py', reloading
2025-06-24 12:58:39,545,545 - werkzeug - INFO -  * Restarting with stat
2025-06-24 12:58:40,417,417 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 12:58:40,417,417 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 12:58:40,418,418 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:58:40,420,420 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:58:40,420,420 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:58:40,421,421 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:58:40,421,421 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:58:40,421,421 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:58:40,422,422 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:58:40,423,423 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:58:40,424,424 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:58:40,424,424 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:58:40,424,424 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:58:40,424,424 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:58:40,459,459 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 12:58:40,477,477 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 12:59:05,641,641 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/gitOperations.py', reloading
2025-06-24 12:59:05,762,762 - werkzeug - INFO -  * Restarting with stat
2025-06-24 12:59:06,853,853 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 12:59:06,853,853 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 12:59:06,855,855 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:59:06,856,856 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:59:06,856,856 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:59:06,856,856 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:59:06,856,856 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:59:06,857,857 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:59:06,857,857 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 12:59:06,858,858 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 12:59:06,859,859 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 12:59:06,859,859 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 12:59:06,859,859 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 12:59:06,859,859 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 12:59:06,894,894 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 12:59:06,927,927 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 12:59:33,931,931 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 12:59:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:00:33,964,964 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:00:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:01:34,035,035 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:01:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:02:34,019,019 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:02:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:03:34,134,134 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:03:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:04:34,055,055 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:04:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:05:34,018,018 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:05:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:06:13,813,813 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/git_operations_client.py', reloading
2025-06-24 13:06:13,945,945 - werkzeug - INFO -  * Restarting with stat
2025-06-24 13:06:15,331,331 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 13:06:15,332,332 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 13:06:15,333,333 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 13:06:15,335,335 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 13:06:15,336,336 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:06:15,336,336 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:06:15,336,336 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:06:15,336,336 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 13:06:15,338,338 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 13:06:15,339,339 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 13:06:15,339,339 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:06:15,339,339 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:06:15,340,340 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:06:15,340,340 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 13:06:15,396,396 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 13:06:15,414,414 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 13:06:33,958,958 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:06:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:07:33,994,994 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:07:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:08:35,838,838 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:08:35] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:09:35,669,669 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:09:35] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:10:35,477,477 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:10:35] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:11:43,759,759 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:11:43] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:12:33,958,958 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:12:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:13:00,505,505 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/git_ai_agent.py', reloading
2025-06-24 13:13:00,644,644 - werkzeug - INFO -  * Restarting with stat
2025-06-24 13:13:01,481,481 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 13:13:01,481,481 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 13:13:01,483,483 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 13:13:01,485,485 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 13:13:01,485,485 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:13:01,485,485 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:13:01,485,485 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:13:01,485,485 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 13:13:01,486,486 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 13:13:01,488,488 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 13:13:01,489,489 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:13:01,489,489 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:13:01,489,489 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:13:01,489,489 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 13:13:01,533,533 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 13:13:01,549,549 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 13:13:33,998,998 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:13:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:14:34,007,007 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:14:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:15:33,965,965 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:15:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:16:34,061,061 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:16:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:17:33,932,932 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:17:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:18:33,919,919 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:18:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:19:33,925,925 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:19:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:20:33,965,965 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:20:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:21:33,906,906 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:21:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:22:33,847,847 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:22:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:23:33,832,832 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:23:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:24:33,828,828 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:24:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:25:24,892,892 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 13:25:24,893,893 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 13:25:26,953,953 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 13:25:26,953,953 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 13:25:26,955,955 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 13:25:26,956,956 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 13:25:26,956,956 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:25:26,956,956 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:25:26,956,956 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:25:26,956,956 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 13:25:26,957,957 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 13:25:26,959,959 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 13:25:26,959,959 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:25:26,959,959 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:25:26,959,959 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:25:26,959,959 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 13:25:27,636,636 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.106.149:5000
2025-06-24 13:25:27,636,636 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 13:25:27,637,637 - werkzeug - INFO -  * Restarting with stat
2025-06-24 13:25:28,255,255 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 13:25:28,255,255 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 13:25:28,257,257 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 13:25:28,258,258 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 13:25:28,258,258 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:25:28,259,259 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:25:28,259,259 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:25:28,259,259 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 13:25:28,259,259 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 13:25:28,261,261 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 13:25:28,262,262 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:25:28,262,262 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:25:28,262,262 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:25:28,262,262 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 13:25:28,300,300 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 13:25:28,328,328 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 13:25:31,085,085 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 13:25:31,096,096 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:25:31] "GET / HTTP/1.1" 200 -
2025-06-24 13:25:31,135,135 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:25:31] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 13:25:31,137,137 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:25:31] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 13:25:31,222,222 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 13:25:31,225,225 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 13:25:31,236,236 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:25:31] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 13:25:33,818,818 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:25:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:25:53,572,572 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 13:25:53.572029
2025-06-24 13:25:53,573,573 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-24 13:25:53,573,573 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T13:25:53.572029
2025-06-24 13:25:53,573,573 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 13:25:53,573,573 - utils.template_processor - INFO - Attempting to load template: page_templates/s_out.json
2025-06-24 13:25:53,575,575 - utils.template_processor - INFO - Successfully loaded template: s_out.json
2025-06-24 13:25:53,576,576 - __main__ - INFO - Successfully loaded template: s_out.json
2025-06-24 13:25:53,576,576 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 13:25:53,576,576 - __main__ - INFO -    operation_type: s_out
2025-06-24 13:25:53,576,576 - __main__ - INFO -    template_file: s_out.json
2025-06-24 13:25:53,576,576 - __main__ - INFO -    operation_date: 20250624
2025-06-24 13:25:53,576,576 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 13:25:53,576,576 - __main__ - INFO -    source: api_request
2025-06-24 13:25:53,576,576 - __main__ - INFO -    template_data present: True
2025-06-24 13:25:53,576,576 - __main__ - INFO - Starting AI agent processing
2025-06-24 13:25:53,576,576 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 's out for 2nd july', 'template_file': 's_out.json', 'operation_type': 's_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-24 13:25:53,646,646 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 13:25:53,657,657 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 13:25:53,661,661 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 13:26:00,201,201 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate S-OUT operation document for July 2nd, 2025 (confidence: 0.98) in 6.62s
2025-06-24 13:26:00,202,202 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate S-OUT operation document for July 2nd, 2025
2025-06-24 13:26:00,202,202 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 13:26:08,531,531 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 7 steps in 8.33s
2025-06-24 13:26:08,532,532 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 13:26:08,534,534 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-24 13:26:08,534,534 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-24 13:26:08,535,535 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_OUT page for space SCP...
2025-06-24 13:26:08,536,536 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_out, template_data={'title': 'SCP vShop_ingestion_20250624_132608_53233', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-24 13:26:08.535757
2025-06-24 13:26:22,189,189 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 13:26:22,191,191 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250624_132608_53233
2025-06-24 13:26:22,191,191 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250624_132608_53233_132622_300
2025-06-24 13:26:22,191,191 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 14127 characters
2025-06-24 13:26:22,193,193 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250624_132608_53233_132622_300, space: SCP, parent ID: 5890230619 in 13.66s
2025-06-24 13:26:22,193,193 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 13:26:22,193,193 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 13:26:22,193,193 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250624_132608_53233_132622_300' in space 'SCP'
2025-06-24 13:26:22,193,193 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250624_132608_53233_132622_300"
2025-06-24 13:26:24,231,231 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5915210663, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250624_132608_53233_132622_300
2025-06-24 13:26:24,255,255 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 30.68s
2025-06-24 13:26:24,257,257 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 13:26:24,258,258 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 13:26:24,263,263 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 251, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-24 13:26:24,263,263 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 30.69s
2025-06-24 13:26:24,264,264 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 13:26:24,264,264 - __main__ - INFO - ğŸ“Š Generation completed in 30.69s
2025-06-24 13:26:24,264,264 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:26:24] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-24 13:26:33,847,847 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:26:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:27:28,058,058 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:27:28] "GET /dashboard HTTP/1.1" 200 -
2025-06-24 13:27:28,083,083 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:27:28] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 13:27:28,084,084 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:27:28] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 13:27:28,105,105 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 13:27:28,107,107 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:27:28] "GET /api/dashboard/activity?limit=15&_t=1750751848103 HTTP/1.1" 200 -
2025-06-24 13:27:28,107,107 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 13:27:28,108,108 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:27:28] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 13:27:28,120,120 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:27:28] "GET /api/dashboard/stats?_t=1750751848102 HTTP/1.1" 200 -
2025-06-24 13:27:33,784,784 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:27:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:28:33,827,827 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:28:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:29:33,812,812 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:29:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:30:33,867,867 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:30:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:31:33,842,842 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:31:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:32:33,839,839 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:32:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:33:33,830,830 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:33:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:34:33,835,835 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:34:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:35:33,840,840 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:35:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:36:33,798,798 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:36:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:37:33,807,807 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:37:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:38:33,927,927 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:38:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:39:33,900,900 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:39:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:40:33,958,958 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:40:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:41:33,970,970 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:41:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:42:33,900,900 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:42:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:43:33,904,904 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:43:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:44:33,904,904 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:44:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:45:33,861,861 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:45:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:46:33,891,891 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:46:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:47:33,914,914 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:47:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:48:33,898,898 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:48:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:49:33,908,908 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:49:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:50:33,933,933 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:50:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:51:33,881,881 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:51:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:52:33,882,882 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:52:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:53:33,840,840 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:53:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:54:33,961,961 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:54:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:55:33,917,917 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:55:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:56:33,908,908 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:56:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:57:33,933,933 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:57:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:58:33,878,878 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:58:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 13:59:33,887,887 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 13:59:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:00:33,868,868 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:00:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:01:33,962,962 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:01:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:02:33,866,866 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:02:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:03:33,974,974 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:03:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:04:33,899,899 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:04:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:05:33,899,899 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:05:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:06:33,842,842 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:06:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:07:33,940,940 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:07:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:08:33,850,850 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:08:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:09:33,857,857 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:09:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:10:33,817,817 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:10:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:11:33,864,864 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:11:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:12:33,819,819 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:12:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:13:33,825,825 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:13:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:14:33,824,824 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:14:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:15:33,809,809 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:15:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:16:33,833,833 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:16:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:17:33,843,843 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:17:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:18:33,826,826 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:18:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:19:34,376,376 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:19:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:20:33,920,920 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:20:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:21:33,907,907 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:21:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:22:33,889,889 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:22:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:23:33,919,919 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:23:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:24:33,881,881 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:24:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:25:33,915,915 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:25:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:26:33,867,867 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:26:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:27:33,878,878 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:27:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:28:33,870,870 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:28:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:29:33,899,899 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:29:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:30:33,903,903 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:30:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:31:33,862,862 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:31:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:32:33,886,886 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:32:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:33:33,914,914 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:33:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:34:34,051,051 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:34:34] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:35:33,895,895 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:35:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:36:33,926,926 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:36:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:37:33,878,878 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:37:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:38:33,909,909 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:38:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:39:33,905,905 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:39:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:40:33,912,912 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:40:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:41:33,886,886 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:41:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:42:33,898,898 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:42:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:43:33,954,954 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:43:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:44:33,919,919 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:44:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:45:33,865,865 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:45:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:46:33,859,859 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:46:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:47:33,862,862 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:47:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:48:33,857,857 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:48:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:49:33,995,995 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:49:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:50:33,974,974 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:50:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:51:33,871,871 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:51:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:52:33,858,858 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:52:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:53:33,846,846 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:53:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:54:33,888,888 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:54:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:55:33,898,898 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:55:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:56:33,901,901 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:56:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:57:33,866,866 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:57:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:58:33,847,847 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:58:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 14:59:33,870,870 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 14:59:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:00:33,894,894 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:00:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:01:33,856,856 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:01:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:02:33,954,954 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:02:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:03:33,899,899 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:03:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:04:33,876,876 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:04:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:05:33,869,869 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:05:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:06:33,878,878 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:06:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:07:33,919,919 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:07:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:08:33,923,923 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:08:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:09:33,909,909 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:09:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:10:33,917,917 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:10:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:11:33,858,858 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:11:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:12:33,911,911 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:12:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:13:33,942,942 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:13:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:14:33,888,888 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:14:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:15:33,858,858 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:15:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:16:33,903,903 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:16:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:17:33,880,880 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:17:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:18:33,859,859 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:18:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:19:33,876,876 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:19:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:20:33,895,895 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:20:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:21:33,801,801 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:21:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:22:33,772,772 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:22:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:23:33,775,775 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:23:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:24:33,791,791 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:24:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:25:33,799,799 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:25:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:26:33,853,853 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:26:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:27:33,881,881 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:27:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:28:33,798,798 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:28:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:29:33,769,769 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:29:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:30:33,800,800 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:30:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:31:33,779,779 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:31:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:32:33,808,808 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:32:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:33:33,770,770 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:33:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:34:33,768,768 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:34:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:35:33,753,753 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:35:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:36:33,751,751 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:36:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:37:33,758,758 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:37:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:38:33,785,785 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:38:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:39:33,798,798 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:39:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:40:33,760,760 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:40:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:41:33,755,755 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:41:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:42:33,776,776 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:42:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:43:33,778,778 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:43:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:44:33,753,753 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:44:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:45:33,925,925 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:45:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:46:33,801,801 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:46:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:47:33,801,801 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:47:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:48:33,823,823 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:48:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:49:33,742,742 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:49:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:50:33,858,858 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:50:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:51:33,719,719 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:51:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:52:33,898,898 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:52:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:53:33,721,721 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:53:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:54:33,719,719 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:54:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:55:33,762,762 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:55:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:56:33,725,725 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:56:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:57:33,763,763 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:57:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:58:33,779,779 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:58:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 15:59:33,794,794 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 15:59:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:00:33,800,800 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:00:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:01:33,775,775 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:01:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:02:33,742,742 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:02:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:03:33,785,785 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:03:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:04:33,764,764 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:04:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:05:33,739,739 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:05:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:06:33,729,729 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:06:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:07:33,763,763 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:07:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:08:33,874,874 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:08:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:09:33,988,988 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:09:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:10:33,716,716 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:10:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:11:33,756,756 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:11:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:12:33,715,715 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:12:33] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:13:26,975,975 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:13:26] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:13:30,681,681 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:13:30] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-24 16:23:14,001,001 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/enhanced_template_processor.py', reloading
2025-06-24 16:23:16,384,384 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:23:17,152,152 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:23:17,152,152 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:23:17,156,156 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:23:17,157,157 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:23:17,157,157 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:23:17,157,157 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:23:17,157,157 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:23:17,157,157 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:23:17,158,158 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:23:17,159,159 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:23:17,160,160 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:23:17,160,160 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:23:17,160,160 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:23:17,160,160 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:23:17,202,202 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:23:17,227,227 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:27:25,352,352 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/enhanced_confluence_ai_agent.py', reloading
2025-06-24 16:27:25,482,482 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:27:26,371,371 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:27:26,371,371 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:27:26,372,372 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:27:26,374,374 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:27:26,374,374 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:27:26,375,375 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:27:26,375,375 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:27:26,375,375 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:27:26,376,376 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:27:26,377,377 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:27:26,378,378 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:27:26,378,378 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:27:26,378,378 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:27:26,378,378 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:27:26,415,415 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:27:26,434,434 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:32:28,336,336 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 16:32:28,645,645 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:32:29,582,582 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:32:29,582,582 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:32:29,583,583 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:32:29,585,585 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:32:29,588,588 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:32:29,588,588 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:32:29,588,588 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:32:29,588,588 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:32:29,589,589 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:32:29,590,590 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:32:29,591,591 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:32:29,591,591 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:32:29,591,591 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:32:29,591,591 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:32:29,631,631 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:32:29,649,649 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:35:09,745,745 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 16:35:09,851,851 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:35:10,991,991 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:35:10,991,991 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:35:10,992,992 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:35:10,993,993 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:35:10,994,994 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:35:10,994,994 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:35:10,994,994 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:35:10,994,994 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:35:10,995,995 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:35:10,996,996 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:35:10,996,996 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:35:10,996,996 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:35:10,997,997 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:35:10,997,997 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:35:11,032,032 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:35:11,047,047 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:39:11,146,146 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:11] "GET /dashboard HTTP/1.1" 200 -
2025-06-24 16:39:11,189,189 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:11] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 16:39:11,255,255 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:11] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 16:39:11,293,293 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 16:39:11,303,303 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:39:11,304,304 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:11] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 16:39:11,306,306 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:11] "GET /api/dashboard/stats?_t=1750763351289 HTTP/1.1" 200 -
2025-06-24 16:39:11,308,308 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:11] "GET /api/dashboard/activity?limit=15&_t=1750763351289 HTTP/1.1" 200 -
2025-06-24 16:39:13,103,103 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:39:13,124,124 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:13] "GET / HTTP/1.1" 200 -
2025-06-24 16:39:13,141,141 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:13] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 16:39:13,147,147 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:13] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 16:39:13,152,152 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 16:39:13,153,153 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:39:13,154,154 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:13] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 16:39:40,500,500 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:40] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 16:39:40,518,518 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:39:40] "GET /static/images/favicon.ico HTTP/1.1" 200 -
2025-06-24 16:40:43,323,323 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 16:40:43,324,324 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 16:40:45,679,679 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:40:45,679,679 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:40:45,680,680 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:40:45,683,683 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:40:45,684,684 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:40:45,684,684 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:40:45,684,684 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:40:45,684,684 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:40:45,685,685 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:40:45,686,686 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:40:45,686,686 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:40:45,687,687 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:40:45,687,687 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:40:45,687,687 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:40:46,042,042 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.106.149:5000
2025-06-24 16:40:46,042,042 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 16:40:46,044,044 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:40:46,687,687 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:40:46,687,687 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:40:46,689,689 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:40:46,690,690 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:40:46,690,690 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:40:46,690,690 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:40:46,691,691 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:40:46,691,691 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:40:46,691,691 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:40:46,692,692 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:40:46,693,693 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:40:46,693,693 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:40:46,693,693 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:40:46,693,693 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:40:46,724,724 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:40:46,744,744 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:40:48,779,779 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:40:48,797,797 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:40:48] "GET / HTTP/1.1" 200 -
2025-06-24 16:40:48,831,831 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:40:48] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 16:40:48,832,832 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:40:48] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 16:40:48,926,926 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 16:40:48,929,929 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:40:48,929,929 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:40:48] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 16:40:55,212,212 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:40:55] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 16:40:55,233,233 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:40:55] "[36mGET /static/images/favicon.ico HTTP/1.1[0m" 304 -
2025-06-24 16:44:32,248,248 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 16:44:32,406,406 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:44:33,554,554 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:44:33,554,554 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:44:33,558,558 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:44:33,560,560 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:44:33,561,561 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:44:33,561,561 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:44:33,561,561 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:44:33,561,561 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:44:33,562,562 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:44:33,565,565 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:44:33,565,565 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:44:33,565,565 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:44:33,565,565 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:44:33,565,565 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:44:33,608,608 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:44:33,626,626 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:44:58,206,206 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:44:58,220,220 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:44:58] "GET / HTTP/1.1" 200 -
2025-06-24 16:44:58,348,348 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:44:58] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 16:44:58,348,348 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:44:58] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 16:44:58,373,373 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 16:44:58,374,374 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:44:58,374,374 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:44:58] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 16:45:07,684,684 - __main__ - ERROR - ğŸš¨ CRITICAL ERROR in enhanced generate_confluence: ConfluenceClient.__init__() missing 1 required positional argument: 'url'
2025-06-24 16:45:07,685,685 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:45:07] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 16:45:07,697,697 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:45:07] "[36mGET /static/images/favicon.ico HTTP/1.1[0m" 304 -
2025-06-24 16:45:32,230,230 - __main__ - ERROR - ğŸš¨ CRITICAL ERROR in enhanced generate_confluence: ConfluenceClient.__init__() missing 1 required positional argument: 'url'
2025-06-24 16:45:32,231,231 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:45:32] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 16:45:32,241,241 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 16:45:32] "[36mGET /static/images/favicon.ico HTTP/1.1[0m" 304 -
2025-06-24 16:49:38,046,046 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/enhanced_confluence_ai_agent.py', reloading
2025-06-24 16:49:38,161,161 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:49:39,051,051 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:49:39,052,052 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:49:39,055,055 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:49:39,057,057 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:49:39,066,066 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:49:39,066,066 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:49:39,066,066 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:49:39,067,067 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:49:39,068,068 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:49:39,069,069 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:49:39,070,070 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:49:39,070,070 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:49:39,070,070 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:49:39,070,070 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:49:39,136,136 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:49:39,151,151 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:50:07,415,415 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/enhanced_confluence_ai_agent.py', reloading
2025-06-24 16:50:07,531,531 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:50:08,331,331 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:50:08,331,331 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:50:08,332,332 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:50:08,333,333 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:50:08,334,334 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:50:08,334,334 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:08,334,334 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:08,334,334 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:50:08,335,335 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:50:08,335,335 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:50:08,336,336 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:50:08,336,336 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:08,336,336 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:08,336,336 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:50:08,370,370 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:50:08,390,390 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:50:37,043,043 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 16:50:37,043,043 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 16:50:39,419,419 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:50:39,420,420 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:50:39,421,421 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:50:39,423,423 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:50:39,423,423 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:50:39,423,423 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:39,424,424 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:39,424,424 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:50:39,424,424 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:50:39,426,426 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:50:39,427,427 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:50:39,427,427 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:39,427,427 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:39,427,427 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:50:39,481,481 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.106.149:5000
2025-06-24 16:50:39,482,482 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 16:50:39,484,484 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:50:40,139,139 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:50:40,139,139 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:50:40,140,140 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:50:40,141,141 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:50:40,141,141 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:50:40,141,141 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:40,141,141 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:40,142,142 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:50:40,142,142 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:50:40,143,143 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:50:40,143,143 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:50:40,143,143 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:40,144,144 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:40,144,144 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:50:40,183,183 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:50:40,203,203 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:50:46,216,216 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:50:46,248,248 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:50:46] "GET / HTTP/1.1" 200 -
2025-06-24 16:50:46,297,297 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:50:46] "GET /static/css/style.css HTTP/1.1" 200 -
2025-06-24 16:50:46,538,538 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:50:46] "GET /static/js/app.js HTTP/1.1" 200 -
2025-06-24 16:50:48,250,250 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 16:50:48,251,251 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:50:48,252,252 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:50:48] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 16:50:49,087,087 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:50:49] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-24 16:50:55,861,861 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:55,862,862 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:50:55,862,862 - __main__ - INFO - ğŸš€ Starting enhanced page generation for locker_out on 20250624
2025-06-24 16:50:55,862,862 - __main__ - ERROR - âŒ Enhanced page creation failed: [Errno 2] No such file or directory: 'templates/locker_out.json'
2025-06-24 16:50:55,862,862 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:50:55] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 16:52:42,899,899 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 16:52:43,038,038 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:52:44,364,364 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:52:44,364,364 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:52:44,366,366 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:52:44,367,367 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:52:44,367,367 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:52:44,367,367 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:52:44,367,367 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:52:44,367,367 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:52:44,368,368 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:52:44,369,369 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:52:44,370,370 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:52:44,370,370 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:52:44,370,370 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:52:44,370,370 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:52:44,412,412 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:52:44,428,428 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:52:47,850,850 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 16:52:48,077,077 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:52:49,142,142 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:52:49,142,142 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:52:49,143,143 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:52:49,144,144 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:52:49,145,145 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:52:49,145,145 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:52:49,145,145 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:52:49,145,145 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:52:49,146,146 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:52:49,147,147 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:52:49,147,147 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:52:49,147,147 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:52:49,147,147 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:52:49,147,147 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:52:49,189,189 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:52:49,204,204 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:52:53,363,363 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:52:53,387,387 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:52:53] "GET / HTTP/1.1" 200 -
2025-06-24 16:52:53,824,824 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:52:53] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 16:52:54,646,646 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:52:54] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 16:52:54,719,719 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 16:52:54,719,719 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:52:54,719,719 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:52:54] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 16:53:00,241,241 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 16:53:00.241280
2025-06-24 16:53:00,242,242 - __main__ - INFO - Request from user: 10.82.106.149
2025-06-24 16:53:00,242,242 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T16:53:00.241280
2025-06-24 16:53:00,242,242 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:53:00,242,242 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-24 16:53:00,244,244 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-24 16:53:00,245,245 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-24 16:53:00,245,245 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 16:53:00,245,245 - __main__ - INFO -    operation_type: locker_out
2025-06-24 16:53:00,245,245 - __main__ - INFO -    template_file: locker_out.json
2025-06-24 16:53:00,245,245 - __main__ - INFO -    operation_date: 20250624
2025-06-24 16:53:00,245,245 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 16:53:00,245,245 - __main__ - INFO -    source: api_request
2025-06-24 16:53:00,245,245 - __main__ - INFO -    template_data present: True
2025-06-24 16:53:00,245,245 - __main__ - INFO - Starting AI agent processing
2025-06-24 16:53:00,246,246 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.106.149, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'heading h3': 'Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-24 16:53:00,331,331 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 16:53:00,334,334 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 16:53:00,335,335 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 16:53:06,184,184 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 5.94s
2025-06-24 16:53:06,184,184 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-24 16:53:06,184,184 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 16:53:15,307,307 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 6 steps in 9.12s
2025-06-24 16:53:15,309,309 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:53:15,310,310 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-24 16:53:15,310,310 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-24 16:53:15,311,311 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-24 16:53:15,311,311 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_165315_30982', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'heading h3': 'Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-24 16:53:15.311391
2025-06-24 16:53:31,768,768 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 16:53:31,770,770 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_165315_30982
2025-06-24 16:53:31,771,771 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_165315_30982_165331_991
2025-06-24 16:53:31,771,771 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 21880 characters
2025-06-24 16:53:31,772,772 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_165315_30982_165331_991, space: SCG, parent ID: 5880757738 in 16.46s
2025-06-24 16:53:31,773,773 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:53:31,773,773 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:53:31,773,773 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_165315_30982_165331_991' in space 'SCG'
2025-06-24 16:53:31,774,774 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_165315_30982_165331_991"
2025-06-24 16:53:33,371,371 - utils.confluence_client - ERROR - âŒ Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/confluence_client.py", line 80, in create_page
    response = self.confluence.create_page(
        space=space_key,
    ...<3 lines>...
        representation='storage'
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 989, in create_page
    response = self.post(url, data=data)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 713, in post
    response = self.request(
        "POST",
    ...<8 lines>...
        advanced_mode=advanced_mode,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 445, in request
    self.raise_for_status(response)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 3926, in raise_for_status
    raise HTTPError(error_msg, response=response)
requests.exceptions.HTTPError: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]

2025-06-24 16:53:33,373,373 - utils.ai_agent - ERROR - ğŸ¯ Failed to create Confluence page: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 16:53:33,373,373 - utils.ai_agent - ERROR - ğŸ¤– Agent failure: Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 16:53:33,374,374 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 33.13s
2025-06-24 16:53:33,376,376 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 16:53:33,376,376 - __main__ - ERROR - ğŸ“Š Failed to store failed attempt: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 16:53:33,376,376 - __main__ - ERROR - ğŸ¤– Request processing failed in 33.14s
2025-06-24 16:53:33,376,376 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 16:53:33,376,376 - __main__ - INFO - ğŸ“Š Generation completed in 33.14s
2025-06-24 16:53:33,377,377 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:53:33] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 16:56:02,412,412 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 16:56:04,539,539 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:56:05,428,428 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:56:05,429,429 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:56:05,430,430 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:56:05,432,432 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:56:05,432,432 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:56:05,432,432 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:05,432,432 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:05,432,432 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:56:05,433,433 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:56:05,435,435 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:56:05,437,437 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:56:05,437,437 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:05,437,437 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:05,437,437 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:56:05,476,476 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:56:05,492,492 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:56:16,424,424 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 16:56:16,427,427 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 16:56:19,221,221 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:56:19,222,222 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:56:19,223,223 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:56:19,225,225 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:56:19,226,226 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:56:19,226,226 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:19,226,226 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:19,226,226 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:56:19,227,227 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:56:19,229,229 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:56:19,230,230 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:56:19,230,230 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:19,230,230 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:19,230,230 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:56:19,293,293 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.106.149:5000
2025-06-24 16:56:19,293,293 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 16:56:19,295,295 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:56:20,016,016 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:56:20,016,016 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:56:20,019,019 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:56:20,020,020 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:56:20,021,021 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:56:20,021,021 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:20,021,021 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:20,021,021 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:56:20,022,022 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:56:20,023,023 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:56:20,024,024 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:56:20,024,024 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:20,024,024 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:56:20,024,024 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:56:20,060,060 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:56:20,090,090 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:56:22,405,405 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:56:22,417,417 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:56:22] "GET / HTTP/1.1" 200 -
2025-06-24 16:56:22,454,454 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:56:22] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 16:56:22,477,477 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:56:22] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 16:56:22,594,594 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 16:56:22,594,594 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:56:22,594,594 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:56:22] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 16:56:31,471,471 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 16:56:31.471436
2025-06-24 16:56:31,472,472 - __main__ - INFO - Request from user: 10.82.106.149
2025-06-24 16:56:31,472,472 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T16:56:31.471436
2025-06-24 16:56:31,472,472 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:56:31,472,472 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-24 16:56:31,473,473 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-24 16:56:31,473,473 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-24 16:56:31,473,473 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 16:56:31,473,473 - __main__ - INFO -    operation_type: locker_out
2025-06-24 16:56:31,473,473 - __main__ - INFO -    template_file: locker_out.json
2025-06-24 16:56:31,473,473 - __main__ - INFO -    operation_date: 20250624
2025-06-24 16:56:31,473,473 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 16:56:31,473,473 - __main__ - INFO -    source: api_request
2025-06-24 16:56:31,473,473 - __main__ - INFO -    template_data present: True
2025-06-24 16:56:31,473,473 - __main__ - INFO - Starting AI agent processing
2025-06-24 16:56:31,474,474 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.106.149, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'heading h3': 'Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-24 16:56:31,533,533 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 16:56:31,536,536 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 16:56:31,537,537 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 16:56:38,426,426 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: execute locker S-OUT operation on 2025-06-24 (confidence: 0.98) in 6.95s
2025-06-24 16:56:38,427,427 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: execute locker S-OUT operation on 2025-06-24
2025-06-24 16:56:38,427,427 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 16:56:48,771,771 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 10.34s
2025-06-24 16:56:48,772,772 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:56:48,773,773 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-24 16:56:48,773,773 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-24 16:56:48,773,773 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-24 16:56:48,773,773 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_165648_77297', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'heading h3': 'Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-24 16:56:48.773607
2025-06-24 16:57:05,930,930 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 16:57:05,932,932 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_165648_77297
2025-06-24 16:57:05,932,932 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_165648_77297_165705_513
2025-06-24 16:57:05,932,932 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 21881 characters
2025-06-24 16:57:05,933,933 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_165648_77297_165705_513, space: SCG, parent ID: 5880757738 in 17.16s
2025-06-24 16:57:05,937,937 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:57:05,939,939 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:57:05,939,939 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_165648_77297_165705_513' in space 'SCG'
2025-06-24 16:57:05,939,939 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_165648_77297_165705_513"
2025-06-24 16:57:07,528,528 - utils.confluence_client - ERROR - âŒ Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/confluence_client.py", line 80, in create_page
    response = self.confluence.create_page(
        space=space_key,
    ...<3 lines>...
        representation='storage'
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 989, in create_page
    response = self.post(url, data=data)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 713, in post
    response = self.request(
        "POST",
    ...<8 lines>...
        advanced_mode=advanced_mode,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 445, in request
    self.raise_for_status(response)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 3926, in raise_for_status
    raise HTTPError(error_msg, response=response)
requests.exceptions.HTTPError: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]

2025-06-24 16:57:07,531,531 - utils.ai_agent - ERROR - ğŸ¯ Failed to create Confluence page: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 16:57:07,531,531 - utils.ai_agent - ERROR - ğŸ¤– Agent failure: Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 16:57:07,533,533 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 36.06s
2025-06-24 16:57:07,535,535 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 16:57:07,535,535 - __main__ - ERROR - ğŸ“Š Failed to store failed attempt: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 16:57:07,535,535 - __main__ - ERROR - ğŸ¤– Request processing failed in 36.06s
2025-06-24 16:57:07,535,535 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 16:57:07,536,536 - __main__ - INFO - ğŸ“Š Generation completed in 36.06s
2025-06-24 16:57:07,536,536 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:57:07] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 16:59:17,945,945 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 16:59:20,145,145 - werkzeug - INFO -  * Restarting with stat
2025-06-24 16:59:20,975,975 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 16:59:20,975,975 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:59:20,977,977 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:59:20,979,979 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:59:20,980,980 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:59:20,980,980 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:59:20,980,980 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:59:20,980,980 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:59:20,981,981 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 16:59:20,982,982 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 16:59:20,983,983 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:59:20,983,983 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 16:59:20,983,983 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 16:59:20,983,983 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 16:59:21,013,013 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 16:59:21,038,038 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 16:59:27,965,965 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:59:27,991,991 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:59:27] "GET / HTTP/1.1" 200 -
2025-06-24 16:59:28,136,136 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:59:28] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 16:59:28,266,266 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:59:28] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 16:59:28,802,802 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 16:59:28,802,802 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 16:59:28,803,803 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 16:59:28] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 16:59:34,316,316 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 16:59:34.316183
2025-06-24 16:59:34,316,316 - __main__ - INFO - Request from user: 10.82.106.149
2025-06-24 16:59:34,319,319 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T16:59:34.316183
2025-06-24 16:59:34,320,320 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 16:59:34,321,321 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-24 16:59:34,322,322 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-24 16:59:34,323,323 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-24 16:59:34,323,323 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 16:59:34,323,323 - __main__ - INFO -    operation_type: locker_out
2025-06-24 16:59:34,323,323 - __main__ - INFO -    template_file: locker_out.json
2025-06-24 16:59:34,323,323 - __main__ - INFO -    operation_date: 20250624
2025-06-24 16:59:34,323,323 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 16:59:34,323,323 - __main__ - INFO -    source: api_request
2025-06-24 16:59:34,323,323 - __main__ - INFO -    template_data present: True
2025-06-24 16:59:34,324,324 - __main__ - INFO - Starting AI agent processing
2025-06-24 16:59:34,324,324 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.106.149, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'heading h3': 'Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-24 16:59:34,376,376 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 16:59:34,390,390 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 16:59:34,397,397 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 16:59:40,656,656 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 6.33s
2025-06-24 16:59:40,665,665 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-24 16:59:40,667,667 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 16:59:48,931,931 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 5 steps in 8.27s
2025-06-24 16:59:48,932,932 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 16:59:48,934,934 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-24 16:59:48,934,934 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-24 16:59:48,936,936 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-24 16:59:48,937,937 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_165948_93313', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'heading h3': 'Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-24 16:59:48.937140
2025-06-24 17:00:05,807,807 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 17:00:05,810,810 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_165948_93313
2025-06-24 17:00:05,810,810 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_165948_93313_170005_410
2025-06-24 17:00:05,810,810 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 21881 characters
2025-06-24 17:00:05,811,811 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_165948_93313_170005_410, space: SCG, parent ID: 5880757738 in 16.88s
2025-06-24 17:00:05,812,812 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:05,812,812 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:05,812,812 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_165948_93313_170005_410' in space 'SCG'
2025-06-24 17:00:05,812,812 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_165948_93313_170005_410"
2025-06-24 17:00:07,137,137 - utils.confluence_client - ERROR - âŒ Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/confluence_client.py", line 80, in create_page
    response = self.confluence.create_page(
        space=space_key,
    ...<3 lines>...
        representation='storage'
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 989, in create_page
    response = self.post(url, data=data)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 713, in post
    response = self.request(
        "POST",
    ...<8 lines>...
        advanced_mode=advanced_mode,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 445, in request
    self.raise_for_status(response)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 3926, in raise_for_status
    raise HTTPError(error_msg, response=response)
requests.exceptions.HTTPError: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]

2025-06-24 17:00:07,139,139 - utils.ai_agent - ERROR - ğŸ¯ Failed to create Confluence page: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 17:00:07,139,139 - utils.ai_agent - ERROR - ğŸ¤– Agent failure: Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 17:00:07,141,141 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 32.82s
2025-06-24 17:00:07,142,142 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:00:07,142,142 - __main__ - ERROR - ğŸ“Š Failed to store failed attempt: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 17:00:07,142,142 - __main__ - ERROR - ğŸ¤– Request processing failed in 32.83s
2025-06-24 17:00:07,143,143 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:00:07,143,143 - __main__ - INFO - ğŸ“Š Generation completed in 32.83s
2025-06-24 17:00:07,143,143 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 17:00:07] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 17:00:34,022,022 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 17:00:34,022,022 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 17:00:38,208,208 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 17:00:38,208,208 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:00:38,209,209 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:00:38,211,211 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:00:38,211,211 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:00:38,211,211 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:38,212,212 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:38,212,212 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:00:38,213,213 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:00:38,216,216 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:00:38,217,217 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:00:38,217,217 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:38,217,217 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:38,217,217 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:00:38,278,278 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.106.149:5000
2025-06-24 17:00:38,279,279 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 17:00:38,280,280 - werkzeug - INFO -  * Restarting with stat
2025-06-24 17:00:38,933,933 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 17:00:38,933,933 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:00:38,935,935 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:00:38,936,936 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:00:38,936,936 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:00:38,937,937 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:38,937,937 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:38,937,937 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:00:38,937,937 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:00:38,939,939 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:00:38,939,939 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:00:38,939,939 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:38,939,939 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:00:38,939,939 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:00:38,973,973 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 17:00:38,991,991 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 17:00:41,753,753 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:00:41,763,763 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:00:41] "GET / HTTP/1.1" 200 -
2025-06-24 17:00:41,788,788 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:00:41] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 17:00:41,789,789 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:00:41] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 17:00:41,878,878 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 17:00:41,880,880 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:00:41,883,883 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:00:41] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 17:00:48,028,028 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 17:00:48.028197
2025-06-24 17:00:48,028,028 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-24 17:00:48,028,028 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T17:00:48.028197
2025-06-24 17:00:48,028,028 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:00:48,028,028 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-24 17:00:48,029,029 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:00:48,029,029 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:00:48,030,030 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 17:00:48,030,030 - __main__ - INFO -    operation_type: locker_out
2025-06-24 17:00:48,030,030 - __main__ - INFO -    template_file: locker_out.json
2025-06-24 17:00:48,030,030 - __main__ - INFO -    operation_date: 20250624
2025-06-24 17:00:48,030,030 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 17:00:48,030,030 - __main__ - INFO -    source: api_request
2025-06-24 17:00:48,030,030 - __main__ - INFO -    template_data present: True
2025-06-24 17:00:48,030,030 - __main__ - INFO - Starting AI agent processing
2025-06-24 17:00:48,030,030 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'heading h3': 'Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-24 17:00:48,053,053 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 17:00:48,056,056 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 17:00:48,058,058 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 17:00:53,774,774 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 5.74s
2025-06-24 17:00:53,775,775 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-24 17:00:53,776,776 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 17:01:02,176,176 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 8.40s
2025-06-24 17:01:02,177,177 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:01:02,178,178 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-24 17:01:02,178,178 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-24 17:01:02,179,179 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-24 17:01:02,180,180 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_170102_17775', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'heading h3': 'Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-24 17:01:02.180457
2025-06-24 17:01:17,903,903 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 17:01:17,906,906 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_170102_17775
2025-06-24 17:01:17,906,906 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_170102_17775_170117_211
2025-06-24 17:01:17,906,906 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 21881 characters
2025-06-24 17:01:17,906,906 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_170102_17775_170117_211, space: SCG, parent ID: 5880757738 in 15.73s
2025-06-24 17:01:17,907,907 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:01:17,907,907 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:01:17,907,907 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_170102_17775_170117_211' in space 'SCG'
2025-06-24 17:01:17,907,907 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_170102_17775_170117_211"
2025-06-24 17:01:19,436,436 - utils.confluence_client - ERROR - âŒ Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/confluence_client.py", line 80, in create_page
    response = self.confluence.create_page(
        space=space_key,
    ...<3 lines>...
        representation='storage'
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 989, in create_page
    response = self.post(url, data=data)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 713, in post
    response = self.request(
        "POST",
    ...<8 lines>...
        advanced_mode=advanced_mode,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 445, in request
    self.raise_for_status(response)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 3926, in raise_for_status
    raise HTTPError(error_msg, response=response)
requests.exceptions.HTTPError: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]

2025-06-24 17:01:19,438,438 - utils.ai_agent - ERROR - ğŸ¯ Failed to create Confluence page: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 17:01:19,438,438 - utils.ai_agent - ERROR - ğŸ¤– Agent failure: Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 17:01:19,439,439 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 31.41s
2025-06-24 17:01:19,440,440 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:01:19,440,440 - __main__ - ERROR - ğŸ“Š Failed to store failed attempt: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 17:01:19,441,441 - __main__ - ERROR - ğŸ¤– Request processing failed in 31.41s
2025-06-24 17:01:19,441,441 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:01:19,441,441 - __main__ - INFO - ğŸ“Š Generation completed in 31.41s
2025-06-24 17:01:19,441,441 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:01:19] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 17:01:19,459,459 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:01:19] "[36mGET /static/images/favicon.ico HTTP/1.1[0m" 304 -
2025-06-24 17:02:15,132,132 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:02:15,136,136 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:02:15] "GET / HTTP/1.1" 200 -
2025-06-24 17:02:15,166,166 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:02:15] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 17:02:15,167,167 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:02:15] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 17:02:15,176,176 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 17:02:15,177,177 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:02:15,178,178 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:02:15] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 17:02:20,359,359 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 17:02:20.359531
2025-06-24 17:02:20,361,361 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-24 17:02:20,361,361 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T17:02:20.359531
2025-06-24 17:02:20,361,361 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:02:20,362,362 - utils.template_processor - INFO - Attempting to load template: page_templates/s_out.json
2025-06-24 17:02:20,368,368 - utils.template_processor - INFO - Successfully loaded template: s_out.json
2025-06-24 17:02:20,369,369 - __main__ - INFO - Successfully loaded template: s_out.json
2025-06-24 17:02:20,369,369 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 17:02:20,371,371 - __main__ - INFO -    operation_type: s_out
2025-06-24 17:02:20,371,371 - __main__ - INFO -    template_file: s_out.json
2025-06-24 17:02:20,371,371 - __main__ - INFO -    operation_date: 20250624
2025-06-24 17:02:20,371,371 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 17:02:20,371,371 - __main__ - INFO -    source: api_request
2025-06-24 17:02:20,371,371 - __main__ - INFO -    template_data present: True
2025-06-24 17:02:20,372,372 - __main__ - INFO - Starting AI agent processing
2025-06-24 17:02:20,372,372 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 's out for today', 'template_file': 's_out.json', 'operation_type': 's_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-24 17:02:20,435,435 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 17:02:20,437,437 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 17:02:20,444,444 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 17:02:23,921,921 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate S-OUT operation document (confidence: 0.98) in 3.55s
2025-06-24 17:02:23,922,922 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate S-OUT operation document
2025-06-24 17:02:23,923,923 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 17:02:33,988,988 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 6 steps in 10.07s
2025-06-24 17:02:33,989,989 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:02:33,990,990 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-24 17:02:33,990,990 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-24 17:02:33,990,990 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_OUT page for space SCP...
2025-06-24 17:02:33,991,991 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_out, template_data={'title': 'SCP vShop_ingestion_20250624_170233_99001', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-24 17:02:33.990979
2025-06-24 17:02:49,140,140 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 17:02:49,142,142 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250624_170233_99001
2025-06-24 17:02:49,142,142 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250624_170233_99001_170249_314
2025-06-24 17:02:49,142,142 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 14292 characters
2025-06-24 17:02:49,143,143 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250624_170233_99001_170249_314, space: SCP, parent ID: 5890230619 in 15.15s
2025-06-24 17:02:49,143,143 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:02:49,143,143 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:02:49,143,143 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250624_170233_99001_170249_314' in space 'SCP'
2025-06-24 17:02:49,143,143 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250624_170233_99001_170249_314"
2025-06-24 17:02:55,249,249 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5918032237, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250624_170233_99001_170249_314
2025-06-24 17:02:55,267,267 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 34.90s
2025-06-24 17:02:55,270,270 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:02:55,270,270 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 17:02:55,273,273 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-24 17:02:55,273,273 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 34.91s
2025-06-24 17:02:55,273,273 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:02:55,274,274 - __main__ - INFO - ğŸ“Š Generation completed in 34.91s
2025-06-24 17:02:55,274,274 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:02:55] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-24 17:04:35,630,630 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 17:04:35.630046
2025-06-24 17:04:35,631,631 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-24 17:04:35,631,631 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T17:04:35.630046
2025-06-24 17:04:35,631,631 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:04:35,631,631 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-24 17:04:35,632,632 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:04:35,632,632 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:04:35,632,632 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 17:04:35,632,632 - __main__ - INFO -    operation_type: locker_out
2025-06-24 17:04:35,632,632 - __main__ - INFO -    template_file: locker_out.json
2025-06-24 17:04:35,632,632 - __main__ - INFO -    operation_date: 20250624
2025-06-24 17:04:35,632,632 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 17:04:35,632,632 - __main__ - INFO -    source: api_request
2025-06-24 17:04:35,632,632 - __main__ - INFO -    template_data present: True
2025-06-24 17:04:35,632,632 - __main__ - INFO - Starting AI agent processing
2025-06-24 17:04:35,632,632 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-24 17:04:35,693,693 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 17:04:35,696,696 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 17:04:35,700,700 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 17:04:38,499,499 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 2.87s
2025-06-24 17:04:38,501,501 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-24 17:04:38,501,501 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 17:04:48,225,225 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 9.72s
2025-06-24 17:04:48,226,226 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:04:48,227,227 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-24 17:04:48,227,227 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-24 17:04:48,228,228 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-24 17:04:48,228,228 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_170448_22718', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading h1': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': 'SRE: \n@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading h1': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments_steps': 'Check for the comments', 'ticket_comments_stg': '{status:SKIP}', 'ticket_comments_prod': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-24 17:04:48.228178
2025-06-24 17:05:08,078,078 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 17:05:08,082,082 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_170448_22718
2025-06-24 17:05:08,082,082 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_170448_22718_170508_452
2025-06-24 17:05:08,082,082 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 21881 characters
2025-06-24 17:05:08,082,082 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_170448_22718_170508_452, space: SCG, parent ID: 5880757738 in 19.86s
2025-06-24 17:05:08,083,083 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:05:08,083,083 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:05:08,083,083 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_170448_22718_170508_452' in space 'SCG'
2025-06-24 17:05:08,083,083 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_170448_22718_170508_452"
2025-06-24 17:05:29,217,217 - utils.confluence_client - ERROR - âŒ Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/confluence_client.py", line 80, in create_page
    response = self.confluence.create_page(
        space=space_key,
    ...<3 lines>...
        representation='storage'
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 989, in create_page
    response = self.post(url, data=data)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 713, in post
    response = self.request(
        "POST",
    ...<8 lines>...
        advanced_mode=advanced_mode,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 445, in request
    self.raise_for_status(response)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 3926, in raise_for_status
    raise HTTPError(error_msg, response=response)
requests.exceptions.HTTPError: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]

2025-06-24 17:05:29,218,218 - utils.ai_agent - ERROR - ğŸ¯ Failed to create Confluence page: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 17:05:29,218,218 - utils.ai_agent - ERROR - ğŸ¤– Agent failure: Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 17:05:29,220,220 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 53.59s
2025-06-24 17:05:29,221,221 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:05:29,221,221 - __main__ - ERROR - ğŸ“Š Failed to store failed attempt: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 17:05:29,221,221 - __main__ - ERROR - ğŸ¤– Request processing failed in 53.59s
2025-06-24 17:05:29,222,222 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:05:29,222,222 - __main__ - INFO - ğŸ“Š Generation completed in 53.59s
2025-06-24 17:05:29,222,222 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:05:29] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 17:05:29,244,244 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:05:29] "[36mGET /static/images/favicon.ico HTTP/1.1[0m" 304 -
2025-06-24 17:07:17,819,819 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:07:17,821,821 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:07:17] "GET / HTTP/1.1" 200 -
2025-06-24 17:07:17,850,850 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:07:17] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 17:07:17,850,850 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:07:17] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 17:07:17,855,855 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 17:07:17,855,855 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:07:17,855,855 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:07:17] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 17:07:25,098,098 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 17:07:25.098106
2025-06-24 17:07:25,098,098 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-24 17:07:25,098,098 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T17:07:25.098106
2025-06-24 17:07:25,098,098 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:07:25,098,098 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-24 17:07:25,100,100 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:07:25,101,101 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:07:25,101,101 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 17:07:25,102,102 - __main__ - INFO -    operation_type: locker_out
2025-06-24 17:07:25,102,102 - __main__ - INFO -    template_file: locker_out.json
2025-06-24 17:07:25,102,102 - __main__ - INFO -    operation_date: 20250624
2025-06-24 17:07:25,102,102 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 17:07:25,102,102 - __main__ - INFO -    source: api_request
2025-06-24 17:07:25,102,102 - __main__ - INFO -    template_data present: True
2025-06-24 17:07:25,102,102 - __main__ - INFO - Starting AI agent processing
2025-06-24 17:07:25,104,104 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-24 17:07:25,171,171 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 17:07:25,174,174 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 17:07:25,177,177 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 17:07:29,072,072 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 3.97s
2025-06-24 17:07:29,073,073 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-24 17:07:29,074,074 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 17:07:38,515,515 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 9.44s
2025-06-24 17:07:38,517,517 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:07:38,520,520 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-24 17:07:38,520,520 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-24 17:07:38,521,521 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-24 17:07:38,521,521 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_170738_51732', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'BU request :': '<p>S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢</p>\n<p>Locker List: <a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=1734092837" rel="nofollow">ï¼ˆç§»ç®¡æ¸ˆã¿ï¼‰ç¨¼åƒä¸­ãƒ­ãƒƒã‚«ãƒ¼/ãƒ­ãƒƒã‚«ãƒ¼ID\u3000ä¸€è¦§</a></p>\n<p><a href="https://rak.app.box.com/s/vr361bcqgvahihi9j3qak1uk99conv7h" class="external-link" rel="nofollow">Box File Link</a></p>', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-24 17:07:38.521267
2025-06-24 17:07:59,392,392 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 17:07:59,394,394 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_170738_51732
2025-06-24 17:07:59,395,395 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_170738_51732_170759_500
2025-06-24 17:07:59,395,395 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 21870 characters
2025-06-24 17:07:59,396,396 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_170738_51732_170759_500, space: SCG, parent ID: 5880757738 in 20.88s
2025-06-24 17:07:59,396,396 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:07:59,397,397 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:07:59,397,397 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_170738_51732_170759_500' in space 'SCG'
2025-06-24 17:07:59,397,397 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_170738_51732_170759_500"
2025-06-24 17:08:00,922,922 - utils.confluence_client - ERROR - âŒ Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/confluence_client.py", line 80, in create_page
    response = self.confluence.create_page(
        space=space_key,
    ...<3 lines>...
        representation='storage'
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 989, in create_page
    response = self.post(url, data=data)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 713, in post
    response = self.request(
        "POST",
    ...<8 lines>...
        advanced_mode=advanced_mode,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/rest_client.py", line 445, in request
    self.raise_for_status(response)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/atlassian/confluence.py", line 3926, in raise_for_status
    raise HTTPError(error_msg, response=response)
requests.exceptions.HTTPError: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]

2025-06-24 17:08:00,924,924 - utils.ai_agent - ERROR - ğŸ¯ Failed to create Confluence page: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 17:08:00,924,924 - utils.ai_agent - ERROR - ğŸ¤– Agent failure: Page creation failed: Error parsing xhtml: Unexpected '<'  in attribute value
 at [row,col {unknown-source}]: [48,219]
2025-06-24 17:08:00,925,925 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 35.82s
2025-06-24 17:08:00,927,927 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:08:00,927,927 - __main__ - ERROR - ğŸ“Š Failed to store failed attempt: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 17:08:00,927,927 - __main__ - ERROR - ğŸ¤– Request processing failed in 35.83s
2025-06-24 17:08:00,927,927 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:08:00,927,927 - __main__ - INFO - ğŸ“Š Generation completed in 35.83s
2025-06-24 17:08:00,927,927 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:08:00] "[35m[1mPOST /generate_confluence HTTP/1.1[0m" 500 -
2025-06-24 17:08:00,952,952 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:08:00] "[36mGET /static/images/favicon.ico HTTP/1.1[0m" 304 -
2025-06-24 17:09:36,415,415 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 17:09:36,419,419 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 17:09:39,808,808 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 17:09:39,809,809 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:09:39,810,810 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:09:39,812,812 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:09:39,812,812 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:09:39,812,812 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:09:39,812,812 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:09:39,812,812 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:09:39,813,813 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:09:39,814,814 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:09:39,817,817 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:09:39,817,817 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:09:39,817,817 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:09:39,817,817 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:09:40,173,173 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.106.149:5000
2025-06-24 17:09:40,173,173 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 17:09:40,175,175 - werkzeug - INFO -  * Restarting with stat
2025-06-24 17:09:40,762,762 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 17:09:40,762,762 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:09:40,763,763 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:09:40,764,764 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:09:40,765,765 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:09:40,765,765 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:09:40,765,765 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:09:40,765,765 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:09:40,766,766 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:09:40,767,767 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:09:40,767,767 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:09:40,767,767 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:09:40,768,768 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:09:40,768,768 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:09:40,797,797 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 17:09:40,820,820 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 17:09:55,587,587 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:09:55,599,599 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 17:09:55] "GET / HTTP/1.1" 200 -
2025-06-24 17:09:55,638,638 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 17:09:55] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 17:09:55,732,732 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 17:09:55] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 17:09:55,751,751 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 17:09:55,752,752 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:09:55,752,752 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 17:09:55] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 17:10:02,073,073 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 17:10:02.072908
2025-06-24 17:10:02,081,081 - __main__ - INFO - Request from user: 10.82.106.149
2025-06-24 17:10:02,082,082 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T17:10:02.072908
2025-06-24 17:10:02,082,082 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 17:10:02,082,082 - __main__ - INFO -    operation_type: s_out
2025-06-24 17:10:02,082,082 - __main__ - INFO -    template_file: 
2025-06-24 17:10:02,083,083 - __main__ - INFO -    operation_date: 20250624
2025-06-24 17:10:02,083,083 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 17:10:02,085,085 - __main__ - INFO -    source: api_request
2025-06-24 17:10:02,085,085 - __main__ - INFO -    template_data present: False
2025-06-24 17:10:02,085,085 - __main__ - INFO - Starting AI agent processing
2025-06-24 17:10:02,085,085 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.106.149, input: {'llm_prompt': 'locker for today', 'template_file': '', 'operation_type': 's_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': None}
2025-06-24 17:10:02,087,087 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 17:10:02,092,092 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 17:10:02,099,099 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 17:10:07,366,366 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Retrieve locker information for today (confidence: 0.98) in 5.28s
2025-06-24 17:10:07,369,369 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Retrieve locker information for today
2025-06-24 17:10:07,369,369 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 17:10:11,787,787 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 4.42s
2025-06-24 17:10:11,787,787 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:10:11,788,788 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-24 17:10:11,788,788 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-24 17:10:11,788,788 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_OUT page for space SCP...
2025-06-24 17:10:11,788,788 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_out, template_data=None,start_time=2025-06-24 17:10:11.788472
2025-06-24 17:10:16,646,646 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 17:10:16,650,650 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Generated fallback title: S_OUT_20250624
2025-06-24 17:10:16,650,650 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: S_OUT_20250624_171016_960
2025-06-24 17:10:16,651,651 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 1173 characters
2025-06-24 17:10:16,651,651 - utils.ai_agent - INFO - ğŸ¯ Generated page title: S_OUT_20250624_171016_960, space: SCP, parent ID: 5890230619 in 4.86s
2025-06-24 17:10:16,651,651 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:10:16,651,651 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:10:16,651,651 - utils.confluence_client - INFO - ğŸ“ Creating page: 'S_OUT_20250624_171016_960' in space 'SCP'
2025-06-24 17:10:16,651,651 - atlassian.confluence - INFO - Creating page "SCP" -> "S_OUT_20250624_171016_960"
2025-06-24 17:10:18,231,231 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5918032269, URL=https://confluence.rakuten-it.com/confluence/display/SCP/S_OUT_20250624_171016_960
2025-06-24 17:10:18,238,238 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 16.15s
2025-06-24 17:10:18,240,240 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:10:18,241,241 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 17:10:18,246,246 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-24 17:10:18,246,246 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 16.17s
2025-06-24 17:10:18,247,247 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:10:18,249,249 - __main__ - INFO - ğŸ“Š Generation completed in 16.17s
2025-06-24 17:10:18,251,251 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 17:10:18] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-24 17:11:04,628,628 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 17:11:04.628565
2025-06-24 17:11:04,630,630 - __main__ - INFO - Request from user: 10.82.106.149
2025-06-24 17:11:04,630,630 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T17:11:04.628565
2025-06-24 17:11:04,631,631 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:11:04,631,631 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-24 17:11:04,640,640 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:11:04,641,641 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:11:04,642,642 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 17:11:04,642,642 - __main__ - INFO -    operation_type: locker_out
2025-06-24 17:11:04,642,642 - __main__ - INFO -    template_file: locker_out.json
2025-06-24 17:11:04,642,642 - __main__ - INFO -    operation_date: 20250624
2025-06-24 17:11:04,642,642 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 17:11:04,642,642 - __main__ - INFO -    source: api_request
2025-06-24 17:11:04,642,642 - __main__ - INFO -    template_data present: True
2025-06-24 17:11:04,642,642 - __main__ - INFO - Starting AI agent processing
2025-06-24 17:11:04,642,642 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.82.106.149, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-24 17:11:04,690,690 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 17:11:04,693,693 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 17:11:04,698,698 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 17:11:07,112,112 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: execute locker S-OUT operation on 2025-06-24 (confidence: 0.98) in 2.47s
2025-06-24 17:11:07,112,112 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: execute locker S-OUT operation on 2025-06-24
2025-06-24 17:11:07,112,112 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 17:11:15,537,537 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 5 steps in 8.43s
2025-06-24 17:11:15,538,538 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:11:15,538,538 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-24 17:11:15,539,539 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-24 17:11:15,539,539 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-24 17:11:15,539,539 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_171115_53865', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-24 17:11:15.539326
2025-06-24 17:11:30,529,529 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 17:11:30,530,530 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_171115_53865
2025-06-24 17:11:30,530,530 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_171115_53865_171130_538
2025-06-24 17:11:30,530,530 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-24 17:11:30,530,530 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_171115_53865_171130_538, space: SCG, parent ID: 5880757738 in 14.99s
2025-06-24 17:11:30,530,530 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:11:30,531,531 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:11:30,531,531 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_171115_53865_171130_538' in space 'SCG'
2025-06-24 17:11:30,531,531 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_171115_53865_171130_538"
2025-06-24 17:11:32,332,332 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5917195029, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250624_171115_53865_171130_538
2025-06-24 17:11:32,340,340 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 27.70s
2025-06-24 17:11:32,341,341 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:11:32,341,341 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 17:11:32,342,342 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-24 17:11:32,343,343 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 27.71s
2025-06-24 17:11:32,344,344 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:11:32,344,344 - __main__ - INFO - ğŸ“Š Generation completed in 27.72s
2025-06-24 17:11:32,344,344 - werkzeug - INFO - 10.82.106.149 - - [24/Jun/2025 17:11:32] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-24 17:15:18,671,671 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py', reloading
2025-06-24 17:15:20,905,905 - werkzeug - INFO -  * Restarting with stat
2025-06-24 17:15:21,024,024 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 17:15:21,025,025 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 17:28:20,354,354 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 17:28:20,355,355 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:28:20,358,358 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:28:20,360,360 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:28:20,361,361 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:28:20,361,361 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:28:20,361,361 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:28:20,361,361 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:28:20,362,362 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:28:20,364,364 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:28:20,366,366 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:28:20,366,366 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:28:20,366,366 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:28:20,366,366 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:28:20,424,424 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.82.106.149:5000
2025-06-24 17:28:20,425,425 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-24 17:28:20,425,425 - werkzeug - INFO -  * Restarting with stat
2025-06-24 17:28:21,022,022 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-24 17:28:21,022,022 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:28:21,024,024 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:28:21,025,025 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:28:21,025,025 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:28:21,025,025 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:28:21,026,026 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:28:21,026,026 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:28:21,026,026 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-24 17:28:21,028,028 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-24 17:28:21,028,028 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:28:21,028,028 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:28:21,028,028 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:28:21,028,028 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-24 17:28:21,061,061 - werkzeug - WARNING -  * Debugger is active!
2025-06-24 17:28:21,077,077 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-24 17:28:23,266,266 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:28:23,288,288 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:28:23] "GET / HTTP/1.1" 200 -
2025-06-24 17:28:23,315,315 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:28:23] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-24 17:28:23,317,317 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:28:23] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-24 17:28:23,392,392 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-24 17:28:23,392,392 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-24 17:28:23,393,393 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:28:23] "GET /agent_status HTTP/1.1" 200 -
2025-06-24 17:28:30,233,233 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24 17:28:30.233076
2025-06-24 17:28:30,233,233 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-24 17:28:30,234,234 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-24T17:28:30.233076
2025-06-24 17:28:30,234,234 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-24 17:28:30,234,234 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-24 17:28:30,235,235 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:28:30,235,235 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-24 17:28:30,235,235 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-24 17:28:30,235,235 - __main__ - INFO -    operation_type: locker_out
2025-06-24 17:28:30,235,235 - __main__ - INFO -    template_file: locker_out.json
2025-06-24 17:28:30,235,235 - __main__ - INFO -    operation_date: 20250624
2025-06-24 17:28:30,235,235 - __main__ - INFO -    display_date: 24 June 2025
2025-06-24 17:28:30,235,235 - __main__ - INFO -    source: api_request
2025-06-24 17:28:30,235,235 - __main__ - INFO -    template_data present: True
2025-06-24 17:28:30,235,235 - __main__ - INFO - Starting AI agent processing
2025-06-24 17:28:30,236,236 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250624', 'display_date': '24 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-24 17:28:30,263,263 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-24 17:28:30,267,267 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-24 17:28:30,272,272 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-24 17:28:35,797,797 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 5.56s
2025-06-24 17:28:35,797,797 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-24 17:28:35,798,798 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-24 17:28:45,445,445 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 9.65s
2025-06-24 17:28:45,446,446 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-24 17:28:45,447,447 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-24 17:28:45,447,447 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-24 17:28:45,447,447 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-24 17:28:45,448,448 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250624_172845_44673', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-24 17:28:45.448028
2025-06-24 17:29:00,597,597 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-24 17:29:00,600,600 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250624_172845_44673
2025-06-24 17:29:00,600,600 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250624_172845_44673_172900_839
2025-06-24 17:29:00,600,600 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-24 17:29:00,601,601 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250624_172845_44673_172900_839, space: SCG, parent ID: 5880757738 in 15.16s
2025-06-24 17:29:00,602,602 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-24 17:29:00,602,602 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-24 17:29:00,602,602 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250624_172845_44673_172900_839' in space 'SCG'
2025-06-24 17:29:00,602,602 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250624_172845_44673_172900_839"
2025-06-24 17:29:02,557,557 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5917969411, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250624_172845_44673_172900_839
2025-06-24 17:29:02,568,568 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 32.33s
2025-06-24 17:29:02,569,569 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:29:02,570,570 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-24 17:29:02,573,573 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-24 17:29:02,573,573 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 32.34s
2025-06-24 17:29:02,574,574 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-24 17:29:02,574,574 - __main__ - INFO - ğŸ“Š Generation completed in 32.34s
2025-06-24 17:29:02,575,575 - werkzeug - INFO - 127.0.0.1 - - [24/Jun/2025 17:29:02] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-24 17:29:20,105,105 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-24 17:29:20,106,106 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 12:33:27,066,066 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 12:33:27,067,067 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 12:33:27,070,070 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 12:33:27,072,072 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 12:33:27,075,075 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 12:33:27,075,075 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 12:33:27,075,075 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 12:33:27,075,075 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 12:33:27,076,076 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 12:33:27,077,077 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 12:33:27,078,078 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 12:33:27,078,078 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 12:33:27,078,078 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 12:33:27,079,079 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 12:33:27,326,326 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 12:33:27,326,326 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 12:33:27,328,328 - werkzeug - INFO -  * Restarting with stat
2025-06-25 12:33:27,846,846 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 12:33:27,846,846 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 12:33:27,847,847 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 12:33:27,849,849 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 12:33:27,849,849 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 12:33:27,849,849 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 12:33:27,849,849 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 12:33:27,849,849 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 12:33:27,850,850 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 12:33:27,851,851 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 12:33:27,854,854 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 12:33:27,854,854 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 12:33:27,854,854 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 12:33:27,854,854 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 12:33:27,887,887 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 12:33:27,910,910 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 12:33:30,797,797 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 12:33:30,810,810 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:33:30] "GET / HTTP/1.1" 200 -
2025-06-25 12:33:30,835,835 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:33:30] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 12:33:30,838,838 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:33:30] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 12:33:30,891,891 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 12:33:30,891,891 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 12:33:30,892,892 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:33:30] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 12:33:30,920,920 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:33:30] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-25 12:40:55,153,153 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 12:40:55,158,158 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 12:40:55,158,158 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:40:55] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 12:51:47,769,769 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 12:51:47,771,771 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:51:47] "GET / HTTP/1.1" 200 -
2025-06-25 12:51:47,790,790 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:51:47] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 12:51:47,790,790 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:51:47] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 12:51:47,820,820 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 12:51:47,821,821 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 12:51:47,822,822 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 12:51:47] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 13:07:22,019,019 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 13:07:22,029,029 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 13:07:22] "GET / HTTP/1.1" 200 -
2025-06-25 13:07:22,055,055 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 13:07:22] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 13:07:22,055,055 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 13:07:22] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 13:07:22,093,093 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 13:07:22,094,094 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 13:07:22,095,095 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 13:07:22] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 14:01:38,562,562 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 14:01:38,566,566 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 14:01:38] "GET / HTTP/1.1" 200 -
2025-06-25 14:01:38,590,590 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 14:01:38] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 14:01:38,591,591 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 14:01:38] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 14:01:38,644,644 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 14:01:38,645,645 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 14:01:38,646,646 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 14:01:38] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 14:11:39,502,502 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 14:11:39,505,505 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 14:11:39] "GET / HTTP/1.1" 200 -
2025-06-25 14:11:39,550,550 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 14:11:39] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 14:11:39,550,550 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 14:11:39] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 14:11:39,595,595 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 14:11:39,595,595 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 14:11:39,596,596 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 14:11:39] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:41:19,489,489 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:41:19,492,492 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:41:19] "GET / HTTP/1.1" 200 -
2025-06-25 15:41:19,540,540 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:41:19] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:41:19,541,541 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:41:19] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:41:19,612,612 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:41:19,612,612 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:41:19,613,613 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:41:19] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:41:29,188,188 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 15:41:29.188314
2025-06-25 15:41:29,189,189 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 15:41:29,189,189 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T15:41:29.188314
2025-06-25 15:41:29,190,190 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 15:41:29,191,191 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 15:41:29,193,193 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 15:41:29,193,193 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 15:41:29,194,194 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 15:41:29,194,194 - __main__ - INFO -    operation_type: locker_out
2025-06-25 15:41:29,194,194 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 15:41:29,194,194 - __main__ - INFO -    operation_date: 20250626
2025-06-25 15:41:29,194,194 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 15:41:29,194,194 - __main__ - INFO -    source: api_request
2025-06-25 15:41:29,194,194 - __main__ - INFO -    template_data present: True
2025-06-25 15:41:29,194,194 - __main__ - INFO - Starting AI agent processing
2025-06-25 15:41:29,195,195 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for tomorrow', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250626', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 15:41:29,235,235 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 15:41:29,240,240 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 15:41:29,244,244 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 15:41:34,411,411 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: schedule locker S-OUT operation (confidence: 0.98) in 5.22s
2025-06-25 15:41:34,411,411 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: schedule locker S-OUT operation
2025-06-25 15:41:34,416,416 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 15:41:41,002,002 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: Illegal trailing comma before end of array: line 33 column 55 (char 2440)
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/utils/ai_agent.py", line 1559, in create_plan
    plan = json.loads(self._clean_json_response(response.text))
  File "/opt/homebrew/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Illegal trailing comma before end of array: line 33 column 55 (char 2440)

2025-06-25 15:41:41,003,003 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 15:41:41,004,004 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 15:41:41,004,004 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 15:41:41,004,004 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 15:41:41,004,004 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250626_154141_00361', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 15:41:41.004473
2025-06-25 15:41:55,425,425 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 15:41:55,428,428 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250626_154141_00361
2025-06-25 15:41:55,429,429 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250626_154141_00361_154155_752
2025-06-25 15:41:55,429,429 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 15:41:55,430,430 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250626_154141_00361_154155_752, space: SCG, parent ID: 5880757738 in 14.43s
2025-06-25 15:41:55,431,431 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 15:41:55,431,431 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 15:41:55,431,431 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250626_154141_00361_154155_752' in space 'SCG'
2025-06-25 15:41:55,431,431 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250626_154141_00361_154155_752"
2025-06-25 15:41:56,683,683 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920394524, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250626_154141_00361_154155_752
2025-06-25 15:41:56,691,691 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 27.50s
2025-06-25 15:41:56,693,693 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 15:41:56,694,694 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-25 15:41:56,697,697 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-25 15:41:56,697,697 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 27.51s
2025-06-25 15:41:56,698,698 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 15:41:56,698,698 - __main__ - INFO - ğŸ“Š Generation completed in 27.51s
2025-06-25 15:41:56,699,699 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:41:56] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 15:42:21,539,539 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:42:21,542,542 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:42:21,542,542 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:42:21] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:42:38,524,524 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:42:38] "GET /dashboard HTTP/1.1" 200 -
2025-06-25 15:42:38,545,545 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:42:38] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:42:38,545,545 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:42:38] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:42:38,564,564 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:42:38,565,565 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:42:38,565,565 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:42:38] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:42:38,568,568 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:42:38] "GET /api/dashboard/activity?limit=15&_t=1750846358561 HTTP/1.1" 200 -
2025-06-25 15:42:38,573,573 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:42:38] "GET /api/dashboard/stats?_t=1750846358561 HTTP/1.1" 200 -
2025-06-25 15:43:19,493,493 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:19] "GET /debug/clear_old_data HTTP/1.1" 200 -
2025-06-25 15:43:20,542,542 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:20] "GET /api/dashboard/activity?limit=15&_t=1750846400523 HTTP/1.1" 200 -
2025-06-25 15:43:20,548,548 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:20] "GET /api/dashboard/stats?_t=1750846400522 HTTP/1.1" 200 -
2025-06-25 15:43:26,701,701 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:26] "GET /dashboard HTTP/1.1" 200 -
2025-06-25 15:43:26,724,724 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:26] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:43:26,725,725 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:26] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:43:26,738,738 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:43:26,741,741 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:43:26,741,741 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:26] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:43:26,743,743 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:26] "GET /api/dashboard/activity?limit=15&_t=1750846406735 HTTP/1.1" 200 -
2025-06-25 15:43:26,747,747 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:26] "GET /api/dashboard/stats?_t=1750846406735 HTTP/1.1" 200 -
2025-06-25 15:43:30,350,350 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:30] "GET /debug/reset_dashboard_completely HTTP/1.1" 200 -
2025-06-25 15:43:31,564,564 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:31] "GET /api/dashboard/stats?_t=1750846411546 HTTP/1.1" 200 -
2025-06-25 15:43:31,576,576 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:31] "GET /api/dashboard/activity?limit=15&_t=1750846411546 HTTP/1.1" 200 -
2025-06-25 15:43:34,770,770 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:43:34,776,776 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:34] "GET / HTTP/1.1" 200 -
2025-06-25 15:43:34,795,795 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:34] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:43:34,796,796 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:34] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:43:34,807,807 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:43:34,808,808 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:43:34,808,808 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:43:34] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:43:42,359,359 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 15:43:42.358975
2025-06-25 15:43:42,359,359 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 15:43:42,359,359 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T15:43:42.358975
2025-06-25 15:43:42,359,359 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 15:43:42,359,359 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 15:43:42,360,360 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 15:43:42,360,360 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 15:43:42,360,360 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 15:43:42,360,360 - __main__ - INFO -    operation_type: locker_out
2025-06-25 15:43:42,360,360 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 15:43:42,360,360 - __main__ - INFO -    operation_date: 20250625
2025-06-25 15:43:42,360,360 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 15:43:42,360,360 - __main__ - INFO -    source: api_request
2025-06-25 15:43:42,360,360 - __main__ - INFO -    template_data present: True
2025-06-25 15:43:42,360,360 - __main__ - INFO - Starting AI agent processing
2025-06-25 15:43:42,361,361 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250625', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 15:43:42,410,410 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 15:43:42,411,411 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 15:43:42,416,416 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 15:43:51,304,304 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate Locker S-OUT document for June 25th, 2025 (confidence: 0.98) in 8.94s
2025-06-25 15:43:51,305,305 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate Locker S-OUT document for June 25th, 2025
2025-06-25 15:43:51,306,306 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 15:43:58,346,346 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 7.04s
2025-06-25 15:43:58,354,354 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 15:43:58,356,356 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 15:43:58,356,356 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 15:43:58,358,358 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 15:43:58,359,359 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250625_154358_35551', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 15:43:58.359281
2025-06-25 15:44:12,736,736 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 15:44:12,746,746 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250625_154358_35551
2025-06-25 15:44:12,747,747 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250625_154358_35551_154412_251
2025-06-25 15:44:12,747,747 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 15:44:12,748,748 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250625_154358_35551_154412_251, space: SCG, parent ID: 5880757738 in 14.40s
2025-06-25 15:44:12,748,748 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 15:44:12,749,749 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 15:44:12,749,749 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250625_154358_35551_154412_251' in space 'SCG'
2025-06-25 15:44:12,749,749 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250625_154358_35551_154412_251"
2025-06-25 15:44:14,172,172 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919335314, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250625_154358_35551_154412_251
2025-06-25 15:44:14,192,192 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 31.83s
2025-06-25 15:44:14,196,196 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 15:44:14,196,196 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-25 15:44:14,198,198 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-25 15:44:14,199,199 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 31.84s
2025-06-25 15:44:14,199,199 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 15:44:14,199,199 - __main__ - INFO - ğŸ“Š Generation completed in 31.84s
2025-06-25 15:44:14,200,200 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:44:14] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 15:44:24,133,133 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:44:24] "GET /dashboard HTTP/1.1" 200 -
2025-06-25 15:44:24,156,156 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:44:24] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:44:24,159,159 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:44:24] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:44:24,176,176 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:44:24,179,179 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:44:24,182,182 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:44:24] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:44:24,185,185 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:44:24] "GET /api/dashboard/activity?limit=15&_t=1750846464173 HTTP/1.1" 200 -
2025-06-25 15:44:24,192,192 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:44:24] "GET /api/dashboard/stats?_t=1750846464173 HTTP/1.1" 200 -
2025-06-25 15:44:42,481,481 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:44:42] "GET /api/dashboard/activity?limit=15&_t=1750846482464 HTTP/1.1" 200 -
2025-06-25 15:45:50,105,105 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:45:50] "GET /api/dashboard/activity?limit=15&_t=1750846550086 HTTP/1.1" 200 -
2025-06-25 15:45:50,112,112 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:45:50] "GET /api/dashboard/stats?_t=1750846550085 HTTP/1.1" 200 -
2025-06-25 15:45:53,476,476 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:45:53] "GET /debug/database_state HTTP/1.1" 200 -
2025-06-25 15:46:10,626,626 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:46:10,629,629 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:46:10] "GET / HTTP/1.1" 200 -
2025-06-25 15:46:10,651,651 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:46:10] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:46:10,651,651 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:46:10] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:46:10,655,655 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:46:10,655,655 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:46:10,656,656 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:46:10] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:46:18,120,120 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 15:46:18.120476
2025-06-25 15:46:18,122,122 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 15:46:18,122,122 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T15:46:18.120476
2025-06-25 15:46:18,122,122 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 15:46:18,123,123 - utils.template_processor - INFO - Attempting to load template: page_templates/s_out.json
2025-06-25 15:46:18,128,128 - utils.template_processor - INFO - Successfully loaded template: s_out.json
2025-06-25 15:46:18,128,128 - __main__ - INFO - Successfully loaded template: s_out.json
2025-06-25 15:46:18,128,128 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 15:46:18,132,132 - __main__ - INFO -    operation_type: s_out
2025-06-25 15:46:18,133,133 - __main__ - INFO -    template_file: s_out.json
2025-06-25 15:46:18,133,133 - __main__ - INFO -    operation_date: 20250626
2025-06-25 15:46:18,133,133 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 15:46:18,133,133 - __main__ - INFO -    source: api_request
2025-06-25 15:46:18,133,133 - __main__ - INFO -    template_data present: True
2025-06-25 15:46:18,133,133 - __main__ - INFO - Starting AI agent processing
2025-06-25 15:46:18,137,137 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 's out for tomorrow', 'template_file': 's_out.json', 'operation_type': 's_out', 'operation_date': '20250626', 'display_date': '25 June 2025', 'template_data': {'title': 'SCP vShop_ingestion_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]}}
2025-06-25 15:46:18,190,190 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 15:46:18,194,194 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 15:46:18,196,196 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 15:46:20,913,913 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate S-OUT operation document for June 26, 2025 (confidence: 0.98) in 2.78s
2025-06-25 15:46:20,914,914 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate S-OUT operation document for June 26, 2025
2025-06-25 15:46:20,914,914 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 15:46:28,700,700 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 7.79s
2025-06-25 15:46:28,701,701 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 15:46:28,702,702 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 's_out'
2025-06-25 15:46:28,702,702 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCP space for s_out: SCP
2025-06-25 15:46:28,703,703 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating S_OUT page for space SCP...
2025-06-25 15:46:28,703,703 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=s_out, template_data={'title': 'SCP vShop_ingestion_20250626_154628_70198', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: TICKET_NUMBER - SCP Shop S-OUT', 'approvals_sre': '@Pawar, Nikhil, @Rawat, Megha', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@example.com', '@Rawat, Megha': 'megha.rawat@example.com'}, 'approvals_sre_status': 'NOT APPROVED', 'operation_pic': '@Ali, Abrar', 'release_branch_checkboxes': 'DONE', 'release_branch_checkboxes_status': 'release/vSCP_shop_ingestion_20250603_183000\n\nRC:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/browse?at=refs%2Fheads%2Frelease%2FvSCP_shop_ingestion_20250603_183000\n\nPR:\nhttps://gitpub.rakuten-it.com/projects/SCP/repos/scp-rsl-shops/pull-requests/642/overview', 'release_branch_name': 'release/vSCP_shop_ingestion_20250603_183000'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Details', 'id': 'operation_details'}, {'label': 'Operation Summary', 'id': 'operation_summary'}, {'label': 'Release/Hotfix branch created', 'id': 'release_branch_checkboxes', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}, {'label': 'Release Branch', 'id': 'release_branch_name'}]}]}, {'heading': 'S-OUT Operation Preparation', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'verify_shop_exists': "{expand:title=Shop Verification Query}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect * from scp_shops where SHOP_URL in ('h2o-e')\n{code}\n{expand}"}, 'rows': [{'label': "Verify Shop's exists", 'id': 'verify_shop_exists'}]}]}, {'heading': 'S-OUT Operation Execution', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'update_shop_data_out_steps': 'Checkout release/vSCP_shop_ingestion_{operation_date} branch\nOperation steps to delete items https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D303930+Manual+to+Update+Reference+Data\n{expand:title=Shop Data}\n{code:language=json|borderStyle=solid|theme=RDark|collapse=true}\n[\n  {\n    "shopUrl": "h2o-e",\n    "shopId": 230140\n  }\n]\n{code}\n{expand}', 'update_shop_data_out_steps_status': 'S-OUT\n\nTotal Query\n\nselect count(*) from scp_shops\nBEFORE S-OUT\n\n6740\n\nAFTER S-OUT\n6739', 'update_shop_data_out_remarks': 'Total Query\n\nselect count(*) from scp_shops\n\nBEFORE S-OUT\n\n6877\n\nAFTER S-OUT', 'update_shop_warehouse_location_data': 'Operation steps to do "Shop warehouse location reference data" . Follow [Shop warehouse location reference data] section\nfrom https://confluence.rakuten-it.com/confluence/display/SCG/%5BNEW+from+DCP%5D+Manual+to+Update+Reference+Data'}, 'rows': [{'label': 'Update shop data', 'id': 'update_shop_data_out_steps'}, {'label': 'Update shop warehouse data', 'id': 'update_shop_warehouse_location_data'}]}]}, {'heading': 'Rollback Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Share details and impact with producer and manager', 'id': 'share_rollback_details'}, {'label': 'Deploy old image of the prometheus using previous release manual', 'id': 'deploy_old_prometheus'}]}]}, {'heading': 'Monitoring Plan', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'monitoring_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'monitoring_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'PIC', 'id': 'monitoring_pic', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Time', 'id': 'monitoring_time', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'static_values': {'monitor_kibana': "Monitor apps in kibana\nhttps://kibana-eaas-jpe2c.rakuten-it.com/ecld-scg/app/kibana#/discover/9516dd20-d87c-11eb-91e3-d3d34715d24d\nlog group: eaas_jpe2c-ecld-scg_ecld-scg_scp_java_app_logs-*\nS-OUT\n\n{code:language=sql|borderStyle=solid|theme=RDark}'jojoselect66','alamode','apricot-r','s-marche'\n\nGrafana: https://monitor.rakuten-it.com/v2/d/GSOruU87z/scp-publishers?orgId=1", 'monitoring_pic': '@Ali, Abrar', 'monitoring_time': 'For 1 hour after release'}, 'rows': [{'label': 'Monitor apps in kibana', 'id': 'monitor_kibana'}]}]}, {'heading': 'Post Release Checklist', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'post_release_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Status', 'id': 'post_release_status', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remarks', 'id': 'post_release_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}], 'rows': [{'label': 'Request merging of release branch to Master and Develop', 'id': 'request_branch_merge', 'checkboxes': ['DONE', 'NOT YET', 'NOT APPLICABLE']}]}]}]},start_time=2025-06-25 15:46:28.703217
2025-06-25 15:46:41,557,557 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 15:46:41,559,559 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: SCP vShop_ingestion_20250626_154628_70198
2025-06-25 15:46:41,559,559 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: SCP vShop_ingestion_20250626_154628_70198_154641_924
2025-06-25 15:46:41,559,559 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCP space, length: 14292 characters
2025-06-25 15:46:41,560,560 - utils.ai_agent - INFO - ğŸ¯ Generated page title: SCP vShop_ingestion_20250626_154628_70198_154641_924, space: SCP, parent ID: 5890230619 in 12.86s
2025-06-25 15:46:41,560,560 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 15:46:41,560,560 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 15:46:41,560,560 - utils.confluence_client - INFO - ğŸ“ Creating page: 'SCP vShop_ingestion_20250626_154628_70198_154641_924' in space 'SCP'
2025-06-25 15:46:41,560,560 - atlassian.confluence - INFO - Creating page "SCP" -> "SCP vShop_ingestion_20250626_154628_70198_154641_924"
2025-06-25 15:46:42,587,587 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919335332, URL=https://confluence.rakuten-it.com/confluence/display/SCP/SCP+vShop_ingestion_20250626_154628_70198_154641_924
2025-06-25 15:46:42,593,593 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 24.46s
2025-06-25 15:46:42,595,595 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 15:46:42,595,595 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-25 15:46:42,597,597 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-25 15:46:42,597,597 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 24.48s
2025-06-25 15:46:42,597,597 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 15:46:42,597,597 - __main__ - INFO - ğŸ“Š Generation completed in 24.48s
2025-06-25 15:46:42,598,598 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:46:42] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 15:47:45,976,976 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:45] "GET /feedback HTTP/1.1" 200 -
2025-06-25 15:47:46,012,012 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:46] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:47:46,014,014 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:46] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:47:46,036,036 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:47:46,039,039 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:46] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-25 15:47:46,039,039 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:47:46,040,040 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:46] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:47:46,041,041 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:46] "GET /api/feedback/recent?limit=5 HTTP/1.1" 200 -
2025-06-25 15:47:47,955,955 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:47:47,958,958 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:47] "GET / HTTP/1.1" 200 -
2025-06-25 15:47:47,977,977 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:47] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:47:47,978,978 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:47] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:47:47,983,983 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:47:47,984,984 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:47:47,985,985 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:47] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:47:53,511,511 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:53] "GET /dashboard HTTP/1.1" 200 -
2025-06-25 15:47:53,538,538 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:53] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:47:53,539,539 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:53] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:47:53,550,550 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:47:53,554,554 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:47:53,554,554 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:53] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 15:47:53,558,558 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:53] "GET /api/dashboard/activity?limit=15&_t=1750846673547 HTTP/1.1" 200 -
2025-06-25 15:47:53,561,561 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:47:53] "GET /api/dashboard/stats?_t=1750846673547 HTTP/1.1" 200 -
2025-06-25 15:49:08,629,629 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:49:08] "GET /api/dashboard/activity?limit=15&_t=1750846748605 HTTP/1.1" 200 -
2025-06-25 15:49:08,632,632 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:49:08] "GET /api/dashboard/stats?_t=1750846748605 HTTP/1.1" 200 -
2025-06-25 15:49:17,380,380 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:49:17,383,383 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:49:17] "GET / HTTP/1.1" 200 -
2025-06-25 15:49:17,413,413 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:49:17] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 15:49:17,416,416 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:49:17] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 15:49:17,430,430 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 15:49:17,431,431 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 15:49:17,431,431 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 15:49:17] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 16:18:43,943,943 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 16:18:43.943195
2025-06-25 16:18:43,945,945 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 16:18:43,945,945 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T16:18:43.943195
2025-06-25 16:18:43,945,945 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 16:18:43,946,946 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 16:18:43,951,951 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 16:18:43,952,952 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 16:18:43,952,952 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 16:18:43,952,952 - __main__ - INFO -    operation_type: locker_out
2025-06-25 16:18:43,952,952 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 16:18:43,952,952 - __main__ - INFO -    operation_date: 20250625
2025-06-25 16:18:43,952,952 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 16:18:43,952,952 - __main__ - INFO -    source: api_request
2025-06-25 16:18:43,952,952 - __main__ - INFO -    template_data present: True
2025-06-25 16:18:43,952,952 - __main__ - INFO - Starting AI agent processing
2025-06-25 16:18:43,953,953 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for 2nd july', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250625', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 16:18:44,013,013 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 16:18:44,018,018 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 16:18:44,021,021 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 16:18:47,888,888 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 3.94s
2025-06-25 16:18:47,892,892 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-25 16:18:47,892,892 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 16:18:57,056,056 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 6 steps in 9.16s
2025-06-25 16:18:57,059,059 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 16:18:57,060,060 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 16:18:57,060,060 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 16:18:57,061,061 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 16:18:57,062,062 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250625_161857_05993', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 16:18:57.061590
2025-06-25 16:19:11,243,243 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 16:19:11,244,244 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250625_161857_05993
2025-06-25 16:19:11,246,246 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250625_161857_05993_161911_172
2025-06-25 16:19:11,246,246 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 16:19:11,246,246 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250625_161857_05993_161911_172, space: SCG, parent ID: 5880757738 in 14.19s
2025-06-25 16:19:11,247,247 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 16:19:11,247,247 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 16:19:11,247,247 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250625_161857_05993_161911_172' in space 'SCG'
2025-06-25 16:19:11,247,247 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250625_161857_05993_161911_172"
2025-06-25 16:19:12,540,540 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919365835, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250625_161857_05993_161911_172
2025-06-25 16:19:12,549,549 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 28.60s
2025-06-25 16:19:12,551,551 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 16:19:12,552,552 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-25 16:19:12,553,553 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-llm/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-25 16:19:12,554,554 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 28.61s
2025-06-25 16:19:12,554,554 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 16:19:12,554,554 - __main__ - INFO - ğŸ“Š Generation completed in 28.61s
2025-06-25 16:19:12,555,555 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:19:12] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 16:20:18,857,857 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:20:18] "GET /dashboard HTTP/1.1" 200 -
2025-06-25 16:20:18,879,879 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:20:18] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 16:20:18,881,881 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:20:18] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 16:20:18,901,901 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 16:20:18,903,903 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 16:20:18,903,903 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:20:18] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 16:20:18,905,905 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:20:18] "GET /api/dashboard/activity?limit=15&_t=1750848618898 HTTP/1.1" 200 -
2025-06-25 16:20:18,907,907 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:20:18] "GET /api/dashboard/stats?_t=1750848618898 HTTP/1.1" 200 -
2025-06-25 16:21:53,384,384 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:21:53] "GET /feedback HTTP/1.1" 200 -
2025-06-25 16:21:53,417,417 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:21:53] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 16:21:53,418,418 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:21:53] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 16:21:53,441,441 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 16:21:53,444,444 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 16:21:53,445,445 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:21:53] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 16:21:53,451,451 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:21:53] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-25 16:21:53,465,465 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:21:53] "GET /api/feedback/recent?limit=5 HTTP/1.1" 200 -
2025-06-25 16:27:17,638,638 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 16:27:17,640,640 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:27:17] "GET / HTTP/1.1" 200 -
2025-06-25 16:27:17,665,665 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:27:17] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 16:27:17,668,668 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:27:17] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 16:27:17,721,721 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 16:27:17,726,726 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 16:27:17,727,727 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 16:27:17] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 21:34:13,288,288 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 21:34:13,289,289 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 21:34:13,292,292 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 21:34:13,293,293 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 21:34:13,293,293 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 21:34:13,293,293 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:13,293,293 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:13,293,293 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 21:34:13,294,294 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 21:34:13,295,295 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 21:34:13,295,295 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 21:34:13,295,295 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:13,295,295 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:13,295,295 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 21:34:13,551,551 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 21:34:13,552,552 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 21:34:13,552,552 - werkzeug - INFO -  * Restarting with stat
2025-06-25 21:34:14,105,105 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 21:34:14,105,105 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 21:34:14,106,106 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 21:34:14,108,108 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 21:34:14,108,108 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 21:34:14,109,109 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:14,109,109 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:14,109,109 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 21:34:14,109,109 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 21:34:14,111,111 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 21:34:14,111,111 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 21:34:14,111,111 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:14,111,111 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:14,111,111 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 21:34:14,141,141 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 21:34:14,156,156 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 21:34:18,415,415 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 21:34:18,426,426 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:34:18] "GET / HTTP/1.1" 200 -
2025-06-25 21:34:18,474,474 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:34:18] "GET /static/css/style.css HTTP/1.1" 200 -
2025-06-25 21:34:18,740,740 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:34:18] "GET /static/js/app.js HTTP/1.1" 200 -
2025-06-25 21:34:19,436,436 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 21:34:19,436,436 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 21:34:19,436,436 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:34:19] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 21:34:19,947,947 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:34:19] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-25 21:34:30,432,432 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 21:34:30.432086
2025-06-25 21:34:30,432,432 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 21:34:30,432,432 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T21:34:30.432086
2025-06-25 21:34:30,433,433 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 21:34:30,433,433 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 21:34:30,434,434 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 21:34:30,434,434 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 21:34:30,434,434 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 21:34:30,435,435 - __main__ - INFO -    operation_type: locker_out
2025-06-25 21:34:30,435,435 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 21:34:30,435,435 - __main__ - INFO -    operation_date: 20250625
2025-06-25 21:34:30,435,435 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 21:34:30,435,435 - __main__ - INFO -    source: api_request
2025-06-25 21:34:30,435,435 - __main__ - INFO -    template_data present: True
2025-06-25 21:34:30,435,435 - __main__ - INFO - Starting AI agent processing
2025-06-25 21:34:30,435,435 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out 2nd july', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250625', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 21:34:30,464,464 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 21:34:30,466,466 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 21:34:30,469,469 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 21:34:35,792,792 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate Locker S-OUT documentation for June 25th, 2025 (confidence: 0.98) in 5.36s
2025-06-25 21:34:35,792,792 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate Locker S-OUT documentation for June 25th, 2025
2025-06-25 21:34:35,793,793 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 21:34:43,748,748 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 5 steps in 7.96s
2025-06-25 21:34:43,750,750 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 21:34:43,753,753 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 21:34:43,753,753 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 21:34:43,753,753 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 21:34:43,754,754 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250625_213443_75108', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 21:34:43.753687
2025-06-25 21:34:58,805,805 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 21:34:58,806,806 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250625_213443_75108
2025-06-25 21:34:58,807,807 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250625_213443_75108_213458_409
2025-06-25 21:34:58,807,807 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 21:34:58,807,807 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250625_213443_75108_213458_409, space: SCG, parent ID: 5880757738 in 15.06s
2025-06-25 21:34:58,808,808 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:58,808,808 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 21:34:58,808,808 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250625_213443_75108_213458_409' in space 'SCG'
2025-06-25 21:34:58,808,808 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250625_213443_75108_213458_409"
2025-06-25 21:35:00,053,053 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920396546, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250625_213443_75108_213458_409
2025-06-25 21:35:00,083,083 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 29.65s
2025-06-25 21:35:00,089,089 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 21:35:00,090,090 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-25 21:35:00,093,093 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-25 21:35:00,093,093 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 29.66s
2025-06-25 21:35:00,094,094 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 21:35:00,094,094 - __main__ - INFO - ğŸ“Š Generation completed in 29.66s
2025-06-25 21:35:00,095,095 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:35:00] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 21:55:26,448,448 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 21:55:26,472,472 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:55:26] "GET / HTTP/1.1" 200 -
2025-06-25 21:55:26,512,512 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:55:26] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 21:55:26,556,556 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:55:26] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 21:55:26,633,633 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 21:55:26,633,633 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 21:55:26,634,634 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:55:26] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 21:55:36,284,284 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 21:55:36.284882
2025-06-25 21:55:36,285,285 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 21:55:36,285,285 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T21:55:36.284882
2025-06-25 21:55:36,285,285 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 21:55:36,285,285 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 21:55:36,286,286 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 21:55:36,286,286 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 21:55:36,286,286 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 21:55:36,286,286 - __main__ - INFO -    operation_type: locker_out
2025-06-25 21:55:36,286,286 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 21:55:36,286,286 - __main__ - INFO -    operation_date: 20250702
2025-06-25 21:55:36,286,286 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 21:55:36,286,286 - __main__ - INFO -    source: api_request
2025-06-25 21:55:36,287,287 - __main__ - INFO -    template_data present: True
2025-06-25 21:55:36,287,287 - __main__ - INFO - Starting AI agent processing
2025-06-25 21:55:36,287,287 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 3rd July', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250702', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 21:55:36,327,327 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 21:55:36,333,333 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 21:55:36,335,335 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 21:55:39,742,742 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate a locker out procedure document for July 2nd, 2025 (confidence: 0.98) in 3.46s
2025-06-25 21:55:39,743,743 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate a locker out procedure document for July 2nd, 2025
2025-06-25 21:55:39,743,743 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 21:55:46,908,908 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 7.16s
2025-06-25 21:55:46,908,908 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 21:55:46,909,909 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 21:55:46,909,909 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 21:55:46,909,909 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 21:55:46,910,910 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250702_215546_90907', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 21:55:46.909918
2025-06-25 21:56:01,960,960 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 21:56:01,965,965 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250702_215546_90907
2025-06-25 21:56:01,966,966 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250702_215546_90907_215601_622
2025-06-25 21:56:01,966,966 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 21:56:01,968,968 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250702_215546_90907_215601_622, space: SCG, parent ID: 5880757738 in 15.06s
2025-06-25 21:56:01,968,968 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 21:56:01,968,968 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 21:56:01,969,969 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250702_215546_90907_215601_622' in space 'SCG'
2025-06-25 21:56:01,969,969 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250702_215546_90907_215601_622"
2025-06-25 21:56:03,609,609 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919337125, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250702_215546_90907_215601_622
2025-06-25 21:56:03,618,618 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 27.33s
2025-06-25 21:56:03,628,628 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 21:56:03,629,629 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-25 21:56:03,633,633 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-25 21:56:03,633,633 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 27.34s
2025-06-25 21:56:03,634,634 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 21:56:03,634,634 - __main__ - INFO - ğŸ“Š Generation completed in 27.35s
2025-06-25 21:56:03,635,635 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 21:56:03] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 22:07:01,721,721 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:07:03,870,870 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:07:05,064,064 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:07:05,065,065 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:07:05,066,066 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:07:05,067,067 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:07:05,068,068 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:07:05,068,068 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:05,068,068 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:05,068,068 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:07:05,069,069 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:07:05,070,070 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:07:05,071,071 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:07:05,071,071 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:05,071,071 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:05,071,071 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:07:05,113,113 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:07:05,131,131 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:07:09,607,607 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:07:09,720,720 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:07:10,488,488 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:07:10,488,488 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:07:10,489,489 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:07:10,490,490 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:07:10,490,490 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:07:10,490,490 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:10,491,491 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:10,491,491 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:07:10,491,491 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:07:10,492,492 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:07:10,492,492 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:07:10,492,492 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:10,492,492 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:10,492,492 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:07:10,523,523 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:07:10,539,539 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:07:15,329,329 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:07:15,474,474 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:07:16,807,807 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:07:16,807,807 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:07:16,808,808 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:07:16,811,811 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:07:16,811,811 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:07:16,811,811 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:16,812,812 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:16,812,812 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:07:16,813,813 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:07:16,814,814 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:07:16,814,814 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:07:16,814,814 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:16,814,814 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:16,814,814 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:07:16,847,847 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:07:16,868,868 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:07:27,317,317 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:07:27,552,552 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:07:28,503,503 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:07:28,504,504 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:07:28,505,505 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:07:28,506,506 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:07:28,507,507 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:07:28,507,507 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:28,507,507 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:28,507,507 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:07:28,508,508 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:07:28,509,509 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:07:28,509,509 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:07:28,509,509 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:28,509,509 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:07:28,509,509 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:07:28,550,550 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:07:28,569,569 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:08:13,190,190 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:08:13,227,227 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:08:13] "GET / HTTP/1.1" 200 -
2025-06-25 22:08:13,288,288 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:08:13] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 22:08:13,386,386 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:08:13] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 22:08:13,443,443 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:08:13,444,444 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:08:13,444,444 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:08:13] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:08:22,394,394 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 22:08:22.393951
2025-06-25 22:08:22,394,394 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 22:08:22,394,394 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T22:08:22.393951
2025-06-25 22:08:22,395,395 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:08:22,395,395 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 22:08:22,396,396 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:08:22,396,396 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:08:22,397,397 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 22:08:22,397,397 - __main__ - INFO -    operation_type: locker_out
2025-06-25 22:08:22,397,397 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 22:08:22,397,397 - __main__ - INFO -    operation_date: 20250703
2025-06-25 22:08:22,397,397 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 22:08:22,397,397 - __main__ - INFO -    source: api_request
2025-06-25 22:08:22,397,397 - __main__ - INFO -    template_data present: True
2025-06-25 22:08:22,397,397 - __main__ - INFO - Starting AI agent processing
2025-06-25 22:08:22,398,398 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 4th july', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250703', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 22:08:22,423,423 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 22:08:22,425,425 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 22:08:22,428,428 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 22:08:27,807,807 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate a locker out procedure document for July 3rd, 2025 (confidence: 0.98) in 5.41s
2025-06-25 22:08:27,807,807 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate a locker out procedure document for July 3rd, 2025
2025-06-25 22:08:27,808,808 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 22:08:35,594,594 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 7.79s
2025-06-25 22:08:35,595,595 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:08:35,595,595 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 22:08:35,596,596 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 22:08:35,596,596 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 22:08:35,596,596 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250703_220835_59524', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 22:08:35.596302
2025-06-25 22:08:50,965,965 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 22:08:50,967,967 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250703_220835_59524
2025-06-25 22:08:50,968,968 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250703_220835_59524_220850_372
2025-06-25 22:08:50,968,968 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 22:08:50,968,968 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250703_220835_59524_220850_372, space: SCG, parent ID: 5880757738 in 15.37s
2025-06-25 22:08:50,969,969 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:08:50,969,969 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:08:50,969,969 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250703_220835_59524_220850_372' in space 'SCG'
2025-06-25 22:08:50,970,970 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250703_220835_59524_220850_372"
2025-06-25 22:08:52,206,206 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919367038, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250703_220835_59524_220850_372
2025-06-25 22:08:52,217,217 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 29.82s
2025-06-25 22:08:52,221,221 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:08:52,222,222 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-25 22:08:52,226,226 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-25 22:08:52,227,227 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 29.83s
2025-06-25 22:08:52,228,228 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:08:52,228,228 - __main__ - INFO - ğŸ“Š Generation completed in 29.83s
2025-06-25 22:08:52,233,233 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:08:52] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 22:10:17,750,750 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:10:20,148,148 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:10:20,997,997 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:10:20,997,997 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:10:20,999,999 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:10:21,000,000 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:10:21,000,000 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:10:21,001,001 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:10:21,001,001 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:10:21,001,001 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:10:21,001,001 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:10:21,003,003 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:10:21,006,006 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:10:21,006,006 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:10:21,006,006 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:10:21,006,006 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:10:21,056,056 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:10:21,080,080 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:10:21,426,426 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:10:21,444,444 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:10:21] "GET / HTTP/1.1" 200 -
2025-06-25 22:10:21,482,482 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:10:21] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 22:10:21,553,553 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:10:21] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 22:10:21,630,630 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:10:21,632,632 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:10:21,633,633 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:10:21] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:10:23,551,551 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:10:23,555,555 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:10:23] "GET / HTTP/1.1" 200 -
2025-06-25 22:10:23,598,598 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:10:23] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 22:10:23,658,658 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:10:23] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 22:10:23,724,724 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:10:23,724,724 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:10:23,725,725 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:10:23] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:10:33,173,173 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 22:10:33.173888
2025-06-25 22:10:33,174,174 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 22:10:33,174,174 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T22:10:33.173888
2025-06-25 22:10:33,174,174 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 4th july
2025-06-25 22:10:33,174,174 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 22:10:33,174,174 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=None, display_date=None
2025-06-25 22:10:33,174,174 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:10:33,174,174 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 22:10:33,175,175 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:10:33,175,175 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:10:33,175,175 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 22:10:33,175,175 - __main__ - INFO -    operation_type: locker_out
2025-06-25 22:10:33,175,175 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 22:10:33,175,175 - __main__ - INFO -    operation_date: 20250625
2025-06-25 22:10:33,175,175 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 22:10:33,175,175 - __main__ - INFO -    source: prompt_parsed
2025-06-25 22:10:33,175,175 - __main__ - INFO -    template_data present: True
2025-06-25 22:10:33,175,175 - __main__ - INFO - Starting AI agent processing
2025-06-25 22:10:33,175,175 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 4th july', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250625', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 22:10:33,180,180 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 22:10:33,181,181 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 22:10:33,184,184 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 22:10:39,308,308 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate a Locker S-OUT procedure document for June 25th, 2025 (confidence: 0.98) in 6.13s
2025-06-25 22:10:39,309,309 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate a Locker S-OUT procedure document for June 25th, 2025
2025-06-25 22:10:39,309,309 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 22:10:46,926,926 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 7.62s
2025-06-25 22:10:46,927,927 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:10:46,928,928 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 22:10:46,928,928 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 22:10:46,928,928 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 22:10:46,928,928 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250625_221046_92755', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 22:10:46.928586
2025-06-25 22:11:03,857,857 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 22:11:03,860,860 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250625_221046_92755
2025-06-25 22:11:03,860,860 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250625_221046_92755_221103_500
2025-06-25 22:11:03,860,860 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 22:11:03,861,861 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250625_221046_92755_221103_500, space: SCG, parent ID: 5880757738 in 16.93s
2025-06-25 22:11:03,862,862 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:11:03,862,862 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:11:03,862,862 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250625_221046_92755_221103_500' in space 'SCG'
2025-06-25 22:11:03,862,862 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250625_221046_92755_221103_500"
2025-06-25 22:11:05,545,545 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920753633, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250625_221046_92755_221103_500
2025-06-25 22:11:05,554,554 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 32.38s
2025-06-25 22:11:05,559,559 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:11:05,560,560 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'
2025-06-25 22:11:05,563,563 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 253, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<14 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_data'

2025-06-25 22:11:05,563,563 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 32.39s
2025-06-25 22:11:05,564,564 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:11:05,564,564 - __main__ - INFO - ğŸ“Š Generation completed in 32.39s
2025-06-25 22:11:05,565,565 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:11:05] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 22:14:16,940,940 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:14:19,042,042 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:14:19,834,834 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:14:19,834,834 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:14:19,836,836 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:14:19,837,837 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:14:19,837,837 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:14:19,837,837 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:19,837,837 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:19,837,837 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:14:19,838,838 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:14:19,839,839 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:14:19,839,839 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:14:19,839,839 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:19,839,839 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:19,839,839 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:14:19,871,871 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:14:19,891,891 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:14:22,759,759 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:14:22,760,760 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:14:24,847,847 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:14:24,847,847 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:14:24,848,848 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:14:24,850,850 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:14:24,850,850 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:14:24,850,850 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:24,850,850 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:24,850,850 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:14:24,851,851 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:14:24,852,852 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:14:24,853,853 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:14:24,853,853 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:24,853,853 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:24,853,853 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:14:25,230,230 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 22:14:25,231,231 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 22:14:25,232,232 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:14:25,811,811 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:14:25,812,812 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:14:25,813,813 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:14:25,814,814 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:14:25,814,814 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:14:25,814,814 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:25,814,814 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:25,815,815 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:14:25,816,816 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:14:25,817,817 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:14:25,818,818 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:14:25,818,818 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:25,818,818 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:14:25,818,818 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:14:25,847,847 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:14:25,862,862 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:14:27,871,871 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:14:27,880,880 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:14:27] "GET / HTTP/1.1" 200 -
2025-06-25 22:14:27,914,914 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:14:27] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 22:14:27,993,993 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:14:27] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 22:14:28,154,154 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:14:28,155,155 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:14:28,155,155 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:14:28] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:14:41,604,604 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 22:14:41.603680
2025-06-25 22:14:41,608,608 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 22:14:41,608,608 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T22:14:41.603680
2025-06-25 22:14:41,608,608 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 5th July
2025-06-25 22:14:41,609,609 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 22:14:41,609,609 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=None, display_date=None
2025-06-25 22:14:41,611,611 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:14:41,611,611 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 22:14:41,615,615 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:14:41,615,615 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:14:41,616,616 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 22:14:41,616,616 - __main__ - INFO -    operation_type: locker_out
2025-06-25 22:14:41,616,616 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 22:14:41,616,616 - __main__ - INFO -    operation_date: 20250625
2025-06-25 22:14:41,616,616 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 22:14:41,617,617 - __main__ - INFO -    source: prompt_parsed
2025-06-25 22:14:41,617,617 - __main__ - INFO -    template_data present: True
2025-06-25 22:14:41,618,618 - __main__ - INFO - Starting AI agent processing
2025-06-25 22:14:41,619,619 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 5th July', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250625', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 22:14:41,680,680 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 22:14:41,682,682 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 22:14:41,690,690 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 22:14:46,844,844 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate a Locker S-OUT procedure document for June 25th, 2025 (confidence: 0.98) in 5.23s
2025-06-25 22:14:46,845,845 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate a Locker S-OUT procedure document for June 25th, 2025
2025-06-25 22:14:46,845,845 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 22:14:54,546,546 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 7.70s
2025-06-25 22:14:54,547,547 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:14:54,547,547 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 22:14:54,547,547 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 22:14:54,547,547 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 22:14:54,547,547 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250625_221454_54716', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 22:14:54.547725
2025-06-25 22:15:09,014,014 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 22:15:09,018,018 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250625_221454_54716
2025-06-25 22:15:09,018,018 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250625_221454_54716_221509_147
2025-06-25 22:15:09,018,018 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 22:15:09,021,021 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250625_221454_54716_221509_147, space: SCG, parent ID: 5880757738 in 14.47s
2025-06-25 22:15:09,022,022 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:15:09,022,022 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:15:09,022,022 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250625_221454_54716_221509_147' in space 'SCG'
2025-06-25 22:15:09,022,022 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250625_221454_54716_221509_147"
2025-06-25 22:15:09,984,984 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919367047, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250625_221454_54716_221509_147
2025-06-25 22:15:10,000,000 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 28.38s
2025-06-25 22:15:10,007,007 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:15:10,008,008 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_type'
2025-06-25 22:15:10,011,011 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 252, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<12 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'operation_type'

2025-06-25 22:15:10,011,011 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 28.40s
2025-06-25 22:15:10,012,012 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:15:10,012,012 - __main__ - INFO - ğŸ“Š Generation completed in 28.41s
2025-06-25 22:15:10,013,013 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:15:10] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 22:20:46,374,374 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:20:48,591,591 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:20:49,285,285 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:20:49,285,285 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:20:49,286,286 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:20:49,287,287 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:20:49,288,288 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:20:49,288,288 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:20:49,288,288 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:20:49,288,288 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:20:49,289,289 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:20:49,290,290 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:20:49,290,290 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:20:49,290,290 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:20:49,290,290 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:20:49,290,290 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:20:49,321,321 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:20:49,337,337 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:26:29,758,758 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:26:30,042,042 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:26:31,002,002 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:26:31,003,003 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:26:31,004,004 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:26:31,005,005 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:26:31,006,006 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:26:31,006,006 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:31,006,006 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:31,006,006 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:26:31,006,006 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:26:31,008,008 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:26:31,008,008 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:26:31,008,008 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:31,008,008 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:31,008,008 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:26:31,052,052 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:26:31,068,068 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:26:33,506,506 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:26:33,506,506 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:26:39,217,217 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:26:39,217,217 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:26:39,219,219 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:26:39,220,220 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:26:39,221,221 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:26:39,221,221 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:39,221,221 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:39,221,221 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:26:39,222,222 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:26:39,223,223 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:26:39,223,223 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:26:39,223,223 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:39,223,223 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:39,223,223 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:26:39,275,275 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 22:26:39,276,276 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 22:26:39,276,276 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:26:39,821,821 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:26:39,821,821 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:26:39,822,822 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:26:39,824,824 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:26:39,825,825 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:26:39,825,825 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:39,825,825 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:39,825,825 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:26:39,826,826 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:26:39,828,828 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:26:39,829,829 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:26:39,829,829 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:39,829,829 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:26:39,829,829 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:26:39,863,863 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:26:39,874,874 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:26:43,121,121 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:26:43,158,158 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:26:43] "GET / HTTP/1.1" 200 -
2025-06-25 22:26:43,207,207 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:26:43] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 22:26:43,319,319 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:26:43] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 22:26:43,365,365 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:26:43,366,366 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:26:43,366,366 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:26:43] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:26:59,154,154 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 22:26:59.153540
2025-06-25 22:26:59,157,157 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 22:26:59,158,158 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T22:26:59.153540
2025-06-25 22:26:59,158,158 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:26:59,158,158 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 22:26:59,162,162 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:26:59,163,163 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:26:59,163,163 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 22:26:59,164,164 - __main__ - INFO -    operation_type: locker_out
2025-06-25 22:26:59,164,164 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 22:26:59,165,165 - __main__ - INFO -    operation_date: 20250625
2025-06-25 22:26:59,165,165 - __main__ - INFO -    source: api_request
2025-06-25 22:26:59,165,165 - __main__ - INFO -    template_data present: True
2025-06-25 22:26:59,166,166 - __main__ - INFO - Starting AI agent processing
2025-06-25 22:26:59,168,168 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 26th june', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250625', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 22:26:59,217,217 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 22:26:59,221,221 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 22:26:59,228,228 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 22:27:04,454,454 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate Locker S-OUT document for June 25th, 2025 (confidence: 0.98) in 5.29s
2025-06-25 22:27:04,455,455 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate Locker S-OUT document for June 25th, 2025
2025-06-25 22:27:04,455,455 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 22:27:15,035,035 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 10.58s
2025-06-25 22:27:15,036,036 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:27:15,036,036 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 22:27:15,036,036 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 22:27:15,036,036 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 22:27:15,036,036 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250625_222715_03623', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 22:27:15.036754
2025-06-25 22:27:29,596,596 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 22:27:29,600,600 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250625_222715_03623
2025-06-25 22:27:29,601,601 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250625_222715_03623_222729_221
2025-06-25 22:27:29,602,602 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 22:27:29,602,602 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250625_222715_03623_222729_221, space: SCG, parent ID: 5880757738 in 14.57s
2025-06-25 22:27:29,603,603 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:27:29,603,603 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:27:29,603,603 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250625_222715_03623_222729_221' in space 'SCG'
2025-06-25 22:27:29,603,603 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250625_222715_03623_222729_221"
2025-06-25 22:27:30,836,836 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919367073, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250625_222715_03623_222729_221
2025-06-25 22:27:30,859,859 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 31.69s
2025-06-25 22:27:30,862,862 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:27:30,862,862 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() takes 3 positional arguments but 7 were given
2025-06-25 22:27:30,864,864 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 257, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id,
        ^^^^^^^^
    ...<4 lines>...
        total_time
        ^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() takes 3 positional arguments but 7 were given

2025-06-25 22:27:30,864,864 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 31.71s
2025-06-25 22:27:30,864,864 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:27:30,864,864 - __main__ - INFO - ğŸ“Š Generation completed in 31.71s
2025-06-25 22:27:30,865,865 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:27:30] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 22:28:08,352,352 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:28:08] "GET /dashboard HTTP/1.1" 200 -
2025-06-25 22:28:08,384,384 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:28:08] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 22:28:08,443,443 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:28:08] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 22:28:08,517,517 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:28:08,517,517 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:28:08,518,518 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:28:08] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:28:08,534,534 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:28:08] "GET /api/dashboard/stats?_t=1750870688446 HTTP/1.1" 200 -
2025-06-25 22:28:08,542,542 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 22:28:08] "GET /api/dashboard/activity?limit=15&_t=1750870688446 HTTP/1.1" 200 -
2025-06-25 22:30:21,120,120 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:30:23,344,344 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:30:23,481,481 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:30:23,482,482 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:31:54,276,276 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:31:54,277,277 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:31:54,281,281 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:31:54,282,282 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:31:54,282,282 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:31:54,282,282 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:31:54,283,283 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:31:54,283,283 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:31:54,284,284 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:31:54,288,288 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:31:54,289,289 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:31:54,289,289 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:31:54,289,289 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:31:54,289,289 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:31:54,353,353 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 22:31:54,353,353 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 22:31:54,355,355 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:31:54,925,925 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:31:54,925,925 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:31:54,926,926 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:31:54,928,928 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:31:54,929,929 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:31:54,929,929 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:31:54,929,929 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:31:54,929,929 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:31:54,930,930 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:31:54,932,932 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:31:54,934,934 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:31:54,934,934 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:31:54,934,934 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:31:54,934,934 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:31:54,961,961 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:31:54,989,989 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:31:57,100,100 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:31:57,119,119 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:31:57] "GET / HTTP/1.1" 200 -
2025-06-25 22:31:57,151,151 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:31:57] "GET /static/css/style.css HTTP/1.1" 200 -
2025-06-25 22:31:57,152,152 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:31:57] "GET /static/js/app.js HTTP/1.1" 200 -
2025-06-25 22:31:57,194,194 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:31:57,195,195 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:31:57,196,196 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:31:57] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:32:08,494,494 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 22:32:08.494641
2025-06-25 22:32:08,495,495 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 22:32:08,495,495 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T22:32:08.494641
2025-06-25 22:32:08,495,495 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:32:08,495,495 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 22:32:08,496,496 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:32:08,496,496 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:32:08,496,496 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 22:32:08,496,496 - __main__ - INFO -    operation_type: locker_out
2025-06-25 22:32:08,496,496 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 22:32:08,496,496 - __main__ - INFO -    operation_date: 20250702
2025-06-25 22:32:08,496,496 - __main__ - INFO -    source: api_request
2025-06-25 22:32:08,496,496 - __main__ - INFO -    template_data present: True
2025-06-25 22:32:08,496,496 - __main__ - INFO - Starting AI agent processing
2025-06-25 22:32:08,497,497 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for 3rd july', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250702', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 22:32:08,550,550 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 22:32:08,552,552 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 22:32:08,560,560 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 22:32:14,452,452 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate a Locker S-OUT procedure document for July 2nd, 2025 (confidence: 0.98) in 5.96s
2025-06-25 22:32:14,454,454 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate a Locker S-OUT procedure document for July 2nd, 2025
2025-06-25 22:32:14,454,454 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 22:32:23,073,073 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 5 steps in 8.62s
2025-06-25 22:32:23,075,075 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:32:23,077,077 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 22:32:23,078,078 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 22:32:23,078,078 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 22:32:23,079,079 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250702_223223_07578', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 22:32:23.078645
2025-06-25 22:32:38,937,937 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 22:32:38,939,939 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250702_223223_07578
2025-06-25 22:32:38,939,939 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250702_223223_07578_223238_132
2025-06-25 22:32:38,939,939 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-25 22:32:38,940,940 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250702_223223_07578_223238_132, space: SCG, parent ID: 5880757738 in 15.87s
2025-06-25 22:32:38,941,941 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:32:38,941,941 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:32:38,941,941 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250702_223223_07578_223238_132' in space 'SCG'
2025-06-25 22:32:38,972,972 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250702_223223_07578_223238_132"
2025-06-25 22:32:40,174,174 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920396626, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250702_223223_07578_223238_132
2025-06-25 22:32:40,195,195 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 31.70s
2025-06-25 22:32:40,198,198 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:32:40,199,199 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() takes 3 positional arguments but 4 were given
2025-06-25 22:32:40,201,201 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 227, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id,
        ^^^^^^^^
        operation_type,
        ^^^^^^^^^^^^^^^
        result
        ^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() takes 3 positional arguments but 4 were given

2025-06-25 22:32:40,201,201 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 31.70s
2025-06-25 22:32:40,202,202 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:32:40] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 22:38:49,335,335 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:38:51,438,438 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:38:52,190,190 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:38:52,190,190 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:38:52,191,191 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:38:52,192,192 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:38:52,193,193 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:38:52,193,193 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:38:52,193,193 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:38:52,193,193 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:38:52,194,194 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:38:52,195,195 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:38:52,195,195 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:38:52,195,195 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:38:52,195,195 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:38:52,196,196 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:38:52,238,238 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:38:52,251,251 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:39:25,148,148 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:39:25,252,252 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:39:26,119,119 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:39:26,120,120 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:39:26,121,121 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:39:26,121,121 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:39:26,122,122 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:39:26,122,122 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:39:26,122,122 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:39:26,122,122 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:39:26,124,124 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:39:26,129,129 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:39:26,129,129 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:39:26,129,129 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:39:26,129,129 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:39:26,129,129 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:39:26,164,164 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:39:26,186,186 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:40:09,053,053 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:40:09,241,241 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:40:10,082,082 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:40:10,083,083 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:40:10,084,084 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:40:10,085,085 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:40:10,086,086 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:40:10,086,086 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:10,086,086 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:10,086,086 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:40:10,086,086 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:40:10,088,088 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:40:10,088,088 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:40:10,088,088 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:10,088,088 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:10,088,088 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:40:10,123,123 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:40:10,137,137 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:40:42,709,709 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:40:42,822,822 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:40:43,602,602 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:40:43,602,602 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:40:43,605,605 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:40:43,607,607 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:40:43,608,608 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:40:43,608,608 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:43,608,608 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:43,608,608 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:40:43,609,609 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:40:43,612,612 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:40:43,614,614 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:40:43,614,614 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:43,614,614 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:43,614,614 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:40:43,654,654 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:40:43,672,672 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:40:47,172,172 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:40:47,172,172 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:40:56,568,568 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:40:56,568,568 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:40:56,569,569 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:40:56,570,570 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:40:56,571,571 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:40:56,571,571 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:56,571,571 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:56,571,571 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:40:56,571,571 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:40:56,573,573 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:40:56,573,573 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:40:56,574,574 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:56,574,574 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:56,574,574 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:40:57,000,000 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 22:40:57,000,000 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 22:40:57,001,001 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:40:57,543,543 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:40:57,543,543 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:40:57,544,544 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:40:57,546,546 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:40:57,546,546 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:40:57,547,547 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:57,547,547 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:57,547,547 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:40:57,547,547 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:40:57,549,549 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:40:57,549,549 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:40:57,549,549 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:57,549,549 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:40:57,550,550 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:40:57,579,579 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:40:57,596,596 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:40:59,513,513 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:40:59,549,549 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:40:59] "GET / HTTP/1.1" 200 -
2025-06-25 22:40:59,584,584 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:40:59] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 22:40:59,592,592 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:40:59] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 22:40:59,660,660 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:40:59,662,662 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:40:59,663,663 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:40:59] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:41:11,916,916 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 22:41:11.916442
2025-06-25 22:41:11,916,916 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 22:41:11,916,916 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T22:41:11.916442
2025-06-25 22:41:11,916,916 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 6th August
2025-06-25 22:41:11,916,916 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 22:41:11,917,917 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=None, display_date=None
2025-06-25 22:41:11,919,919 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:41:11,919,919 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 22:41:11,919,919 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:41:11,920,920 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:41:11,920,920 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 22:41:11,920,920 - __main__ - INFO -    operation_type: locker_out
2025-06-25 22:41:11,920,920 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 22:41:11,920,920 - __main__ - INFO -    operation_date: 20250805
2025-06-25 22:41:11,920,920 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 22:41:11,920,920 - __main__ - INFO -    source: api_request
2025-06-25 22:41:11,920,920 - __main__ - INFO -    template_data present: True
2025-06-25 22:41:11,920,920 - __main__ - INFO - Starting AI agent processing
2025-06-25 22:41:11,920,920 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for 6th August', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250805', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 22:41:11,966,966 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 22:41:11,967,967 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 22:41:11,976,976 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 22:41:17,431,431 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate a locker out procedure document for August 5th, 2025 (confidence: 0.98) in 5.51s
2025-06-25 22:41:17,431,431 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate a locker out procedure document for August 5th, 2025
2025-06-25 22:41:17,432,432 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 22:41:24,385,385 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 5 steps in 6.95s
2025-06-25 22:41:24,389,389 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:41:24,393,393 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 22:41:24,394,394 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 22:41:24,394,394 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 22:41:24,394,394 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250805_224124_38998', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 22:41:24.394216
2025-06-25 22:41:39,241,241 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 22:41:39,251,251 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250805_224124_38998
2025-06-25 22:41:39,252,252 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250805_224124_38998_224139_318
2025-06-25 22:41:39,252,252 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20955 characters
2025-06-25 22:41:39,271,271 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250805_224124_38998_224139_318, space: SCG, parent ID: 5880757738 in 14.88s
2025-06-25 22:41:39,275,275 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:41:39,275,275 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:41:39,275,275 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250805_224124_38998_224139_318' in space 'SCG'
2025-06-25 22:41:39,275,275 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250805_224124_38998_224139_318"
2025-06-25 22:41:40,523,523 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920396638, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250805_224124_38998_224139_318
2025-06-25 22:41:40,528,528 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 28.61s
2025-06-25 22:41:40,533,533 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:41:40,533,533 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'template_file'
2025-06-25 22:41:40,535,535 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 285, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<12 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'template_file'

2025-06-25 22:41:40,535,535 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 28.62s
2025-06-25 22:41:40,536,536 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:41:40,536,536 - __main__ - INFO - ğŸ“Š Generation completed in 28.62s
2025-06-25 22:41:40,536,536 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:41:40] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 22:44:51,542,542 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:44:53,688,688 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:44:54,837,837 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:44:54,837,837 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:44:54,839,839 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:44:54,840,840 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:44:54,841,841 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:44:54,841,841 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:44:54,841,841 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:44:54,841,841 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:44:54,842,842 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:44:54,843,843 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:44:54,843,843 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:44:54,844,844 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:44:54,844,844 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:44:54,844,844 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:44:54,885,885 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:44:54,910,910 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:45:17,693,693 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:45:17,833,833 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:45:17,957,957 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:45:17,958,958 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 22:50:21,774,774 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:50:21,775,775 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:50:21,777,777 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:50:21,779,779 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:50:21,780,780 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:50:21,780,780 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:50:21,780,780 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:50:21,780,780 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:50:21,781,781 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:50:21,782,782 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:50:21,782,782 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:50:21,782,782 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:50:21,782,782 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:50:21,782,782 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:50:21,842,842 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 22:50:21,842,842 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 22:50:21,843,843 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:50:22,393,393 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:50:22,393,393 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:50:22,395,395 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:50:22,396,396 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:50:22,397,397 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:50:22,397,397 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:50:22,397,397 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:50:22,397,397 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:50:22,398,398 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:50:22,400,400 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:50:22,400,400 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:50:22,400,400 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:50:22,400,400 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:50:22,400,400 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:50:22,432,432 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:50:22,452,452 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:50:24,336,336 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:50:24,350,350 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:50:24] "GET / HTTP/1.1" 200 -
2025-06-25 22:50:24,382,382 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:50:24] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 22:50:24,391,391 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:50:24] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 22:50:24,452,452 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 22:50:24,465,465 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 22:50:24,467,467 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:50:24] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 22:50:42,715,715 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 22:50:42.714976
2025-06-25 22:50:42,716,716 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 22:50:42,717,717 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T22:50:42.714976
2025-06-25 22:50:42,717,717 - __main__ - INFO - ğŸ§  Parsing prompt: locker out 6th August
2025-06-25 22:50:42,717,717 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 22:50:42,719,719 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=None, display_date=None
2025-06-25 22:50:42,727,727 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:50:42,727,727 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 22:50:42,729,729 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:50:42,729,729 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 22:50:42,729,729 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 22:50:42,729,729 - __main__ - INFO -    operation_type: locker_out
2025-06-25 22:50:42,729,729 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 22:50:42,729,729 - __main__ - INFO -    operation_date: 20250805
2025-06-25 22:50:42,729,729 - __main__ - INFO -    display_date: 25 June 2025
2025-06-25 22:50:42,729,729 - __main__ - INFO -    source: api_request
2025-06-25 22:50:42,729,729 - __main__ - INFO -    template_data present: True
2025-06-25 22:50:42,730,730 - __main__ - INFO - Starting AI agent processing
2025-06-25 22:50:42,734,734 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out 6th August', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250805', 'display_date': '25 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 22:50:42,794,794 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 22:50:42,797,797 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 22:50:42,809,809 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 22:50:48,106,106 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 5.37s
2025-06-25 22:50:48,107,107 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-25 22:50:48,107,107 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 22:50:56,522,522 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 7 steps in 8.41s
2025-06-25 22:50:56,522,522 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:50:56,523,523 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 22:50:56,524,524 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 22:50:56,524,524 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 22:50:56,525,525 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250805_225056_52309', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 22:50:56.524612
2025-06-25 22:51:14,150,150 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 22:51:14,157,157 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250805_225056_52309
2025-06-25 22:51:14,158,158 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250805_225056_52309_225114_212
2025-06-25 22:51:14,158,158 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20955 characters
2025-06-25 22:51:14,158,158 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250805_225056_52309_225114_212, space: SCG, parent ID: 5880757738 in 17.64s
2025-06-25 22:51:14,159,159 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:51:14,160,160 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:51:14,161,161 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250805_225056_52309_225114_212' in space 'SCG'
2025-06-25 22:51:14,161,161 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250805_225056_52309_225114_212"
2025-06-25 22:51:15,405,405 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920753732, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250805_225056_52309_225114_212
2025-06-25 22:51:15,433,433 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 32.70s
2025-06-25 22:51:15,437,437 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:51:15,437,437 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'source'
2025-06-25 22:51:15,439,439 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 300, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
    ...<2 lines>...
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'source'

2025-06-25 22:51:15,439,439 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 32.72s
2025-06-25 22:51:15,440,440 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 22:51:15,440,440 - __main__ - INFO - ğŸ“Š Generation completed in 32.73s
2025-06-25 22:51:15,440,440 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 22:51:15] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 22:53:47,806,806 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:53:49,921,921 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:53:50,632,632 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:53:50,632,632 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:53:50,633,633 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:53:50,634,634 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:53:50,635,635 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:53:50,635,635 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:53:50,635,635 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:53:50,635,635 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:53:50,636,636 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:53:50,637,637 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:53:50,637,637 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:53:50,637,637 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:53:50,637,637 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:53:50,637,637 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:53:50,676,676 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:53:50,694,694 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:57:08,379,379 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:57:08,656,656 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:57:09,565,565 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:57:09,565,565 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:57:09,566,566 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:57:09,568,568 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:57:09,569,569 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:57:09,569,569 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:57:09,569,569 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:57:09,569,569 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:57:09,570,570 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:57:09,571,571 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:57:09,571,571 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:57:09,571,571 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:57:09,571,571 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:57:09,571,571 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:57:09,611,611 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:57:09,636,636 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:59:12,424,424 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:59:12,717,717 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:59:13,504,504 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:59:13,504,504 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:59:13,505,505 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:59:13,506,506 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:59:13,506,506 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:59:13,506,506 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:59:13,506,506 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:59:13,506,506 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:59:13,507,507 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:59:13,508,508 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:59:13,508,508 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:59:13,508,508 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:59:13,508,508 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:59:13,508,508 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:59:13,539,539 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:59:13,562,562 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 22:59:25,626,626 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 22:59:26,063,063 - werkzeug - INFO -  * Restarting with stat
2025-06-25 22:59:27,171,171 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 22:59:27,171,171 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 22:59:27,173,173 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:59:27,176,176 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:59:27,176,176 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:59:27,176,176 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:59:27,176,176 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:59:27,176,176 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:59:27,177,177 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 22:59:27,179,179 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 22:59:27,180,180 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 22:59:27,180,180 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 22:59:27,180,180 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 22:59:27,180,180 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 22:59:27,236,236 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 22:59:27,249,249 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:00:03,542,542 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 23:00:03,543,543 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 23:00:05,480,480 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:00:05,480,480 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:00:05,481,481 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:00:05,485,485 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:00:05,486,486 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:00:05,486,486 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:05,486,486 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:05,486,486 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:00:05,487,487 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:00:05,488,488 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:00:05,488,488 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:00:05,489,489 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:05,489,489 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:05,489,489 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:00:05,540,540 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 23:00:05,540,540 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 23:00:05,541,541 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:00:06,094,094 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:00:06,094,094 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:00:06,095,095 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:00:06,096,096 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:00:06,097,097 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:00:06,097,097 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:06,097,097 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:06,097,097 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:00:06,098,098 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:00:06,098,098 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:00:06,099,099 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:00:06,099,099 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:06,099,099 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:06,099,099 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:00:06,126,126 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 23:00:06,140,140 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:00:08,783,783 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:00:08,799,799 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:00:08] "GET / HTTP/1.1" 200 -
2025-06-25 23:00:08,842,842 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:00:08] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 23:00:08,843,843 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:00:08] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 23:00:08,886,886 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 23:00:08,887,887 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:00:08,888,888 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:00:08] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 23:00:23,500,500 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 23:00:23.500052
2025-06-25 23:00:23,500,500 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 23:00:23,501,501 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T23:00:23.500052
2025-06-25 23:00:23,501,501 - __main__ - INFO - ğŸ§  Parsing prompt: locker out 8th august
2025-06-25 23:00:23,501,501 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 23:00:23,505,505 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250808 -> 08 August 2025
2025-06-25 23:00:23,505,505 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250808, display_date=08 August 2025
2025-06-25 23:00:23,505,505 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:00:23,505,505 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 23:00:23,506,506 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:00:23,506,506 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:00:23,506,506 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 23:00:23,506,506 - __main__ - INFO -    operation_type: locker_out
2025-06-25 23:00:23,506,506 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 23:00:23,506,506 - __main__ - INFO -    operation_date: 20250807
2025-06-25 23:00:23,506,506 - __main__ - INFO -    display_date: 8 August 2025
2025-06-25 23:00:23,506,506 - __main__ - INFO -    source: prompt_parsed
2025-06-25 23:00:23,506,506 - __main__ - INFO -    template_data present: True
2025-06-25 23:00:23,507,507 - __main__ - INFO - Starting AI agent processing
2025-06-25 23:00:23,507,507 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out 8th august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250807', 'display_date': '8 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 23:00:23,549,549 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 23:00:23,551,551 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 23:00:23,557,557 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 23:00:28,892,892 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Locker S-OUT operation on 8 August 2025 (confidence: 0.98) in 5.39s
2025-06-25 23:00:28,893,893 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Locker S-OUT operation on 8 August 2025
2025-06-25 23:00:28,893,893 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 23:00:36,596,596 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 7.70s
2025-06-25 23:00:36,597,597 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:00:36,598,598 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 23:00:36,598,598 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 23:00:36,598,598 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 23:00:36,599,599 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250807_230036_59755', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 23:00:36.599277
2025-06-25 23:00:50,843,843 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 23:00:50,851,851 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250807_230036_59755
2025-06-25 23:00:50,852,852 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250807_230036_59755_230050_857
2025-06-25 23:00:50,852,852 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20955 characters
2025-06-25 23:00:50,852,852 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250807_230036_59755_230050_857, space: SCG, parent ID: 5880757738 in 14.26s
2025-06-25 23:00:50,852,852 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:50,853,853 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:00:50,853,853 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250807_230036_59755_230050_857' in space 'SCG'
2025-06-25 23:00:50,853,853 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250807_230036_59755_230050_857"
2025-06-25 23:00:52,047,047 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920753745, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250807_230036_59755_230050_857
2025-06-25 23:00:52,055,055 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 28.55s
2025-06-25 23:00:52,060,060 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:00:52,060,060 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'result'
2025-06-25 23:00:52,066,066 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 302, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
        result=store_result,
        ^^^^^^^^^^^^^^^^^^^^
        generation_time=total_time
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'result'

2025-06-25 23:00:52,067,067 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 28.56s
2025-06-25 23:00:52,067,067 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:00:52,068,068 - __main__ - INFO - ğŸ“Š Generation completed in 28.57s
2025-06-25 23:00:52,068,068 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:00:52] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 23:04:26,072,072 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 23:04:28,233,233 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:04:28,346,346 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 23:04:28,346,346 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 23:13:39,158,158 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:13:39,158,158 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:13:39,161,161 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:13:39,163,163 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:13:39,163,163 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:13:39,163,163 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:13:39,163,163 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:13:39,163,163 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:13:39,164,164 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:13:39,166,166 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:13:39,166,166 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:13:39,166,166 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:13:39,167,167 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:13:39,167,167 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:13:39,577,577 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 23:13:39,577,577 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 23:13:39,578,578 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:13:40,138,138 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:13:40,139,139 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:13:40,140,140 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:13:40,141,141 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:13:40,142,142 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:13:40,142,142 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:13:40,142,142 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:13:40,142,142 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:13:40,143,143 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:13:40,144,144 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:13:40,145,145 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:13:40,145,145 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:13:40,145,145 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:13:40,145,145 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:13:40,176,176 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 23:13:40,190,190 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:13:43,614,614 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:13:43,624,624 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:13:43] "GET / HTTP/1.1" 200 -
2025-06-25 23:13:43,652,652 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:13:43] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 23:13:43,700,700 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:13:43] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 23:13:43,816,816 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 23:13:43,817,817 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:13:43,817,817 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:13:43] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 23:13:57,856,856 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25 23:13:57.856176
2025-06-25 23:13:57,856,856 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 23:13:57,857,857 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T23:13:57.856176
2025-06-25 23:13:57,857,857 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 24th august
2025-06-25 23:13:57,858,858 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 23:13:57,865,865 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250824 -> 24 August 2025
2025-06-25 23:13:57,865,865 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250824, display_date=24 August 2025
2025-06-25 23:13:57,866,866 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:13:57,867,867 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 23:13:57,868,868 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:13:57,868,868 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:13:57,868,868 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 23:13:57,869,869 - __main__ - INFO -    operation_type: locker_out
2025-06-25 23:13:57,869,869 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 23:13:57,869,869 - __main__ - INFO -    operation_date: 20250823
2025-06-25 23:13:57,869,869 - __main__ - INFO -    display_date: 24 August 2025
2025-06-25 23:13:57,869,869 - __main__ - INFO -    source: prompt_parsed
2025-06-25 23:13:57,869,869 - __main__ - INFO -    template_data present: True
2025-06-25 23:13:57,869,869 - __main__ - INFO - Starting AI agent processing
2025-06-25 23:13:57,870,870 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 24th august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250823', 'display_date': '24 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 23:13:57,929,929 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 23:13:57,931,931 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 23:13:57,939,939 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 23:14:03,190,190 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Schedule a locker S-OUT operation for August 24th, 2025 (confidence: 0.98) in 5.32s
2025-06-25 23:14:03,191,191 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Schedule a locker S-OUT operation for August 24th, 2025
2025-06-25 23:14:03,191,191 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 23:14:11,324,324 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 8.13s
2025-06-25 23:14:11,331,331 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:14:11,334,334 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 23:14:11,335,335 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 23:14:11,335,335 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 23:14:11,337,337 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250823_231411_33141', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 23:14:11.337383
2025-06-25 23:14:25,958,958 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 23:14:25,960,960 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250823_231411_33141
2025-06-25 23:14:25,960,960 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250823_231411_33141_231425_612
2025-06-25 23:14:25,960,960 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20955 characters
2025-06-25 23:14:25,961,961 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250823_231411_33141_231425_612, space: SCG, parent ID: 5880757738 in 14.63s
2025-06-25 23:14:25,961,961 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:14:25,962,962 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:14:25,962,962 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250823_231411_33141_231425_612' in space 'SCG'
2025-06-25 23:14:25,962,962 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250823_231411_33141_231425_612"
2025-06-25 23:14:27,341,341 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919337167, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250823_231411_33141_231425_612
2025-06-25 23:14:27,345,345 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 29.48s
2025-06-25 23:14:27,348,348 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:14:27,348,348 - __main__ - ERROR - ğŸ“Š CRITICAL: Failed to store page creation: AgentMemory.store_page_creation() got an unexpected keyword argument 'page_info'
2025-06-25 23:14:27,351,351 - __main__ - ERROR - ğŸ“Š Store error traceback: Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py", line 303, in generate_confluence
    ai_agent.memory.store_page_creation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        user_id=user_id,
        ^^^^^^^^^^^^^^^^
        page_info=page_info
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: AgentMemory.store_page_creation() got an unexpected keyword argument 'page_info'

2025-06-25 23:14:27,351,351 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 29.49s
2025-06-25 23:14:27,351,351 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:14:27,351,351 - __main__ - INFO - ğŸ“Š Generation completed in 29.50s
2025-06-25 23:14:27,351,351 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:14:27] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 23:21:52,348,348 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 23:21:54,493,493 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:21:55,241,241 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:21:55,241,241 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:21:55,243,243 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:21:55,245,245 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:21:55,246,246 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:21:55,246,246 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:21:55,246,246 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:21:55,247,247 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:21:55,247,247 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:21:55,249,249 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:21:55,249,249 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:21:55,249,249 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:21:55,249,249 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:21:55,249,249 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:21:55,292,292 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 23:21:55,328,328 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:21:59,511,511 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:21:59,524,524 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:21:59] "GET / HTTP/1.1" 200 -
2025-06-25 23:21:59,557,557 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:21:59] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 23:21:59,557,557 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:21:59] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 23:21:59,573,573 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 23:21:59,574,574 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:21:59,575,575 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:21:59] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 23:22:12,217,217 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-25 23:22:12.217089
2025-06-25 23:22:12,220,220 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-25 23:22:12,220,220 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T23:22:12.217089
2025-06-25 23:22:12,220,220 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 29th august
2025-06-25 23:22:12,221,221 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 23:22:12,234,234 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250829 -> 29 August 2025
2025-06-25 23:22:12,234,234 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250829, display_date=29 August 2025
2025-06-25 23:22:12,234,234 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:22:12,235,235 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 23:22:12,236,236 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:22:12,236,236 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:22:12,236,236 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 23:22:12,236,236 - __main__ - INFO -    operation_type: locker_out
2025-06-25 23:22:12,237,237 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 23:22:12,237,237 - __main__ - INFO -    operation_date: 20250828
2025-06-25 23:22:12,237,237 - __main__ - INFO -    display_date: 29 August 2025
2025-06-25 23:22:12,237,237 - __main__ - INFO -    source: prompt_parsed
2025-06-25 23:22:12,237,237 - __main__ - INFO -    template_data present: True
2025-06-25 23:22:12,237,237 - __main__ - INFO - Starting AI agent processing
2025-06-25 23:22:12,237,237 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for 29th august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250828', 'display_date': '29 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 23:22:12,303,303 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 23:22:12,306,306 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 23:22:12,314,314 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 23:22:17,531,531 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate Locker S-OUT document for August 29th, 2025 (confidence: 0.98) in 5.29s
2025-06-25 23:22:17,533,533 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate Locker S-OUT document for August 29th, 2025
2025-06-25 23:22:17,533,533 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 23:22:25,024,024 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 4 steps in 7.49s
2025-06-25 23:22:25,027,027 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:22:25,028,028 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 23:22:25,029,029 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 23:22:25,029,029 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 23:22:25,030,030 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250828_232225_02823', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 23:22:25.029812
2025-06-25 23:22:39,813,813 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 23:22:39,815,815 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250828_232225_02823
2025-06-25 23:22:39,815,815 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250828_232225_02823_232239_818
2025-06-25 23:22:39,815,815 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20955 characters
2025-06-25 23:22:39,816,816 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250828_232225_02823_232239_818, space: SCG, parent ID: 5880757738 in 14.79s
2025-06-25 23:22:39,816,816 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:22:39,817,817 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:22:39,817,817 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250828_232225_02823_232239_818' in space 'SCG'
2025-06-25 23:22:39,817,817 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250828_232225_02823_232239_818"
2025-06-25 23:22:40,962,962 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920396696, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250828_232225_02823_232239_818
2025-06-25 23:22:40,969,969 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 28.73s
2025-06-25 23:22:40,976,976 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:22:40,979,979 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-25 23:22:40,979,979 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250828_232225_02823_232239_818
2025-06-25 23:22:40,979,979 - __main__ - INFO -    Operation: locker_out
2025-06-25 23:22:40,979,979 - __main__ - INFO -    Success: True
2025-06-25 23:22:40,979,979 - __main__ - INFO -    Timestamp: 2025-06-25T23:22:40.979724
2025-06-25 23:22:40,979,979 - __main__ - INFO -    Database: agent_memory.db
2025-06-25 23:22:40,980,980 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 28.76s
2025-06-25 23:22:40,981,981 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:22:40,981,981 - __main__ - INFO - ğŸ“Š Generation completed in 28.76s
2025-06-25 23:22:40,981,981 - werkzeug - INFO - 127.0.0.1 - - [25/Jun/2025 23:22:40] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 23:27:24,456,456 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 23:27:26,622,622 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:27:27,365,365 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:27:27,365,365 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:27:27,366,366 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:27:27,368,368 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:27:27,369,369 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:27:27,369,369 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:27:27,369,369 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:27:27,369,369 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:27:27,370,370 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:27:27,371,371 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:27:27,372,372 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:27:27,372,372 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:27:27,372,372 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:27:27,372,372 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:27:27,418,418 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 23:27:27,443,443 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:27:33,452,452 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 23:27:33,452,452 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-25 23:28:16,462,462 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:28:16,463,463 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:28:16,466,466 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:28:16,467,467 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:28:16,468,468 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:28:16,468,468 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:16,469,469 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:16,469,469 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:28:16,469,469 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:28:16,471,471 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:28:16,472,472 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:28:16,472,472 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:16,472,472 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:16,472,472 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:28:16,522,522 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.41.65:5000
2025-06-25 23:28:16,522,522 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-25 23:28:16,523,523 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:28:17,041,041 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:28:17,042,042 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:28:17,043,043 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:28:17,044,044 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:28:17,044,044 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:28:17,045,045 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:17,045,045 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:17,045,045 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:28:17,045,045 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:28:17,046,046 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:28:17,047,047 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:28:17,047,047 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:17,047,047 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:17,047,047 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:28:17,077,077 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 23:28:17,091,091 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:28:19,388,388 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:28:19,400,400 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:28:19] "GET / HTTP/1.1" 200 -
2025-06-25 23:28:19,431,431 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:28:19] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 23:28:19,530,530 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:28:19] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 23:28:19,595,595 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 23:28:19,595,595 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:28:19,595,595 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:28:19] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 23:28:35,696,696 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-25 23:28:35.696193
2025-06-25 23:28:35,696,696 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 23:28:35,696,696 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T23:28:35.696193
2025-06-25 23:28:35,696,696 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 4th august
2025-06-25 23:28:35,697,697 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 23:28:35,709,709 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250804 -> 04 August 2025
2025-06-25 23:28:35,709,709 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250804, display_date=04 August 2025
2025-06-25 23:28:35,710,710 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 23:28:35,710,710 - __main__ - INFO -    operation_type: locker_out
2025-06-25 23:28:35,710,710 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 23:28:35,710,710 - __main__ - INFO -    operation_date: 20250803
2025-06-25 23:28:35,710,710 - __main__ - INFO -    display_date: 4 August 2025
2025-06-25 23:28:35,710,710 - __main__ - INFO -    source: prompt_parsed
2025-06-25 23:28:35,711,711 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:28:35,711,711 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 23:28:35,712,712 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:28:35,712,712 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:28:35,712,712 - __main__ - INFO - Starting AI agent processing
2025-06-25 23:28:35,713,713 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 4th august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250803', 'display_date': '4 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 23:28:35,759,759 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 23:28:35,761,761 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 23:28:35,769,769 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 23:28:41,061,061 - utils.ai_agent - ERROR - ğŸ§  JSON parsing failed: Expecting ',' delimiter: line 18 column 50 (char 904)
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 236, in _analyze_user_intent
    intent_analysis = json.loads(self._clean_json_response(response.text))
  File "/opt/homebrew/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 18 column 50 (char 904)

2025-06-25 23:28:41,061,061 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-25 23:28:41,062,062 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 23:28:41,493,493 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 18
}
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 18
}
]

2025-06-25 23:28:41,499,499 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:28:41,500,500 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 23:28:41,500,500 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 23:28:41,500,500 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 23:28:41,500,500 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250803_232841_49986', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 23:28:41.500551
2025-06-25 23:28:56,131,131 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 23:28:56,135,135 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250803_232841_49986
2025-06-25 23:28:56,136,136 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250803_232841_49986_232856_896
2025-06-25 23:28:56,136,136 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20955 characters
2025-06-25 23:28:56,145,145 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250803_232841_49986_232856_896, space: SCG, parent ID: 5880757738 in 14.65s
2025-06-25 23:28:56,146,146 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:56,146,146 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:28:56,146,146 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250803_232841_49986_232856_896' in space 'SCG'
2025-06-25 23:28:56,147,147 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250803_232841_49986_232856_896"
2025-06-25 23:28:57,257,257 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920396700, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250803_232841_49986_232856_896
2025-06-25 23:28:57,286,286 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 21.57s
2025-06-25 23:28:57,289,289 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:28:57,291,291 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-25 23:28:57,291,291 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250803_232857_74337_1750874337_21593
2025-06-25 23:28:57,291,291 - __main__ - INFO -    Operation: locker_out
2025-06-25 23:28:57,291,291 - __main__ - INFO -    Success: True
2025-06-25 23:28:57,291,291 - __main__ - INFO -    Timestamp: 2025-06-25T23:28:57.291452
2025-06-25 23:28:57,291,291 - __main__ - INFO -    Database: agent_memory.db
2025-06-25 23:28:57,291,291 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 21.59s
2025-06-25 23:28:57,292,292 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:28:57,292,292 - __main__ - INFO - ğŸ“Š Generation completed in 21.60s
2025-06-25 23:28:57,292,292 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:28:57] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 23:35:41,918,918 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 23:35:44,065,065 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:35:44,844,844 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:35:44,844,844 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:35:44,845,845 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:35:44,847,847 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:35:44,848,848 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:35:44,848,848 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:35:44,848,848 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:35:44,848,848 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:35:44,849,849 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:35:44,850,850 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:35:44,851,851 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:35:44,851,851 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:35:44,851,851 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:35:44,851,851 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:35:44,888,888 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 23:35:44,904,904 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:36:07,128,128 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:36:07,143,143 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:36:07] "GET / HTTP/1.1" 200 -
2025-06-25 23:36:07,185,185 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:36:07] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-25 23:36:07,212,212 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:36:07] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-25 23:36:07,236,236 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-25 23:36:07,237,237 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-25 23:36:07,237,237 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:36:07] "GET /agent_status HTTP/1.1" 200 -
2025-06-25 23:36:19,438,438 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-25 23:36:19.438753
2025-06-25 23:36:19,441,441 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 23:36:19,441,441 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T23:36:19.438753
2025-06-25 23:36:19,441,441 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 9th august
2025-06-25 23:36:19,442,442 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 23:36:19,459,459 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250809 -> 09 August 2025
2025-06-25 23:36:19,459,459 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250809, display_date=09 August 2025
2025-06-25 23:36:19,460,460 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 23:36:19,460,460 - __main__ - INFO -    operation_type: locker_out
2025-06-25 23:36:19,460,460 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 23:36:19,460,460 - __main__ - INFO -    operation_date: 20250808
2025-06-25 23:36:19,460,460 - __main__ - INFO -    display_date: 9 August 2025
2025-06-25 23:36:19,460,460 - __main__ - INFO -    source: prompt_parsed
2025-06-25 23:36:19,461,461 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:36:19,461,461 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 23:36:19,471,471 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:36:19,472,472 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:36:19,472,472 - __main__ - INFO - Starting AI agent processing
2025-06-25 23:36:19,473,473 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 9th august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250808', 'display_date': '9 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 23:36:19,521,521 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 23:36:19,524,524 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 23:36:19,532,532 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 23:36:22,825,825 - utils.ai_agent - ERROR - ğŸ§  Intent analysis failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 37
}
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 228, in _analyze_user_intent
    response = self.model.generate_content(context_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 37
}
]

2025-06-25 23:36:22,827,827 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-25 23:36:22,827,827 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 23:36:23,583,583 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 36
}
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 36
}
]

2025-06-25 23:36:23,585,585 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:36:23,585,585 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 23:36:23,585,585 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 23:36:23,585,585 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 23:36:23,586,586 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250808_233623_58561', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 23:36:23.586219
2025-06-25 23:36:38,121,121 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-25 23:36:38,124,124 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250808_233623_58561
2025-06-25 23:36:38,124,124 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250808_233623_58561_233638_597
2025-06-25 23:36:38,124,124 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20955 characters
2025-06-25 23:36:38,124,124 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250808_233623_58561_233638_597, space: SCG, parent ID: 5880757738 in 14.54s
2025-06-25 23:36:38,125,125 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:36:38,125,125 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:36:38,125,125 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250808_233623_58561_233638_597' in space 'SCG'
2025-06-25 23:36:38,125,125 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250808_233623_58561_233638_597"
2025-06-25 23:36:39,551,551 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5919337185, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250808_233623_58561_233638_597
2025-06-25 23:36:39,559,559 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 20.09s
2025-06-25 23:36:39,563,563 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:36:39,563,563 - __main__ - WARNING - AI agent modified operation_date from 20250808 to None. Restoring original.
2025-06-25 23:36:39,565,565 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-25 23:36:39,565,565 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250808_233639_74799_1750874799_20124
2025-06-25 23:36:39,565,565 - __main__ - INFO -    Operation: locker_out
2025-06-25 23:36:39,565,565 - __main__ - INFO -    Success: True
2025-06-25 23:36:39,565,565 - __main__ - INFO -    Timestamp: 2025-06-25T23:36:39.565941
2025-06-25 23:36:39,565,565 - __main__ - INFO -    Database: agent_memory.db
2025-06-25 23:36:39,566,566 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 20.12s
2025-06-25 23:36:39,566,566 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:36:39,566,566 - __main__ - INFO - ğŸ“Š Generation completed in 20.13s
2025-06-25 23:36:39,567,567 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:36:39] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-25 23:46:32,634,634 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 23:46:34,922,922 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:46:35,601,601 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:46:35,601,601 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:46:35,603,603 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:46:35,606,606 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:46:35,606,606 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:46:35,606,606 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:46:35,607,607 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:46:35,607,607 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:46:35,607,607 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:46:35,609,609 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:46:35,610,610 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:46:35,610,610 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:46:35,610,610 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:46:35,610,610 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:46:35,644,644 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 23:46:35,659,659 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:48:15,539,539 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-25 23:48:15,644,644 - werkzeug - INFO -  * Restarting with stat
2025-06-25 23:48:16,581,581 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-25 23:48:16,581,581 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:48:16,583,583 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:48:16,584,584 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:48:16,584,584 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:48:16,584,584 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:48:16,584,584 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:48:16,585,585 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:48:16,586,586 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-25 23:48:16,588,588 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-25 23:48:16,589,589 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:48:16,589,589 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:48:16,589,589 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:48:16,589,589 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-25 23:48:16,627,627 - werkzeug - WARNING -  * Debugger is active!
2025-06-25 23:48:16,644,644 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-25 23:48:32,529,529 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-25 23:48:32.529460
2025-06-25 23:48:32,530,530 - __main__ - INFO - Request from user: 10.87.41.65
2025-06-25 23:48:32,530,530 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-25T23:48:32.529460
2025-06-25 23:48:32,531,531 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 9th august
2025-06-25 23:48:32,531,531 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-25 23:48:32,542,542 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250809 -> 09 August 2025
2025-06-25 23:48:32,542,542 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250809, display_date=09 August 2025
2025-06-25 23:48:32,544,544 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-25 23:48:32,544,544 - __main__ - INFO -    operation_type: locker_out
2025-06-25 23:48:32,544,544 - __main__ - INFO -    template_file: locker_out.json
2025-06-25 23:48:32,544,544 - __main__ - INFO -    operation_date: 20250808
2025-06-25 23:48:32,544,544 - __main__ - INFO -    display_date: 9 August 2025
2025-06-25 23:48:32,545,545 - __main__ - INFO -    source: prompt_parsed
2025-06-25 23:48:32,545,545 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-25 23:48:32,546,546 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-25 23:48:32,548,548 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:48:32,548,548 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-25 23:48:32,548,548 - __main__ - INFO - Starting AI agent processing
2025-06-25 23:48:32,548,548 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.41.65, input: {'llm_prompt': 'locker out for 9th august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250808', 'display_date': '9 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-25 23:48:32,586,586 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-25 23:48:32,587,587 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-25 23:48:32,596,596 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-25 23:48:37,108,108 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate a locker out procedure document for August 9th, 2025 (confidence: 0.98) in 4.56s
2025-06-25 23:48:37,109,109 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate a locker out procedure document for August 9th, 2025
2025-06-25 23:48:37,110,110 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-25 23:48:37,525,525 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 22
}
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 22
}
]

2025-06-25 23:48:37,528,528 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-25 23:48:37,528,528 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-25 23:48:37,529,529 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-25 23:48:37,529,529 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-25 23:48:37,529,529 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250808_234837_52861', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-25 23:48:37.529188
2025-06-25 23:48:40,617,617 - utils.universal_llm_generator - ERROR - ğŸ¤– LLM template analysis failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-06-25 23:48:40,618,618 - utils.universal_llm_generator - INFO - ğŸ Creating basic structure fallback
2025-06-25 23:48:40,618,618 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250808_234837_52861
2025-06-25 23:48:40,619,619 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250808_234837_52861_234840_857
2025-06-25 23:48:40,619,619 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 3552 characters
2025-06-25 23:48:40,619,619 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250808_234837_52861_234840_857, space: SCG, parent ID: 5880757738 in 3.09s
2025-06-25 23:48:40,619,619 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-25 23:48:40,619,619 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-25 23:48:40,619,619 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250808_234837_52861_234840_857' in space 'SCG'
2025-06-25 23:48:40,619,619 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250808_234837_52861_234840_857"
2025-06-25 23:48:41,812,812 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5920396728, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250808_234837_52861_234840_857
2025-06-25 23:48:41,828,828 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 9.28s
2025-06-25 23:48:41,832,832 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:48:41,833,833 - __main__ - WARNING - AI agent modified operation_date from 20250808 to None. Restoring original.
2025-06-25 23:48:41,834,834 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-25 23:48:41,834,834 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250808_234841_75521_1750875521_9303
2025-06-25 23:48:41,834,834 - __main__ - INFO -    Operation: locker_out
2025-06-25 23:48:41,834,834 - __main__ - INFO -    Success: True
2025-06-25 23:48:41,834,834 - __main__ - INFO -    Timestamp: 2025-06-25T23:48:41.834788
2025-06-25 23:48:41,834,834 - __main__ - INFO -    Database: agent_memory.db
2025-06-25 23:48:41,834,834 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 9.30s
2025-06-25 23:48:41,835,835 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-25 23:48:41,835,835 - __main__ - INFO - ğŸ“Š Generation completed in 9.31s
2025-06-25 23:48:41,835,835 - werkzeug - INFO - 10.87.41.65 - - [25/Jun/2025 23:48:41] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 11:00:57,084,084 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-26 11:00:59,262,262 - werkzeug - INFO -  * Restarting with stat
2025-06-26 11:01:00,569,569 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 11:01:00,569,569 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:01:00,576,576 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:01:00,579,579 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:01:00,580,580 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:01:00,580,580 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:01:00,580,580 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:01:00,580,580 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:01:00,582,582 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:01:00,584,584 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:01:00,585,585 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:01:00,586,586 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:01:00,586,586 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:01:00,586,586 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:01:00,680,680 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 11:01:00,707,707 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 11:07:45,569,569 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 11:07:45,570,570 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 11:07:53,488,488 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 11:07:53,488,488 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:07:53,493,493 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:07:53,495,495 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:07:53,496,496 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:07:53,496,496 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:07:53,496,496 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:07:53,496,496 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:07:53,497,497 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:07:53,499,499 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:07:53,499,499 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:07:53,499,499 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:07:53,499,499 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:07:53,499,499 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:07:53,956,956 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.40.161:5000
2025-06-26 11:07:53,956,956 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 11:07:53,957,957 - werkzeug - INFO -  * Restarting with stat
2025-06-26 11:07:54,515,515 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 11:07:54,515,515 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:07:54,516,516 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:07:54,517,517 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:07:54,518,518 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:07:54,518,518 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:07:54,518,518 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:07:54,518,518 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:07:54,519,519 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:07:54,520,520 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:07:54,522,522 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:07:54,522,522 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:07:54,523,523 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:07:54,523,523 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:07:54,558,558 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 11:07:54,576,576 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 11:07:58,591,591 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 11:07:58,637,637 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 11:07:58] "GET / HTTP/1.1" 200 -
2025-06-26 11:07:58,680,680 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 11:07:58] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-26 11:07:58,680,680 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 11:07:58] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-26 11:07:58,829,829 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 11:07:58,836,836 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 11:07:58,837,837 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 11:07:58] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 11:08:10,262,262 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-26 11:08:10.261909
2025-06-26 11:08:10,263,263 - __main__ - INFO - Request from user: 127.0.0.1
2025-06-26 11:08:10,263,263 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-26T11:08:10.261909
2025-06-26 11:08:10,263,263 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 6th august
2025-06-26 11:08:10,263,263 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-26 11:08:10,272,272 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250806 -> 06 August 2025
2025-06-26 11:08:10,273,273 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250806, display_date=06 August 2025
2025-06-26 11:08:10,273,273 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-26 11:08:10,274,274 - __main__ - INFO -    operation_type: locker_out
2025-06-26 11:08:10,274,274 - __main__ - INFO -    template_file: locker_out.json
2025-06-26 11:08:10,274,274 - __main__ - INFO -    operation_date: 20250805
2025-06-26 11:08:10,274,274 - __main__ - INFO -    display_date: 6 August 2025
2025-06-26 11:08:10,274,274 - __main__ - INFO -    source: prompt_parsed
2025-06-26 11:08:10,274,274 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:08:10,274,274 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-26 11:08:10,276,276 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-26 11:08:10,276,276 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-26 11:08:10,276,276 - __main__ - INFO - Starting AI agent processing
2025-06-26 11:08:10,277,277 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 127.0.0.1, input: {'llm_prompt': 'locker out for 6th august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250805', 'display_date': '6 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-26 11:08:10,369,369 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-26 11:08:10,371,371 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-26 11:08:10,377,377 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-26 11:08:15,567,567 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: locker_out (confidence: 0.98) in 5.29s
2025-06-26 11:08:15,569,569 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-26 11:08:15,569,569 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-26 11:08:22,588,588 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 7 steps in 7.02s
2025-06-26 11:08:22,591,591 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:08:22,592,592 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-26 11:08:22,592,592 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-26 11:08:22,592,592 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-26 11:08:22,592,592 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250805_110822_59148', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-26 11:08:22.592759
2025-06-26 11:08:36,703,703 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-26 11:08:36,705,705 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250805_110822_59148
2025-06-26 11:08:36,705,705 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250805_110822_59148_110836_377
2025-06-26 11:08:36,705,705 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20955 characters
2025-06-26 11:08:36,706,706 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250805_110822_59148_110836_377, space: SCG, parent ID: 5880757738 in 14.12s
2025-06-26 11:08:36,707,707 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:08:36,708,708 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:08:36,708,708 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250805_110822_59148_110836_377' in space 'SCG'
2025-06-26 11:08:36,708,708 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250805_110822_59148_110836_377"
2025-06-26 11:08:37,836,836 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5921361174, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250805_110822_59148_110836_377
2025-06-26 11:08:37,842,842 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 27.56s
2025-06-26 11:08:37,844,844 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 11:08:37,844,844 - __main__ - WARNING - AI agent modified operation_date from 20250805 to None. Restoring original.
2025-06-26 11:08:37,845,845 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-26 11:08:37,845,845 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250805_110837_16317_1750916317_27582
2025-06-26 11:08:37,845,845 - __main__ - INFO -    Operation: locker_out
2025-06-26 11:08:37,846,846 - __main__ - INFO -    Success: True
2025-06-26 11:08:37,846,846 - __main__ - INFO -    Timestamp: 2025-06-26T11:08:37.846072
2025-06-26 11:08:37,846,846 - __main__ - INFO -    Database: agent_memory.db
2025-06-26 11:08:37,846,846 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 27.58s
2025-06-26 11:08:37,847,847 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 11:08:37,847,847 - __main__ - INFO - ğŸ“Š Generation completed in 27.59s
2025-06-26 11:08:37,848,848 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 11:08:37] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 11:16:26,113,113 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-26 11:16:28,377,377 - werkzeug - INFO -  * Restarting with stat
2025-06-26 11:16:29,384,384 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 11:16:29,384,384 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:16:29,390,390 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:16:29,393,393 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:16:29,393,393 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:16:29,393,393 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:16:29,394,394 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:16:29,394,394 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:16:29,395,395 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:16:29,396,396 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:16:29,397,397 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:16:29,397,397 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:16:29,397,397 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:16:29,397,397 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:16:29,445,445 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 11:16:29,465,465 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 11:22:42,841,841 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-26 11:22:43,201,201 - werkzeug - INFO -  * Restarting with stat
2025-06-26 11:22:44,295,295 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 11:22:44,295,295 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:22:44,300,300 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:22:44,301,301 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:22:44,302,302 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:22:44,302,302 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:22:44,302,302 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:22:44,302,302 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:22:44,303,303 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:22:44,304,304 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:22:44,304,304 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:22:44,304,304 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:22:44,304,304 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:22:44,304,304 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:22:44,345,345 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 11:22:44,367,367 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 11:25:57,269,269 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-26 11:25:57,410,410 - werkzeug - INFO -  * Restarting with stat
2025-06-26 11:25:57,652,652 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 11:25:57,653,653 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 11:28:49,064,064 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 11:28:49,064,064 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:28:49,070,070 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:28:49,072,072 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:28:49,073,073 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:28:49,073,073 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:28:49,073,073 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:28:49,073,073 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:28:49,074,074 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:28:49,075,075 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:28:49,076,076 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:28:49,076,076 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:28:49,076,076 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:28:49,076,076 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:28:49,155,155 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.87.40.161:5000
2025-06-26 11:28:49,155,155 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 11:28:49,156,156 - werkzeug - INFO -  * Restarting with stat
2025-06-26 11:28:49,840,840 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 11:28:49,840,840 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:28:49,841,841 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:28:49,843,843 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:28:49,844,844 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:28:49,844,844 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:28:49,844,844 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:28:49,844,844 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:28:49,845,845 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 11:28:49,848,848 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 11:28:49,848,848 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:28:49,848,848 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:28:49,848,848 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:28:49,848,848 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 11:28:49,882,882 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 11:28:49,902,902 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 11:28:53,694,694 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 11:28:53,704,704 - werkzeug - INFO - 10.87.40.161 - - [26/Jun/2025 11:28:53] "GET / HTTP/1.1" 200 -
2025-06-26 11:28:53,757,757 - werkzeug - INFO - 10.87.40.161 - - [26/Jun/2025 11:28:53] "GET /static/css/style.css HTTP/1.1" 200 -
2025-06-26 11:28:53,876,876 - werkzeug - INFO - 10.87.40.161 - - [26/Jun/2025 11:28:53] "GET /static/js/app.js HTTP/1.1" 200 -
2025-06-26 11:28:54,533,533 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 11:28:54,534,534 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 11:28:54,534,534 - werkzeug - INFO - 10.87.40.161 - - [26/Jun/2025 11:28:54] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 11:28:55,054,054 - werkzeug - INFO - 10.87.40.161 - - [26/Jun/2025 11:28:55] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 11:29:06,942,942 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-26 11:29:06.941857
2025-06-26 11:29:06,943,943 - __main__ - INFO - Request from user: 10.87.40.161
2025-06-26 11:29:06,943,943 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-26T11:29:06.941857
2025-06-26 11:29:06,944,944 - __main__ - INFO - ğŸ§  Parsing prompt: locker out 25th august
2025-06-26 11:29:06,944,944 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-26 11:29:06,963,963 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250825 -> 25 August 2025
2025-06-26 11:29:06,964,964 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250825, display_date=25 August 2025
2025-06-26 11:29:06,964,964 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-26 11:29:06,964,964 - __main__ - INFO -    operation_type: locker_out
2025-06-26 11:29:06,964,964 - __main__ - INFO -    template_file: locker_out.json
2025-06-26 11:29:06,964,964 - __main__ - INFO -    operation_date: 20250825
2025-06-26 11:29:06,964,964 - __main__ - INFO -    display_date: 25 August 2025
2025-06-26 11:29:06,964,964 - __main__ - INFO -    source: prompt_parsed
2025-06-26 11:29:06,964,964 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 11:29:06,964,964 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-26 11:29:06,965,965 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-26 11:29:06,965,965 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-26 11:29:06,965,965 - __main__ - INFO - Starting AI agent processing
2025-06-26 11:29:06,965,965 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.87.40.161, input: {'llm_prompt': 'locker out 25th august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250825', 'display_date': '25 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-26 11:29:06,992,992 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-26 11:29:06,994,994 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-26 11:29:07,001,001 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-26 11:29:10,242,242 - utils.ai_agent - ERROR - ğŸ§  Intent analysis failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 49
}
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 228, in _analyze_user_intent
    response = self.model.generate_content(context_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 49
}
]

2025-06-26 11:29:10,244,244 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-26 11:29:10,244,244 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-26 11:29:10,880,880 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 49
}
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 49
}
]

2025-06-26 11:29:10,882,882 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 11:29:10,882,882 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-26 11:29:10,882,882 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-26 11:29:10,882,882 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-26 11:29:10,883,883 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250825_112910_88251', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-26 11:29:10.883142
2025-06-26 11:29:13,807,807 - utils.universal_llm_generator - ERROR - ğŸ¤– LLM template analysis failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 50
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
]
2025-06-26 11:29:13,808,808 - utils.universal_llm_generator - INFO - ğŸ Creating basic structure fallback
2025-06-26 11:29:13,809,809 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250825_112910_88251
2025-06-26 11:29:13,810,810 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250825_112910_88251_112913_384
2025-06-26 11:29:13,810,810 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 3555 characters
2025-06-26 11:29:13,811,811 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250825_112910_88251_112913_384, space: SCG, parent ID: 5880757738 in 2.93s
2025-06-26 11:29:13,811,811 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 11:29:13,811,811 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 11:29:13,811,811 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250825_112910_88251_112913_384' in space 'SCG'
2025-06-26 11:29:13,811,811 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250825_112910_88251_112913_384"
2025-06-26 11:29:14,878,878 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5921362393, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250825_112910_88251_112913_384
2025-06-26 11:29:14,891,891 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 7.93s
2025-06-26 11:29:14,896,896 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 11:29:14,898,898 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-26 11:29:14,898,898 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250825_112914_17554_1750917554_7954
2025-06-26 11:29:14,898,898 - __main__ - INFO -    Operation: locker_out
2025-06-26 11:29:14,898,898 - __main__ - INFO -    Success: True
2025-06-26 11:29:14,898,898 - __main__ - INFO -    Timestamp: 2025-06-26T11:29:14.898635
2025-06-26 11:29:14,898,898 - __main__ - INFO -    Database: agent_memory.db
2025-06-26 11:29:14,898,898 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 7.95s
2025-06-26 11:29:14,899,899 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 11:29:14,899,899 - __main__ - INFO - ğŸ“Š Generation completed in 7.96s
2025-06-26 11:29:14,900,900 - werkzeug - INFO - 10.87.40.161 - - [26/Jun/2025 11:29:14] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 12:54:38,920,920 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 12:54:38,921,921 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 12:54:45,374,374 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 12:54:45,374,374 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 12:54:45,377,377 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 12:54:45,378,378 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 12:54:45,379,379 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 12:54:45,379,379 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 12:54:45,379,379 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 12:54:45,379,379 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 12:54:45,380,380 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 12:54:45,382,382 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 12:54:45,383,383 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 12:54:45,383,383 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 12:54:45,383,383 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 12:54:45,383,383 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 12:54:45,471,471 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.196.188.108:5000
2025-06-26 12:54:45,471,471 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 12:54:45,471,471 - werkzeug - INFO -  * Restarting with stat
2025-06-26 12:54:46,064,064 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 12:54:46,064,064 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 12:54:46,066,066 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 12:54:46,068,068 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 12:54:46,069,069 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 12:54:46,069,069 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 12:54:46,069,069 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 12:54:46,069,069 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 12:54:46,070,070 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 12:54:46,071,071 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 12:54:46,072,072 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 12:54:46,072,072 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 12:54:46,072,072 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 12:54:46,072,072 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 12:54:46,106,106 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 12:54:46,127,127 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 12:54:48,465,465 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 12:54:48,477,477 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:54:48] "GET / HTTP/1.1" 200 -
2025-06-26 12:54:48,508,508 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:54:48] "GET /static/css/style.css HTTP/1.1" 200 -
2025-06-26 12:54:48,594,594 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:54:48] "GET /static/js/app.js HTTP/1.1" 200 -
2025-06-26 12:54:48,805,805 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 12:54:48,806,806 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 12:54:48,806,806 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:54:48] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 12:54:48,911,911 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:54:48] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 12:54:55,660,660 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-26 12:54:55.660256
2025-06-26 12:54:55,661,661 - __main__ - INFO - Request from user: 10.196.188.108
2025-06-26 12:54:55,661,661 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-26T12:54:55.660256
2025-06-26 12:54:55,661,661 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for today
2025-06-26 12:54:55,661,661 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-26 12:54:55,663,663 - __main__ - INFO - ğŸ§  Parsed 'today': 20250626 -> 26 June 2025
2025-06-26 12:54:55,663,663 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250626, display_date=26 June 2025
2025-06-26 12:54:55,669,669 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-26 12:54:55,670,670 - __main__ - INFO -    operation_type: locker_out
2025-06-26 12:54:55,670,670 - __main__ - INFO -    template_file: locker_out.json
2025-06-26 12:54:55,670,670 - __main__ - INFO -    operation_date: 20250626
2025-06-26 12:54:55,670,670 - __main__ - INFO -    display_date: 26 June 2025
2025-06-26 12:54:55,670,670 - __main__ - INFO -    source: prompt_parsed
2025-06-26 12:54:55,670,670 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 12:54:55,671,671 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-26 12:54:55,674,674 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-26 12:54:55,674,674 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-26 12:54:55,674,674 - __main__ - INFO - Starting AI agent processing
2025-06-26 12:54:55,675,675 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.196.188.108, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250626', 'display_date': '26 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-26 12:54:55,710,710 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-26 12:54:55,712,712 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-26 12:54:55,714,714 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-26 12:55:00,165,165 - utils.ai_agent - INFO - ğŸ§  Intent analysis completed: Generate a locker out procedure document for June 26th, 2025 (confidence: 0.98) in 4.49s
2025-06-26 12:55:00,165,165 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: Generate a locker out procedure document for June 26th, 2025
2025-06-26 12:55:00,165,165 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-26 12:55:06,647,647 - utils.ai_agent - INFO - ğŸ“‹ Created execution plan with 3 steps in 6.48s
2025-06-26 12:55:06,650,650 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 12:55:06,652,652 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-26 12:55:06,653,653 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-26 12:55:06,653,653 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-26 12:55:06,653,653 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250626_125506_65178', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-26 12:55:06.653300
2025-06-26 12:55:20,835,835 - utils.universal_llm_generator - INFO - ğŸ¤– LLM successfully analyzed template structure with special formatting
2025-06-26 12:55:20,836,836 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250626_125506_65178
2025-06-26 12:55:20,836,836 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250626_125506_65178_125520_871
2025-06-26 12:55:20,837,837 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 20953 characters
2025-06-26 12:55:20,837,837 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250626_125506_65178_125520_871, space: SCG, parent ID: 5880757738 in 14.19s
2025-06-26 12:55:20,837,837 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 12:55:20,837,837 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 12:55:20,837,837 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250626_125506_65178_125520_871' in space 'SCG'
2025-06-26 12:55:20,837,837 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250626_125506_65178_125520_871"
2025-06-26 12:55:22,138,138 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5922625509, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250626_125506_65178_125520_871
2025-06-26 12:55:22,144,144 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 26.47s
2025-06-26 12:55:22,147,147 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 12:55:22,148,148 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-26 12:55:22,148,148 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250626_125522_22722_1750922722_26487
2025-06-26 12:55:22,148,148 - __main__ - INFO -    Operation: locker_out
2025-06-26 12:55:22,148,148 - __main__ - INFO -    Success: True
2025-06-26 12:55:22,149,149 - __main__ - INFO -    Timestamp: 2025-06-26T12:55:22.149006
2025-06-26 12:55:22,149,149 - __main__ - INFO -    Database: agent_memory.db
2025-06-26 12:55:22,149,149 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 26.49s
2025-06-26 12:55:22,149,149 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 12:55:22,149,149 - __main__ - INFO - ğŸ“Š Generation completed in 26.49s
2025-06-26 12:55:22,149,149 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:22] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 12:55:31,139,139 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:31] "GET /dashboard HTTP/1.1" 200 -
2025-06-26 12:55:31,167,167 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:31] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-26 12:55:31,460,460 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:31] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-26 12:55:31,570,570 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 12:55:31,570,570 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 12:55:31,571,571 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:31] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 12:55:31,581,581 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:31] "GET /api/dashboard/stats?_t=1750922731486 HTTP/1.1" 200 -
2025-06-26 12:55:31,621,621 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:31] "GET /api/dashboard/activity?limit=15&_t=1750922731487 HTTP/1.1" 200 -
2025-06-26 12:55:37,814,814 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:37] "GET /feedback HTTP/1.1" 200 -
2025-06-26 12:55:37,836,836 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:37] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-26 12:55:37,897,897 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:37] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-26 12:55:37,952,952 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 12:55:37,953,953 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 12:55:37,953,953 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:37] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 12:55:37,973,973 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:37] "GET /api/feedback/stats HTTP/1.1" 200 -
2025-06-26 12:55:37,983,983 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:37] "GET /api/feedback/recent?limit=5 HTTP/1.1" 200 -
2025-06-26 12:55:40,821,821 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 12:55:40,821,821 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 12:55:40,822,822 - werkzeug - INFO - 10.196.188.108 - - [26/Jun/2025 12:55:40] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 12:55:47,227,227 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 12:55:47,227,227 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 14:51:42,428,428 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 14:51:42,428,428 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 14:51:42,434,434 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 14:51:42,439,439 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 14:51:42,439,439 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 14:51:42,440,440 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 14:51:42,440,440 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 14:51:42,440,440 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 14:51:42,440,440 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 14:51:42,442,442 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 14:51:42,442,442 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 14:51:42,442,442 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 14:51:42,442,442 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 14:51:42,442,442 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 14:51:42,788,788 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.72.40:5000
2025-06-26 14:51:42,788,788 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 14:51:42,789,789 - werkzeug - INFO -  * Restarting with stat
2025-06-26 14:51:43,497,497 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 14:51:43,497,497 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 14:51:43,498,498 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 14:51:43,499,499 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 14:51:43,500,500 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 14:51:43,500,500 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 14:51:43,500,500 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 14:51:43,500,500 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 14:51:43,501,501 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 14:51:43,504,504 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 14:51:43,505,505 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 14:51:43,505,505 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 14:51:43,505,505 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 14:51:43,505,505 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 14:51:43,543,543 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 14:51:43,561,561 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 14:52:51,102,102 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 14:52:51,119,119 - werkzeug - INFO - 10.80.72.40 - - [26/Jun/2025 14:52:51] "GET / HTTP/1.1" 200 -
2025-06-26 14:52:51,148,148 - werkzeug - INFO - 10.80.72.40 - - [26/Jun/2025 14:52:51] "GET /static/css/style.css HTTP/1.1" 200 -
2025-06-26 14:52:51,225,225 - werkzeug - INFO - 10.80.72.40 - - [26/Jun/2025 14:52:51] "GET /static/js/app.js HTTP/1.1" 200 -
2025-06-26 14:52:52,112,112 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 14:52:52,112,112 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 14:52:52,113,113 - werkzeug - INFO - 10.80.72.40 - - [26/Jun/2025 14:52:52] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 14:52:52,547,547 - werkzeug - INFO - 10.80.72.40 - - [26/Jun/2025 14:52:52] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-06-26 14:53:04,081,081 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-26 14:53:04.080930
2025-06-26 14:53:04,084,084 - __main__ - INFO - Request from user: 10.80.72.40
2025-06-26 14:53:04,084,084 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-26T14:53:04.080930
2025-06-26 14:53:04,084,084 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 23rd august
2025-06-26 14:53:04,085,085 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-26 14:53:04,091,091 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250823 -> 23 August 2025
2025-06-26 14:53:04,095,095 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250823, display_date=23 August 2025
2025-06-26 14:53:04,096,096 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-26 14:53:04,096,096 - __main__ - INFO -    operation_type: locker_out
2025-06-26 14:53:04,096,096 - __main__ - INFO -    template_file: locker_out.json
2025-06-26 14:53:04,096,096 - __main__ - INFO -    operation_date: 20250823
2025-06-26 14:53:04,096,096 - __main__ - INFO -    display_date: 23 August 2025
2025-06-26 14:53:04,096,096 - __main__ - INFO -    source: prompt_parsed
2025-06-26 14:53:04,096,096 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 14:53:04,096,096 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-26 14:53:04,097,097 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-26 14:53:04,097,097 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-26 14:53:04,097,097 - __main__ - INFO - Starting AI agent processing
2025-06-26 14:53:04,097,097 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.80.72.40, input: {'llm_prompt': 'locker out for 23rd august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250823', 'display_date': '23 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-26 14:53:04,165,165 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-26 14:53:04,169,169 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-26 14:53:04,173,173 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-26 14:53:07,181,181 - utils.ai_agent - ERROR - ğŸ§  Intent analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 228, in _analyze_user_intent
    response = self.model.generate_content(context_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 14:53:07,182,182 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-26 14:53:07,182,182 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-26 14:53:07,445,445 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 14:53:07,540,540 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 14:53:07,541,541 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-26 14:53:07,541,541 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-26 14:53:07,541,541 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-26 14:53:07,541,541 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250823_145307_54110', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-26 14:53:07.541698
2025-06-26 14:53:10,442,442 - utils.universal_llm_generator - ERROR - ğŸ¤– LLM template analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-06-26 14:53:10,443,443 - utils.universal_llm_generator - INFO - ğŸ Creating basic structure fallback
2025-06-26 14:53:10,443,443 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250823_145307_54110
2025-06-26 14:53:10,443,443 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250823_145307_54110_145310_615
2025-06-26 14:53:10,443,443 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 3555 characters
2025-06-26 14:53:10,443,443 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250823_145307_54110_145310_615, space: SCG, parent ID: 5880757738 in 2.90s
2025-06-26 14:53:10,444,444 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 14:53:10,444,444 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 14:53:10,444,444 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250823_145307_54110_145310_615' in space 'SCG'
2025-06-26 14:53:10,444,444 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250823_145307_54110_145310_615"
2025-06-26 14:53:11,572,572 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5923086649, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250823_145307_54110_145310_615
2025-06-26 14:53:11,580,580 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 7.48s
2025-06-26 14:53:11,585,585 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 14:53:11,588,588 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-26 14:53:11,588,588 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250823_145311_29791_1750929791_7505
2025-06-26 14:53:11,588,588 - __main__ - INFO -    Operation: locker_out
2025-06-26 14:53:11,588,588 - __main__ - INFO -    Success: True
2025-06-26 14:53:11,588,588 - __main__ - INFO -    Timestamp: 2025-06-26T14:53:11.588638
2025-06-26 14:53:11,588,588 - __main__ - INFO -    Database: agent_memory.db
2025-06-26 14:53:11,588,588 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 7.51s
2025-06-26 14:53:11,589,589 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 14:53:11,589,589 - __main__ - INFO - ğŸ“Š Generation completed in 7.51s
2025-06-26 14:53:11,590,590 - werkzeug - INFO - 10.80.72.40 - - [26/Jun/2025 14:53:11] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 14:54:52,481,481 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-26 14:54:52.481112
2025-06-26 14:54:52,482,482 - __main__ - INFO - Request from user: 10.80.72.40
2025-06-26 14:54:52,483,483 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-26T14:54:52.481112
2025-06-26 14:54:52,483,483 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 23rd august
2025-06-26 14:54:52,483,483 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-26 14:54:52,483,483 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250823 -> 23 August 2025
2025-06-26 14:54:52,483,483 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250823, display_date=23 August 2025
2025-06-26 14:54:52,483,483 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-26 14:54:52,483,483 - __main__ - INFO -    operation_type: locker_out
2025-06-26 14:54:52,483,483 - __main__ - INFO -    template_file: locker_out.json
2025-06-26 14:54:52,483,483 - __main__ - INFO -    operation_date: 20250823
2025-06-26 14:54:52,483,483 - __main__ - INFO -    display_date: 23 August 2025
2025-06-26 14:54:52,484,484 - __main__ - INFO -    source: prompt_parsed
2025-06-26 14:54:52,484,484 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 14:54:52,484,484 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-26 14:54:52,485,485 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-26 14:54:52,485,485 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-26 14:54:52,485,485 - __main__ - INFO - Starting AI agent processing
2025-06-26 14:54:52,485,485 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 10.80.72.40, input: {'llm_prompt': 'locker out for 23rd august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250823', 'display_date': '23 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-26 14:54:52,536,536 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-26 14:54:52,537,537 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-26 14:54:52,552,552 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-26 14:54:52,871,871 - utils.ai_agent - ERROR - ğŸ§  Intent analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 228, in _analyze_user_intent
    response = self.model.generate_content(context_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 14:54:52,874,874 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-26 14:54:52,876,876 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-26 14:54:53,137,137 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 14:54:53,144,144 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 14:54:53,154,154 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-26 14:54:53,155,155 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-26 14:54:53,155,155 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-26 14:54:53,155,155 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250823_145453_15346', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-26 14:54:53.155349
2025-06-26 14:54:55,981,981 - utils.universal_llm_generator - ERROR - ğŸ¤– LLM template analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-06-26 14:54:55,981,981 - utils.universal_llm_generator - INFO - ğŸ Creating basic structure fallback
2025-06-26 14:54:55,982,982 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250823_145453_15346
2025-06-26 14:54:55,982,982 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250823_145453_15346_145455_999
2025-06-26 14:54:55,982,982 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 3555 characters
2025-06-26 14:54:55,982,982 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250823_145453_15346_145455_999, space: SCG, parent ID: 5880757738 in 2.84s
2025-06-26 14:54:55,982,982 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 14:54:55,982,982 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 14:54:55,982,982 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250823_145453_15346_145455_999' in space 'SCG'
2025-06-26 14:54:55,982,982 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250823_145453_15346_145455_999"
2025-06-26 14:54:56,902,902 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5922854812, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250823_145453_15346_145455_999
2025-06-26 14:54:56,907,907 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 4.42s
2025-06-26 14:54:56,911,911 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 14:54:56,916,916 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-26 14:54:56,916,916 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250823_145456_29896_1750929896_4430
2025-06-26 14:54:56,916,916 - __main__ - INFO -    Operation: locker_out
2025-06-26 14:54:56,916,916 - __main__ - INFO -    Success: True
2025-06-26 14:54:56,916,916 - __main__ - INFO -    Timestamp: 2025-06-26T14:54:56.916700
2025-06-26 14:54:56,916,916 - __main__ - INFO -    Database: agent_memory.db
2025-06-26 14:54:56,916,916 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 4.43s
2025-06-26 14:54:56,917,917 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 14:54:56,917,917 - __main__ - INFO - ğŸ“Š Generation completed in 4.44s
2025-06-26 14:54:56,917,917 - werkzeug - INFO - 10.80.72.40 - - [26/Jun/2025 14:54:56] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 15:06:39,189,189 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/page_handlers/scp_handler.py', reloading
2025-06-26 15:06:41,332,332 - werkzeug - INFO -  * Restarting with stat
2025-06-26 15:06:42,167,167 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 15:06:42,167,167 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:06:42,171,171 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:06:42,173,173 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:06:42,174,174 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:06:42,174,174 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:06:42,174,174 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:06:42,174,174 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:06:42,175,175 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:06:42,177,177 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:06:42,178,178 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:06:42,178,178 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:06:42,178,178 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:06:42,178,178 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:06:42,218,218 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 15:06:42,229,229 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 15:10:15,269,269 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/app-llm.py', reloading
2025-06-26 15:10:15,497,497 - werkzeug - INFO -  * Restarting with stat
2025-06-26 15:10:16,231,231 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 15:10:16,231,231 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:10:16,232,232 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:10:16,234,234 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:10:16,234,234 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:10:16,235,235 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:10:16,235,235 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:10:16,235,235 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:10:16,238,238 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:10:16,241,241 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:10:16,242,242 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:10:16,242,242 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:10:16,242,242 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:10:16,242,242 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:10:16,282,282 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 15:10:16,297,297 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 15:37:38,752,752 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 15:37:38,753,753 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:37:38,756,756 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:37:38,757,757 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:37:38,758,758 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:37:38,758,758 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:37:38,758,758 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:37:38,758,758 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:37:38,760,760 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:37:38,761,761 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:37:38,762,762 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:37:38,762,762 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:37:38,762,762 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:37:38,762,762 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:37:38,932,932 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 15:37:38,932,932 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 15:38:01,696,696 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-26 15:38:01.695709
2025-06-26 15:38:01,697,697 - __main__ - INFO - Request from user: 100.67.92.13
2025-06-26 15:38:01,698,698 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-26T15:38:01.695709
2025-06-26 15:38:01,698,698 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for 23rd august
2025-06-26 15:38:01,698,698 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-26 15:38:01,706,706 - __main__ - INFO - ğŸ§  Parsed explicit date: 20250823 -> 23 August 2025
2025-06-26 15:38:01,707,707 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250823, display_date=23 August 2025
2025-06-26 15:38:01,707,707 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-26 15:38:01,707,707 - __main__ - INFO -    operation_type: locker_out
2025-06-26 15:38:01,707,707 - __main__ - INFO -    template_file: locker_out.json
2025-06-26 15:38:01,707,707 - __main__ - INFO -    operation_date: 20250823
2025-06-26 15:38:01,707,707 - __main__ - INFO -    display_date: 23 August 2025
2025-06-26 15:38:01,707,707 - __main__ - INFO -    source: prompt_parsed
2025-06-26 15:38:01,707,707 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:38:01,707,707 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-26 15:38:01,708,708 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-26 15:38:01,709,709 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-26 15:38:01,709,709 - __main__ - INFO - Starting AI agent processing
2025-06-26 15:38:01,709,709 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 100.67.92.13, input: {'llm_prompt': 'locker out for 23rd august', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250823', 'display_date': '23 August 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-26 15:38:01,757,757 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-26 15:38:01,759,759 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-26 15:38:01,766,766 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-26 15:38:04,719,719 - utils.ai_agent - ERROR - ğŸ§  Intent analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 228, in _analyze_user_intent
    response = self.model.generate_content(context_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 15:38:04,721,721 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-26 15:38:04,722,722 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-26 15:38:05,363,363 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 15:38:05,371,371 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:38:05,373,373 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-26 15:38:05,373,373 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-26 15:38:05,373,373 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-26 15:38:05,374,374 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250823_153805_37353', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-26 15:38:05.374107
2025-06-26 15:38:08,121,121 - utils.universal_llm_generator - ERROR - ğŸ¤– LLM template analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-06-26 15:38:08,121,121 - utils.universal_llm_generator - INFO - ğŸ Creating basic structure fallback
2025-06-26 15:38:08,122,122 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250823_153805_37353
2025-06-26 15:38:08,122,122 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250823_153805_37353_153808_619
2025-06-26 15:38:08,122,122 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 3555 characters
2025-06-26 15:38:08,122,122 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250823_153805_37353_153808_619, space: SCG, parent ID: 5880757738 in 2.75s
2025-06-26 15:38:08,123,123 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:38:08,123,123 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:38:08,123,123 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250823_153805_37353_153808_619' in space 'SCG'
2025-06-26 15:38:08,123,123 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250823_153805_37353_153808_619"
2025-06-26 15:38:09,184,184 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5922631490, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250823_153805_37353_153808_619
2025-06-26 15:38:09,191,191 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 7.48s
2025-06-26 15:38:09,193,193 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 15:38:09,197,197 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-26 15:38:09,197,197 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250823_153809_32489_1750932489_7497
2025-06-26 15:38:09,197,197 - __main__ - INFO -    Operation: locker_out
2025-06-26 15:38:09,197,197 - __main__ - INFO -    Success: True
2025-06-26 15:38:09,197,197 - __main__ - INFO -    Timestamp: 2025-06-26T15:38:09.197529
2025-06-26 15:38:09,197,197 - __main__ - INFO -    Database: agent_memory.db
2025-06-26 15:38:09,197,197 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 7.50s
2025-06-26 15:38:09,198,198 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 15:38:09,198,198 - __main__ - INFO - ğŸ“Š Generation completed in 7.50s
2025-06-26 15:38:09,198,198 - werkzeug - INFO - 100.67.92.13 - - [26/Jun/2025 15:38:09] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 15:42:06,889,889 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 15:42:06,890,890 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 15:44:02,763,763 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 15:44:02,763,763 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:44:02,767,767 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:44:02,772,772 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:44:02,773,773 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:44:02,773,773 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:02,773,773 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:02,773,773 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:44:02,774,774 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:44:02,775,775 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:44:02,775,775 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:44:02,775,775 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:02,775,775 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:02,775,775 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:44:02,993,993 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.72.40:5000
2025-06-26 15:44:02,993,993 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 15:44:02,994,994 - werkzeug - INFO -  * Restarting with stat
2025-06-26 15:44:03,735,735 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 15:44:03,735,735 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:44:03,736,736 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:44:03,738,738 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:44:03,739,739 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:44:03,739,739 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:03,739,739 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:03,739,739 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:44:03,740,740 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:44:03,741,741 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:44:03,742,742 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:44:03,742,742 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:03,742,742 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:03,742,742 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:44:03,777,777 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 15:44:03,791,791 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 15:44:23,157,157 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 15:44:23,169,169 - werkzeug - INFO - 100.67.92.21 - - [26/Jun/2025 15:44:23] "GET / HTTP/1.1" 200 -
2025-06-26 15:44:23,707,707 - werkzeug - INFO - 100.67.92.21 - - [26/Jun/2025 15:44:23] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-26 15:44:23,711,711 - werkzeug - INFO - 100.67.92.13 - - [26/Jun/2025 15:44:23] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-26 15:44:24,277,277 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 15:44:24,277,277 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 15:44:24,278,278 - werkzeug - INFO - 100.67.92.21 - - [26/Jun/2025 15:44:24] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 15:44:33,688,688 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-26 15:44:33.688433
2025-06-26 15:44:33,692,692 - __main__ - INFO - Request from user: 100.67.92.13
2025-06-26 15:44:33,692,692 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-26T15:44:33.688433
2025-06-26 15:44:33,693,693 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for today
2025-06-26 15:44:33,693,693 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-26 15:44:33,694,694 - __main__ - INFO - ğŸ§  Parsed 'today': 20250626 -> 26 June 2025
2025-06-26 15:44:33,694,694 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250626, display_date=26 June 2025
2025-06-26 15:44:33,704,704 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-26 15:44:33,704,704 - __main__ - INFO -    operation_type: locker_out
2025-06-26 15:44:33,704,704 - __main__ - INFO -    template_file: locker_out.json
2025-06-26 15:44:33,705,705 - __main__ - INFO -    operation_date: 20250626
2025-06-26 15:44:33,705,705 - __main__ - INFO -    display_date: 26 June 2025
2025-06-26 15:44:33,705,705 - __main__ - INFO -    source: prompt_parsed
2025-06-26 15:44:33,705,705 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:44:33,705,705 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-26 15:44:33,707,707 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-26 15:44:33,707,707 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-26 15:44:33,707,707 - __main__ - INFO - Starting AI agent processing
2025-06-26 15:44:33,707,707 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 100.67.92.13, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250626', 'display_date': '26 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-26 15:44:33,707,707 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-26 15:44:33,714,714 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-26 15:44:33,721,721 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-26 15:44:36,669,669 - utils.ai_agent - ERROR - ğŸ§  Intent analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 228, in _analyze_user_intent
    response = self.model.generate_content(context_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 15:44:36,669,669 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-26 15:44:36,669,669 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-26 15:44:37,317,317 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 15:44:37,317,317 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:44:37,318,318 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-26 15:44:37,318,318 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-26 15:44:37,318,318 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-26 15:44:37,318,318 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250626_154437_31770', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-26 15:44:37.318240
2025-06-26 15:44:40,097,097 - utils.universal_llm_generator - ERROR - ğŸ¤– LLM template analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-06-26 15:44:40,097,097 - utils.universal_llm_generator - INFO - ğŸ Creating basic structure fallback
2025-06-26 15:44:40,097,097 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250626_154437_31770
2025-06-26 15:44:40,098,098 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250626_154437_31770_154440_509
2025-06-26 15:44:40,098,098 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 3549 characters
2025-06-26 15:44:40,098,098 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250626_154437_31770_154440_509, space: SCG, parent ID: 5880757738 in 2.78s
2025-06-26 15:44:40,098,098 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:40,099,099 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:44:40,099,099 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250626_154437_31770_154440_509' in space 'SCG'
2025-06-26 15:44:40,099,099 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250626_154437_31770_154440_509"
2025-06-26 15:44:41,095,095 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5922855659, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250626_154437_31770_154440_509
2025-06-26 15:44:41,103,103 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 7.40s
2025-06-26 15:44:41,105,105 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 15:44:41,107,107 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-26 15:44:41,107,107 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250626_154441_32881_1750932881_7417
2025-06-26 15:44:41,107,107 - __main__ - INFO -    Operation: locker_out
2025-06-26 15:44:41,107,107 - __main__ - INFO -    Success: True
2025-06-26 15:44:41,107,107 - __main__ - INFO -    Timestamp: 2025-06-26T15:44:41.107952
2025-06-26 15:44:41,107,107 - __main__ - INFO -    Database: agent_memory.db
2025-06-26 15:44:41,108,108 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 7.42s
2025-06-26 15:44:41,108,108 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 15:44:41,108,108 - __main__ - INFO - ğŸ“Š Generation completed in 7.42s
2025-06-26 15:44:41,108,108 - werkzeug - INFO - 100.67.92.13 - - [26/Jun/2025 15:44:41] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 15:44:42,039,039 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 15:44:42,040,040 - utils.ai_agent - INFO - ğŸ§  Closed all database connections
2025-06-26 15:49:39,644,644 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 15:49:39,645,645 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:49:39,649,649 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:49:39,652,652 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:49:39,653,653 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:49:39,653,653 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:49:39,653,653 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:49:39,653,653 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:49:39,653,653 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: gemini-2.5-flash
2025-06-26 15:49:39,654,654 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:49:39,657,657 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:49:39,658,658 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:49:39,658,658 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:49:39,658,658 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:49:39,658,658 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:49:39,658,658 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: raik-pat-964bd2c7br10ai2e9fbf0556f7a21374cac9b71daee8452e9fbf0556f7a21374
2025-06-26 15:49:39,724,724 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.80.72.40:5000
2025-06-26 15:49:39,724,724 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-26 15:49:39,725,725 - werkzeug - INFO -  * Restarting with stat
2025-06-26 15:49:40,278,278 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 15:49:40,278,278 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:49:40,279,279 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:49:40,282,282 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:49:40,283,283 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:49:40,283,283 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:49:40,283,283 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:49:40,283,283 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:49:40,283,283 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: gemini-2.5-flash
2025-06-26 15:49:40,284,284 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 15:49:40,285,285 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 15:49:40,286,286 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:49:40,286,286 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:49:40,286,286 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:49:40,286,286 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 15:49:40,286,286 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: raik-pat-964bd2c7br10ai2e9fbf0556f7a21374cac9b71daee8452e9fbf0556f7a21374
2025-06-26 15:49:40,320,320 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 15:49:40,339,339 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 15:49:43,416,416 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 15:49:43,427,427 - werkzeug - INFO - 100.67.92.20 - - [26/Jun/2025 15:49:43] "GET / HTTP/1.1" 200 -
2025-06-26 15:49:43,968,968 - werkzeug - INFO - 100.67.92.20 - - [26/Jun/2025 15:49:43] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-06-26 15:49:43,972,972 - werkzeug - INFO - 100.67.92.21 - - [26/Jun/2025 15:49:43] "[36mGET /static/js/app.js HTTP/1.1[0m" 304 -
2025-06-26 15:49:44,544,544 - __main__ - ERROR - Failed to get agent statistics: 'AgentMemory' object has no attribute 'get_dashboard_statistics'
2025-06-26 15:49:44,544,544 - utils.template_processor - INFO - Found 4 templates: ['s_in.json', 's_out.json', 'locker_in.json', 'locker_out.json']
2025-06-26 15:49:44,544,544 - werkzeug - INFO - 100.67.92.20 - - [26/Jun/2025 15:49:44] "GET /agent_status HTTP/1.1" 200 -
2025-06-26 15:49:53,941,941 - __main__ - INFO - ğŸ“Š Generation started: 2025-06-26 15:49:53.941397
2025-06-26 15:49:53,943,943 - __main__ - INFO - Request from user: 100.67.92.21
2025-06-26 15:49:53,943,943 - __main__ - INFO - ğŸ“Š Generation started at: 2025-06-26T15:49:53.941397
2025-06-26 15:49:53,944,944 - __main__ - INFO - ğŸ§  Parsing prompt: locker out for today
2025-06-26 15:49:53,944,944 - __main__ - INFO - ğŸ§  Found operation type: locker_out
2025-06-26 15:49:53,947,947 - __main__ - INFO - ğŸ§  Parsed 'today': 20250626 -> 26 June 2025
2025-06-26 15:49:53,947,947 - __main__ - INFO - ğŸ§  Final parsing result: operation_type=locker_out, template_file=locker_out.json, operation_date=20250626, display_date=26 June 2025
2025-06-26 15:49:53,964,964 - __main__ - INFO - ğŸ”§ Variables before AI processing:
2025-06-26 15:49:53,965,965 - __main__ - INFO -    operation_type: locker_out
2025-06-26 15:49:53,965,965 - __main__ - INFO -    template_file: locker_out.json
2025-06-26 15:49:53,965,965 - __main__ - INFO -    operation_date: 20250626
2025-06-26 15:49:53,965,965 - __main__ - INFO -    display_date: 26 June 2025
2025-06-26 15:49:53,965,965 - __main__ - INFO -    source: prompt_parsed
2025-06-26 15:49:53,965,965 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 15:49:53,965,965 - utils.template_processor - INFO - Attempting to load template: page_templates/locker_out.json
2025-06-26 15:49:53,971,971 - utils.template_processor - INFO - Successfully loaded template: locker_out.json
2025-06-26 15:49:53,971,971 - __main__ - INFO - Successfully loaded template: locker_out.json
2025-06-26 15:49:53,971,971 - __main__ - INFO - Starting AI agent processing
2025-06-26 15:49:53,972,972 - utils.ai_agent - INFO - ğŸ§  Analyzing intent for user 100.67.92.21, input: {'llm_prompt': 'locker out for today', 'template_file': 'locker_out.json', 'operation_type': 'locker_out', 'operation_date': '20250626', 'display_date': '26 June 2025', 'template_data': {'title': 'Locker_AITest_S-OUT_{operation_date}', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]}}
2025-06-26 15:49:54,011,011 - utils.ai_agent - INFO - ğŸ§  Fetching user preferences
2025-06-26 15:49:54,013,013 - utils.ai_agent - INFO - ğŸ§  Fetching recent interactions{user_prefs}
2025-06-26 15:49:54,021,021 - utils.ai_agent - INFO - ğŸ§  Sending prompt to LLM
2025-06-26 15:49:57,045,045 - utils.ai_agent - ERROR - ğŸ§  Intent analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 228, in _analyze_user_intent
    response = self.model.generate_content(context_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 15:49:57,046,046 - utils.ai_agent - INFO - ğŸ“‹ Creating plan for intent: locker_out
2025-06-26 15:49:57,047,047 - utils.ai_agent - INFO - ğŸ“‹ Sending planning prompt to LLM
2025-06-26 15:49:57,691,691 - utils.ai_agent - ERROR - ğŸ“‹ Planning failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
Traceback (most recent call last):
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/utils/ai_agent.py", line 1555, in create_plan
    response = self.model.generate_content(planning_prompt)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/ravi.chintakunta/IdeaProjects/confluence_ai_agent/venv/lib/python3.13/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]

2025-06-26 15:49:57,693,693 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 15:49:57,694,694 - utils.universal_llm_generator - INFO - ğŸ  Determining space for operation_type: 'locker_out'
2025-06-26 15:49:57,694,694 - utils.universal_llm_generator - INFO - ğŸ  âœ… Using SCG space for locker_out: SCG
2025-06-26 15:49:57,694,694 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generating LOCKER_OUT page for space SCG...
2025-06-26 15:49:57,694,694 - utils.universal_llm_generator - INFO - ğŸŒŸ Starting generate_confluence_page: operation_type=locker_out, template_data={'title': 'Locker_AITest_S-OUT_20250626_154957_69380', 'properties': {'operation_date': 'yyyyMMdd', 'display_date': 'dd MMMM yyyy'}, 'sections': [{'heading': 'Operation Overview', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #003366; font-size: 15px;', 'fields': [{'label': 'Field', 'id': 'field_label', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; width: 30%; font-weight: bold;'}, {'label': 'Value', 'id': 'field_value', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}, {'label': 'Status', 'id': 'field_status', 'style': 'border: 1px solid #ddd; background: #fff; vertical-align: top; width: 70%;'}], 'static_values': {'ticket': 'S-OUT: SCG-XXXX - [Request][PPM][Locker] Locker S-OUT / å»ƒæ­¢', 'operation_pic': '@Ali, Abrar', 'operation_buddy': '@Rawat, Megha', 'other_attendees': '@Pawar, Nikhil', 'approvals_sre': '@Pawar, Nikhil', 'approvals_sre_emails': {'@Pawar, Nikhil': 'nikhil.pawar@rakuten.com'}, 'approvals_sre_status': '{status:NOT APPROVED}', 'operation_details': 'X Locker S-OUT through Rundeck'}, 'rows': [{'label': 'Operation Date and Time', 'id': 'display_date'}, {'label': 'Ticket', 'id': 'ticket'}, {'label': 'Approvals | SRE', 'id': 'approvals_sre'}, {'label': 'Operation PIC', 'id': 'operation_pic'}, {'label': 'Operation Buddy', 'id': 'operation_buddy'}, {'label': 'Other Attendees', 'id': 'other_attendees'}, {'label': 'Operation Overview', 'id': 'operation_details'}]}]}, {'heading': 'Operation Manual', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'preparation_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'preparation_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'preparation_screenshots', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'ticket_comments': 'Check for the comments', 'ticket_comments_stg_review': '{status:SKIP}', 'ticket_comments_prod_review': '{status:NOT YET}', 'verify_locker_presence_db': "Login to SWAN\n{code:language=sql}\nselect * from locker_master where locker_id in ('17280M')\n{code}", 'verify_locker_presence_db_stg_review': '{status:SKIP}', 'verify_locker_presence_db_prod_review': '{status:NOT YET}', 'locker_id_exists': 'Locker with Locker Id exists. We will perform S-OUT through Rundeck.'}, 'rows': [{'label': 'Review the ticket comments for any pertinent updates regarding its status.', 'id': 'ticket_comments'}, {'label': 'Verify the presence of the locker in the database.', 'id': 'verify_locker_presence_db'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Task', 'id': 'execution_task', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Steps', 'id': 'execution_steps', 'style': 'border: 1px solid #ddd; vertical-align: top; background: #f7f7f7; font-weight: bold;'}, {'label': 'Remarks', 'id': 'execution_remarks', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'execute_s_out': 'Login to \nhttp://aspfjob201z.prod.jp.localdomain:4444/rundeck/projects/locker/pickup-jobs/project/locker-pickup-jb/job/show/7c897d98-e69e-457f-8fc2-c19897306194 for SIN/SOUT operation\n\nUpdate below fields as shown in screenshot\n- db-password : leave blank as value is auto populated.\n- locker-id:\n\n17280M\n\n      - locker-operation : select S-OUT\n      - Node : Uncheck\n\nClick on "Run Job Now" button', 'execute_s_out_stg_review': '{status:SKIP}', 'execute_s_out_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Execute S-OUT', 'id': 'execute_s_out'}]}, {'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 15px;', 'fields': [{'label': 'Verify', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7 vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'vacant_locker_api': 'Check the locker is not listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:SKIP}', 'vacant_locker_api_prod_review': '{status:NOT YET}', 'locker_master_data_change': "{expand:title=Locker Data Change}\n{code:language=sql|borderStyle=solid|theme=RDark|collapse=true}\nselect locker_id, prefecture_id from locker_master where locker_id = '17280M'; \n{code}", 'locker_master_data_change_stg_review': '{status:SKIP}', 'locker_master_data_change_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}, {'label': 'Confirm locker data change in locker master data', 'id': 'locker_master_data_change'}]}]}, {'heading': 'RollBack', 'content': [{'type': 'table', 'style': 'border-collapse: collapse; width: 100%; background: #fff; border: 1px solid #ddd; font-size: 16px;', 'fields': [{'label': 'Step', 'id': 'rollback_step', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Details', 'id': 'rollback_details', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top; font-weight: bold;'}, {'label': 'Remark', 'id': 'rollback_remark', 'style': 'border: 1px solid #ddd; background: #f7f7f7; vertical-align: top;'}, {'label': 'STG', 'id': 'stg_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}, {'label': 'PROD', 'id': 'prod_review', 'style': 'border: 1px solid #ddd; background: #f7f7f7;'}], 'static_values': {'connect_target_server': 'ssh user@bscglocker101z.prod.cklocal\n\nsudo su logiuser', 'connect_target_server_stg_review': '{status:NOT YET}', 'connect_target_server_prod_review': '{status:NOT YET}', 'connect_to_db': 'source /usr/local/logistics/oracle/env/lcker-rxaas.sh\n\nsqlplus lckeruser@\\"dexb07-s.prod.jp.local:2028/sv_lcker\\"\n(Locker DB credentials)\n\nREM INSERTING into LCKERUSER.LOCKER_MASTER\n\nSET DEFINE OFF;\n\nSET AUTOCOMMIT OFF;\n\nSHOW AUTOCOMMIT;', 'connect_to_db_stg_review': '{status:NOT YET}', 'connect_to_db_prod_review': '{status:NOT YET}', 'insert_locker_master': 'Insert into locker_master using backup CSV\n\n     Select * from locker_master\nConfirm inserted value', 'insert_locker_master_stg_review': '{status:NOT YET}', 'insert_locker_master_prod_review': '{status:NOT YET}', 'insert_vacant_locker': 'Insert into vacant_locker using backup CSV\n\nCheck inserted information\n\n      select * from VACANT_LOCKER\nCommit changes\n\ncommit;', 'insert_vacant_locker_stg_review': '{status:NOT YET}', 'insert_vacant_locker_prod_review': '{status:NOT YET}', 'restore_locker_vacant': 'Login to SWAN\n\nSelect * from locker_master and select * from VACANT_LOCKER\n\nConfirm data inserted', 'restore_locker_vacant_stg_review': '{status:NOT YET}', 'restore_locker_vacant_prod_review': '{status:NOT YET}', 'vacant_locker_api': 'Check the locker is listed in the vacant list and the prefecture_id is the updated one.\n(How to check vacant API)', 'vacant_locker_api_stg_review': '{status:NOT YET}', 'vacant_locker_api_prod_review': '{status:NOT YET}'}, 'rows': [{'label': 'Connect to target server and configure the environment', 'id': 'connect_target_server'}, {'label': 'Connect to the DB', 'id': 'connect_to_db'}, {'label': 'Insert into LOCKER_MASTER', 'id': 'insert_locker_master'}, {'label': 'Insert into VACANT_LOCKER', 'id': 'insert_vacant_locker'}, {'label': 'Restore of LOCKER_MASTER and VACANT_LOCKER table', 'id': 'restore_locker_vacant'}, {'label': 'Call vacant locker API to confirm inserted locker info', 'id': 'vacant_locker_api'}]}]}]},start_time=2025-06-26 15:49:57.694545
2025-06-26 15:50:00,464,464 - utils.universal_llm_generator - ERROR - ğŸ¤– LLM template analysis failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-06-26 15:50:00,464,464 - utils.universal_llm_generator - INFO - ğŸ Creating basic structure fallback
2025-06-26 15:50:00,465,465 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Using template title: Locker_AITest_S-OUT_20250626_154957_69380
2025-06-26 15:50:00,465,465 - utils.universal_llm_generator - INFO - ğŸ·ï¸ Final GUARANTEED unique title: Locker_AITest_S-OUT_20250626_154957_69380_155000_482
2025-06-26 15:50:00,465,465 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM generated content for SCG space, length: 3549 characters
2025-06-26 15:50:00,466,466 - utils.ai_agent - INFO - ğŸ¯ Generated page title: Locker_AITest_S-OUT_20250626_154957_69380_155000_482, space: SCG, parent ID: 5880757738 in 2.77s
2025-06-26 15:50:00,466,466 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 15:50:00,466,466 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 15:50:00,466,466 - utils.confluence_client - INFO - ğŸ“ Creating page: 'Locker_AITest_S-OUT_20250626_154957_69380_155000_482' in space 'SCG'
2025-06-26 15:50:00,466,466 - atlassian.confluence - INFO - Creating page "SCG" -> "Locker_AITest_S-OUT_20250626_154957_69380_155000_482"
2025-06-26 15:50:01,616,616 - utils.confluence_client - INFO - âœ… Page created successfully: ID=5922631585, URL=https://confluence.rakuten-it.com/confluence/display/SCG/Locker_AITest_S-OUT_20250626_154957_69380_155000_482
2025-06-26 15:50:01,621,621 - utils.ai_agent - INFO - ğŸ¤– Request processing completed in 7.65s
2025-06-26 15:50:01,623,623 - utils.ai_agent - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 15:50:01,625,625 - __main__ - INFO - ğŸ“Š Page creation stored successfully:
2025-06-26 15:50:01,625,625 - __main__ - INFO -    Title: Locker_AITest_S-OUT_20250626_155001_33201_1750933201_7682
2025-06-26 15:50:01,625,625 - __main__ - INFO -    Operation: locker_out
2025-06-26 15:50:01,625,625 - __main__ - INFO -    Success: True
2025-06-26 15:50:01,625,625 - __main__ - INFO -    Timestamp: 2025-06-26T15:50:01.625587
2025-06-26 15:50:01,625,625 - __main__ - INFO -    Database: agent_memory.db
2025-06-26 15:50:01,625,625 - __main__ - INFO - ğŸ¤– Request processing completed successfully in 7.68s
2025-06-26 15:50:01,626,626 - __main__ - INFO - ğŸ§  Cleaned up resources after request processing
2025-06-26 15:50:01,626,626 - __main__ - INFO - ğŸ“Š Generation completed in 7.68s
2025-06-26 15:50:01,626,626 - werkzeug - INFO - 100.67.92.21 - - [26/Jun/2025 15:50:01] "POST /generate_confluence HTTP/1.1" 200 -
2025-06-26 16:05:45,059,059 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/check_api_key.py', reloading
2025-06-26 16:05:47,214,214 - werkzeug - INFO -  * Restarting with stat
2025-06-26 16:05:48,034,034 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 16:05:48,034,034 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 16:05:48,039,039 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:05:48,042,042 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:05:48,042,042 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:05:48,043,043 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:05:48,043,043 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:05:48,043,043 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:05:48,043,043 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: gemini-2.5-flash
2025-06-26 16:05:48,044,044 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:05:48,046,046 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:05:48,046,046 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:05:48,046,046 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:05:48,046,046 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:05:48,046,046 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:05:48,047,047 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: raik-pat-964bd2c7br10ai2e9fbf0556f7a21374cac9b71daee8452e9fbf0556f7a21374
2025-06-26 16:05:48,086,086 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 16:05:48,109,109 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 16:06:04,270,270 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/check_api_key.py', reloading
2025-06-26 16:06:04,362,362 - werkzeug - INFO -  * Restarting with stat
2025-06-26 16:06:05,127,127 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 16:06:05,128,128 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 16:06:05,129,129 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:06:05,131,131 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:06:05,131,131 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:06:05,131,131 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:06:05,132,132 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:06:05,132,132 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:06:05,132,132 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: gemini-2.5-flash
2025-06-26 16:06:05,132,132 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:06:05,134,134 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:06:05,135,135 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:06:05,135,135 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:06:05,135,135 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:06:05,135,135 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:06:05,135,135 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: raik-pat-964bd2c7br10ai2e9fbf0556f7a21374cac9b71daee8452e9fbf0556f7a21374
2025-06-26 16:06:05,177,177 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 16:06:05,189,189 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 16:08:25,593,593 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/check_api_key.py', reloading
2025-06-26 16:08:25,698,698 - werkzeug - INFO -  * Restarting with stat
2025-06-26 16:08:26,377,377 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 16:08:26,377,377 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 16:08:26,378,378 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:08:26,379,379 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:08:26,380,380 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:08:26,380,380 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:26,380,380 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:26,380,380 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:08:26,380,380 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: gemini-2.5-flash
2025-06-26 16:08:26,381,381 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:08:26,382,382 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:08:26,383,383 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:08:26,383,383 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:26,383,383 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:26,383,383 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:08:26,383,383 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: raik-pat-964bd2c7br10ai2e9fbf0556f7a21374cac9b71daee8452e9fbf0556f7a21374
2025-06-26 16:08:26,417,417 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 16:08:26,435,435 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 16:08:37,245,245 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/check_api_key.py', reloading
2025-06-26 16:08:37,335,335 - werkzeug - INFO -  * Restarting with stat
2025-06-26 16:08:37,987,987 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 16:08:37,988,988 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 16:08:37,989,989 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:08:37,990,990 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:08:37,990,990 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:08:37,991,991 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:37,991,991 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:37,991,991 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:08:37,991,991 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: gemini-2.5-flash
2025-06-26 16:08:37,992,992 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:08:37,993,993 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:08:37,993,993 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:08:37,993,993 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:37,993,993 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:37,993,993 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:08:37,993,993 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: raik-pat-964bd2c7br10ai2e9fbf0556f7a21374cac9b71daee8452e9fbf0556f7a21374
2025-06-26 16:08:38,026,026 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 16:08:38,042,042 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 16:08:55,257,257 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/check_api_key.py', reloading
2025-06-26 16:08:55,340,340 - werkzeug - INFO -  * Restarting with stat
2025-06-26 16:08:56,053,053 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 16:08:56,053,053 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 16:08:56,054,054 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:08:56,056,056 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:08:56,056,056 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:08:56,056,056 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:56,056,056 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:56,056,056 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:08:56,056,056 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: gemini-2.5-flash
2025-06-26 16:08:56,057,057 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:08:56,059,059 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:08:56,059,059 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:08:56,059,059 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:56,059,059 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:08:56,059,059 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:08:56,059,059 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: raik-pat-964bd2c7br10ai2e9fbf0556f7a21374cac9b71daee8452e9fbf0556f7a21374
2025-06-26 16:08:56,096,096 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 16:08:56,114,114 - werkzeug - INFO -  * Debugger PIN: 119-762-361
2025-06-26 16:09:30,657,657 - werkzeug - INFO -  * Detected change in '/Users/ravi.chintakunta/IdeaProjects/confluence_git_ai_agent-NewLLM/check_api_key.py', reloading
2025-06-26 16:09:30,764,764 - werkzeug - INFO -  * Restarting with stat
2025-06-26 16:09:31,435,435 - __main__ - INFO - Logging initialized for app-llm.py
2025-06-26 16:09:31,435,435 - utils.template_processor - INFO - Initialized TemplateProcessor with directory: page_templates
2025-06-26 16:09:31,436,436 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:09:31,437,437 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:09:31,438,438 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:09:31,438,438 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:09:31,438,438 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:09:31,438,438 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:09:31,438,438 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: gemini-2.5-flash
2025-06-26 16:09:31,439,439 - utils.ai_agent - INFO - ğŸ§  Database initialized with updated schema
2025-06-26 16:09:31,440,440 - utils.ai_agent - INFO - ğŸ§  Database migration completed successfully
2025-06-26 16:09:31,441,441 - utils.universal_llm_generator - INFO - ğŸŒŸ Universal LLM Generator initialized - Enhanced Storage Format
2025-06-26 16:09:31,441,441 - utils.confluence_client - INFO - Initialized ConfluenceClient for https://confluence.rakuten-it.com/confluence
2025-06-26 16:09:31,441,441 - utils.confluence_client - INFO - ğŸ”— Confluence client initialized WITH authentication for https://confluence.rakuten-it.com/confluence
2025-06-26 16:09:31,441,441 - utils.ai_agent - INFO - ğŸ¤– Complete AI Agent initialized with learning, memory, and planning capabilities
2025-06-26 16:09:31,441,441 - __main__ - INFO - ğŸ¤– AI Agent initialized with model: raik-pat-964bd2c7br10ai2e9fbf0556f7a21374cac9b71daee8452e9fbf0556f7a21374
2025-06-26 16:09:31,468,468 - werkzeug - WARNING -  * Debugger is active!
2025-06-26 16:09:31,478,478 - werkzeug - INFO -  * Debugger PIN: 119-762-361
